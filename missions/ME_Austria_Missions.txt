ME_hab_slot_1 = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		OR = {
			AND = {
				tag = HAB
				has_country_flag = use_missions_expanded_missions_instead_of_paradox
			}
			AND = {
				tag = AUB
				primary_culture = austrian
			}
		}
	}
	has_country_shield = yes

	ME_hab_enemies_of_the_empire = {
		icon = shift_the_balance
		position = 2
		required_missions = { ME_hab_aeiou }
		trigger = {
			all_rival_country = {
				NOT = { army_size = ROOT }
			}
			if = {
				limit = {
					hre_size = 1
				}
				is_emperor = yes
				custom_trigger_tooltip = {
					tooltip = me_hab_no_one_to_threaten_us_trigger_tooltip
					NOT = {
						any_country = {
							NOT = { tag = root }
							NOT = { is_subject_of = ROOT }
							is_part_of_hre = yes
							num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
								value = 14
								continent = europe
							}
						}
					}
				}
				calc_true_if = {
					desc = emp_hab_no_one_to_threaten_us_trigger2_tooltip
					amount = 10
					all_country = {
						has_reform = free_city
					}
				}
			}
			else = {
				army_size = 50
			}
		}
		effect = {
			add_power_projection = {
				type = mission_rewards_power_projection
				amount = 10
			}
			if = {
				limit = {
					is_emperor = yes
				}
				add_imperial_influence = 5
			}
			add_dip_power = 50
			add_mil_power = 50
			add_adm_power = 50
		}
	}

	ME_hab_steps_of_reform = {
		icon = the_imperial_border
		position = 3
		required_missions = { ME_hab_enemies_of_the_empire }
		provinces_to_highlight = {
			OR = {
				region = north_german_region
				region = south_german_region
			}
			NOT = { owned_by = ROOT }
			NOT = { hre_size = 1 }
		}
		trigger = {
			if = {
				limit = {
					hre_size = 1
				}
				if = {
					limit = {
						has_dlc = "Emperor"
					}
					hre_reform_passed = emperor_reichsregiment
				}
				else = {
					hre_reform_passed = reichsregiment
				}
				calc_true_if = {
					all_elector = {
						preferred_emperor = ROOT
					}
					amount = 6
				}
			}
			else = {
				num_of_owned_provinces_with = {
					value = 30
					OR = {
						region = north_german_region
						region = south_german_region
					}
				}
			}
		}
		effect = {
			if = {
				limit = {
					hre_size = 1
				}
				if = {
					limit = {
						is_emperor = yes
					}
					add_imperial_influence = 10
				}
				hidden_effect = {
					every_country = {
						limit = {
							NOT = { tag = ROOT }
							capital_scope = {
								is_part_of_hre = yes
							}
						}
						add_opinion = {
							who = ROOT
							modifier = me_hab_successful_reform
						}
					}
				}
				custom_tooltip = me_hab_every_hre_memeber
			}
			else = {
				add_yearly_manpower = 2
			}
		}
	}

	ME_hab_a_realm_reborn = {
		icon = lead_the_empire
		position = 5
		required_missions = { ME_hab_steps_of_reform ME_hab_redraw_imperial_borders }
		provinces_to_highlight = {
			OR = {
				province_id = 50
				province_id = 57
				province_id = 65
				AND = {
					ROOT = {
						NOT = { owns_core_province = 75 }
						NOT = { owns_core_province = 41 }
					}
					OR = {
						province_id = 75
						province_id = 41
					}
				}
				AND = {
					ROOT = {
						NOT = { owns_core_province = 1868 }
						NOT = { owns_core_province = 70 }
					}
					OR = {
						province_id = 1868
						province_id = 70
					}
				}
				AND = {
					ROOT = {
						NOT = { owns_core_province = 1876 }
						NOT = { owns_core_province = 67 }
					}
					OR = {
						province_id = 1876
						province_id = 67
					}
				}
				AND = {
					ROOT = {
						NOT = { owns_core_province = 1762 }
						NOT = { owns_core_province = 85 }
					}
					OR = {
						province_id = 1762
						province_id = 85
					}
				}
				AND = {
					ROOT = {
						NOT = { owns_core_province = 41 }
						NOT = { owns_core_province = 75 }
					}
					OR = {
						province_id = 41
						province_id = 75
					}
				}
				AND = {
					ROOT = {
						NOT = { owns_core_province = 44 }
						NOT = { owns_core_province = 45 }
					}
					OR = {
						province_id = 44
						province_id = 45
					}
				}
				AND = {
					ROOT = {
						NOT = { owns_core_province = 61 }
						NOT = { owns_core_province = 63 }
					}
					OR = {
						province_id = 61
						province_id = 63
					}
				}
				AND = {
					OR = {
						region = north_german_region
						region = south_german_region
					}
					ROOT = {
						NOT = {
							num_of_owned_provinces_with = {
								is_core = ROOT
								OR = {
									region = north_german_region
									region = south_german_region
								}
								value = 50
							}
						}
					}
				}
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		trigger = {
			if = {
				limit = {
					hre_size = 1
				}
				if = {
					limit = {
						has_dlc = "Emperor"
					}
					OR = {
						hre_reform_passed =	emperor_reichskrieg
						hre_reform_passed =	emperor_privilegia_de_non_appelando
					}
				}
				else = {
					hre_reform_passed = privilegia_de_non_appelando
				}
			}
			else = {
				owns_core_province = 50	# Berlin
				owns_core_province = 57	# Brunswick
				owns_core_province = 65	# München
				OR = {
					owns_core_province = 1868 # Augsburg
					owns_core_province = 70 # Wurttemberg
				}
				OR = {
					owns_core_province = 67	# Nürnberg
					owns_core_province = 1876 # Frankfurt
				}
				OR = {
					owns_core_province = 1762 # Niederhessen
					owns_core_province = 85	# Köln
				}
				OR = {
					owns_core_province = 41	# Königsberg
					owns_core_province = 75	# Strassburg
				}
				OR = {
					owns_core_province = 44	# Hamburg
					owns_core_province = 45	# Lubeck
				}
				OR = {
					owns_core_province = 61	# Dresden
					owns_core_province = 63	# Thüringen
				}
				num_of_owned_provinces_with = {
					is_core = ROOT
					OR = {
						region = north_german_region
						region = south_german_region
					}
					value = 50
				}
			}
		}
		effect = {
			if = {
				limit = {
					hre_reform_passed = emperor_reichskrieg
				}
				add_country_modifier = {
					name = me_hab_imperial_war_leader
					duration = -1
				}
			}
			else_if = {
				limit = {
					NOT = { hre_size = 1 }
				}
				set_country_flag = me_hab_easier_german_formation
				custom_tooltip = me_hab_easier_german_formation
				random_owned_province = {
					limit = {
						OR = {
							region = north_german_region
							region = south_german_region
						}
					}
					add_base_manpower = 2
					add_base_production = 2
					add_base_tax = 2
				}
				random_owned_province = {
					limit = {
						OR = {
							region = north_german_region
							region = south_german_region
						}
					}
					add_base_manpower = 2
					add_base_production = 2
					add_base_tax = 2
				}
				random_owned_province = {
					limit = {
						OR = {
							region = north_german_region
							region = south_german_region
						}
					}
					add_base_manpower = 2
					add_base_production = 2
					add_base_tax = 2
				}
				random_owned_province = {
					limit = {
						OR = {
							region = north_german_region
							region = south_german_region
						}
					}
					add_base_manpower = 2
					add_base_production = 2
					add_base_tax = 2
				}
				random_owned_province = {
					limit = {
						OR = {
							region = north_german_region
							region = south_german_region
						}
					}
					add_base_manpower = 2
					add_base_production = 2
					add_base_tax = 2
				}
				add_power_projection = {
					type = mission_rewards_power_projection
					amount = 25
				}
			}
			else = {
				add_country_modifier = {
					name = me_hab_the_empire_stands_triumphant
					duration = -1
				}
			}
		}
	}

	ME_hab_management_of_the_estates = {
		icon = appease_the_estates
		position = 9
		required_missions = { ME_hab_unite_the_realm }
		trigger = {
			if = {
				limit = {
					OR = {
						has_estate = estate_church
						has_estate = estate_burghers
						has_estate = estate_nobles
					}
				}
				OR = {
					num_of_estate_agendas_completed = {
						value = 10
						estate = estate_church
					}
					num_of_estate_agendas_completed = {
						value = 10
						estate = estate_burghers
					}
					num_of_estate_agendas_completed = {
						value = 10
						estate = estate_nobles
					}
				}
				crown_land_share = 40
				estate_loyalty = {
					estate = all
					loyalty = 60
				}
			}
			else = {
				monthly_adm = 8
				monthly_dip = 8
				monthly_mil = 8
				legitimacy_equivalent = 100
				all_owned_province = {
					NOT = { unrest = 1 }
				}
			}
		}
		effect = {
			if = {
				limit = {
					OR = {
						has_estate = estate_church
						has_estate = estate_burghers
						has_estate = estate_nobles
					}
				}
				country_event = { id = ME_Austria_Events.16 }
			}
			else = {
				add_years_of_income = 2
			}
		}
	}

	ME_hab_our_westward_enemy = {
		icon = mission_the_french_menace
		position = 11
		required_missions = { ME_hab_burgundian_inheritance }
		provinces_to_highlight = {
			province_id = 183
			NOT = { owned_by = ROOT }
			NOT = { exists = FRA }
		}
		trigger = {
			if = {
				limit = {
					exists = FRA
				}
				war_score_against = {
					who = FRA
					value = 50
				}
			}
			else = {
				183 = {
					owned_by = ROOT
				}
			}
		}
		effect = {
			ME_give_claims = { region = france_region }
		}
	}

	ME_hab_balkanize_france = {
		icon = centralize_france
		position = 12
		required_missions = { ME_hab_our_westward_enemy }
		provinces_to_highlight = {
			region = france_region
			NOT = { is_part_of_hre = yes }
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			ROOT = {
				NOT = {
					num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
						value = 30
						region = france_region
					}
				}
				NOT = {
					calc_true_if = {
						france_region = {
							type = all
							is_part_of_hre = yes
						}
						amount = 30
					}
				}
			}
		}
		trigger = {
			OR = {
				num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
					value = 30
					region = france_region
				}
				calc_true_if = {
					france_region = {
						type = all
						is_part_of_hre = yes
					}
					amount = 30
				}
			}
		}
		effect = {
			#will show the other modifiers, add custom tooltip like in the hungary mission here
			if = {
				limit = {
					is_emperor = yes
					calc_true_if = {
						france_region = {
							type = all
							is_part_of_hre = yes
						}
						amount = 30
					}
				}
				add_imperial_influence = 30
			}
			else = {
				add_country_modifier = {
					name = me_hab_westwards_expansion
					duration = 10950
				}
			}
		}
	}

	ME_hab_secure_lubeck = {
		icon = unite_the_league
		position = 17
		required_missions = { ME_hab_talks_with_the_hansa }
		provinces_to_highlight = {
			province_id = 45
			OR = {
				NOT = { owned_by = ROOT }
				AND = {
					NOT = { has_trade_building_trigger = yes }
					NOT = { province_trade_power = 40 }
					NOT = {
						trade_share = {
							country = ROOT
							share = 40
						}
					}
				}
			}
		}
		trigger = {
			45 = {
				owned_by = ROOT
				OR = {
					has_trade_building_trigger = yes
					province_trade_power = 40
					trade_share = {
						country = ROOT
						share = 40
					}
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = me_hab_control_of_the_hansa
				duration = 9125
			}
			45 = {
				add_or_upgrade_trade_building = yes
			}
		}
	}
}

ME_hab_slot_2 = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		OR = {
			AND = {
				tag = HAB
				has_country_flag = use_missions_expanded_missions_instead_of_paradox
			}
			AND = {
				tag = AUB
				primary_culture = austrian
			}
		}
	}
	has_country_shield = yes

	ME_hab_the_imperial_edges = {
		icon = claim_the_borderlands
		position = 3
		required_missions = { ME_hab_enemies_of_the_empire ME_hab_secure_elector_votes }
		trigger = {
			if = {
				limit = {
					hre_size = 1
				}
				is_emperor = yes
				custom_trigger_tooltip = {
					tooltip = no_hre_province_owned_by_non_hre_member_or_overlord_trigger
					NOT = { num_of_foreign_hre_provinces = 1 }
				}
			}
			else = {
				north_german_region = {
					type = all
					owner = {
						culture_group = ROOT
					}
				}
				south_german_region = {
					type = all
					owner = {
						culture_group = ROOT
					}
				}
			}
		}
		effect = {
			if = {
				limit = {
					hre_size = 1
				}
				hidden_effect = {
					every_province = {
						limit = {
							is_part_of_hre = yes
						}
						set_province_flag = me_hab_part_of_hre
					}
				}
				add_country_modifier = {
					name = me_hab_empire_secured
					duration = 3650
				}
			}
			else = {
				change_mil = 2
				add_mil_power = 100
			}
		}
	}

	ME_hab_redraw_imperial_borders = {
		icon = avoid_fragmentation
		position = 4
		required_missions = { ME_hab_the_imperial_edges }
		provinces_to_highlight = {
			OR = {
				AND = {
					hre_size = 1
					is_part_of_hre = no
					NOT = { has_province_flag = me_hab_part_of_hre }
					ROOT = {
						NOT = {
							calc_true_if = {
								all_province = {
									is_part_of_hre = yes
									NOT = {
										has_province_flag = me_hab_part_of_hre
									}
								}
								amount = 20
							}
						}
					}
				}
				AND = {
					NOT = { hre_size = 1 }
					NOT = { region = north_german_region }
					NOT = { region = south_german_region }
					NOT = { country_or_non_sovereign_subject_holds = ROOT }
					ROOT = {
						NOT = {
							num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
								value = 20
								NOT = { region = north_german_region }
								NOT = { region = south_german_region }
							}
						}
					}
				}
			}
		}
		trigger = {
			if = {
				limit = {
					hre_size = 1
				}
				custom_trigger_tooltip = {
					tooltip = ME_HAB_EXPAND_EMPIRE
					calc_true_if = {
						all_province = {
							is_part_of_hre = yes
							NOT = {
								has_province_flag = me_hab_part_of_hre
							}
						}
						amount = 20
					}
				}
			}
			else = {
				num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
					value = 20
					NOT = { region = north_german_region }
					NOT = { region = south_german_region }
				}
			}
		}
		effect = {
			if = {
				limit = {
					hre_size = 1
				}
				hidden_effect = {
					every_province = {
						limit = {
							is_part_of_hre = yes
							NOT = {
								has_province_flag = me_hab_part_of_hre
							}
						}
						add_province_modifier = {
							name = me_hab_bestow_imperial_privileges
							duration = 9125
						}
					}
				}
				custom_tooltip = me_hab_every_province_that_was_added_in_hre
				tooltip = {
					add_province_modifier = {
						name = me_hab_bestow_imperial_privileges
						duration = 9125
					}
				}
				if = {
					limit = {
						is_emperor = yes
					}
					add_imperial_influence = 10
				}
			}
			else = {
				add_country_modifier = {
					name = me_hab_austrian_imperialism
					duration = 7300
				}
			}
		}
	}

	ME_hab_barbarossas_legacy = {
		icon = holy_state
		position = 6
		required_missions = { ME_hab_redraw_imperial_borders }
		provinces_to_highlight = {
			OR = {
				AND = {
					hre_size = 1
					continent = europe
					is_part_of_hre = no
					ROOT = {
						NOT = {
							calc_true_if = {
								europe = {
									type = all
									is_part_of_hre = yes
								}
								amount = 200
							}
						}
					}
				}
				AND = {
					NOT = { hre_size = 1 }
					OR = {
						region = north_german_region
						region = south_german_region
					}
					NOT = { owned_by = ROOT }
				}
			}
		}
		trigger = {
			if = {
				limit = {
					hre_size = 1
				}
				calc_true_if = {
					europe = {
						type = all
						is_part_of_hre = yes
					}
					amount = 250
				}
			}
			else = {
				north_german_region = {
					type = all
					owned_by = ROOT
				}
				south_german_region = {
					type = all
					owned_by = ROOT
				}
			}
		}
		effect = {
			if = {
				limit = {
					ADM = 6
				}
				add_adm_power = 100
			}
			else = {
				change_adm = 1
			}
			if = {
				limit = {
					DIP = 6
				}
				add_dip_power = 100
			}
			else = {
				change_dip = 1
			}
			if = {
				limit = {
					MIL = 6
				}
				add_mil_power = 100
			}
			else = {
				change_mil = 1
			}
			add_country_modifier = {
				name = me_hab_a_new_iron_emperor
				duration = 9125
			}
		}
	}

	ME_hab_a_magnificent_court = {
		icon = immaculate_government
		position = 7
		required_missions = {  }
		trigger = {
			prestige = 20
			has_mil_advisor = yes
			has_adm_advisor = yes
			has_dip_advisor = yes
			total_development = 180
		}
		effect = {
			custom_tooltip = ME_HAB_UNLOCK_HABSBURG_GLORY
			set_country_flag = habsburg_glory_unlocked
			HAB_change_habsburg_glory = { amount = 10 }
			country_event = { id = ME_Austria_Events.36 }
			ME_give_claims = { id = 4751 }
			ME_give_claims = { id = 110 }
		}
	}

	ME_hab_unite_the_realm = {
		icon = adjust_the_general_means
		position = 8
		required_missions = { ME_hab_a_magnificent_court }
		provinces_to_highlight = {
			OR = {
				area = tirol_area
				area = inner_austria_area
				area = austria_proper_area
			}
			OR = {
				is_core = TIR
				is_core = STY
			}
		}
		trigger = {
			OR = {
				custom_trigger_tooltip = {
					tooltip = me_hab_less_than_4_province_have_core_of_styria_and_tirol
					NOT = {
						num_of_owned_provinces_with = {
							OR = {
								is_core = TIR
								is_core = STY
							}
							value = 4
						}	
					}
				}
			}
		}
		effect = {
			add_legitimacy_equivalent = { amount = 10 republican_tradition = 3 }
			hidden_effect = {
				every_owned_province = {
					limit = {
						OR = {
							area = tirol_area
							area = inner_austria_area
							area = austria_proper_area
							area = carinthia_area
						}
					}
					add_province_modifier = {
						name = me_hab_one_crown_one_ruler
						duration = 7300
					}
				}
			}
			custom_tooltip = me_hab_every_province_in_austria_owned_by_us
			tooltip = {
				add_province_modifier = {
					name = me_hab_one_crown_one_ruler
					duration = 7300
				}
			}
		}
	}

	ME_hab_settling_a_score = {
		icon = answer_the_roman_question
		position = 9
		required_missions = { ME_hab_unite_the_realm }
		provinces_to_highlight = {
			province_id = 118
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			ROOT = {
				OR = {
					AND = {
						is_papal_controller = no
						NOT = { invested_papal_influence = 50 }
					}
					is_emperor = no
					PAP = {
						NOT = {
							has_opinion = {
								who = ROOT
								value = 200
							}
						}
					}
					NOT = { alliance_with = PAP }
				}
			}
		}
		trigger = {
			OR = {
				AND = {
					OR = {
						is_papal_controller = yes
						invested_papal_influence = 50
					}
					is_emperor = yes
					PAP = {
						has_opinion = {
							who = ROOT
							value = 200
						}
					}
					alliance_with = PAP
				}
				118 = {
					country_or_non_sovereign_subject_holds = ROOT
				}
			}
		}
		effect = {
			if = {
				limit = {
					118 = {
						country_or_non_sovereign_subject_holds = ROOT
					}
				}
				country_event = { id = ME_Austria_Events.19 }
			}
			else = {
				country_event = { id = ME_Austria_Events.18 }
			}
		}
	}

	ME_hab_burgundian_inheritance = {
		icon = the_crown_of_lothair
		position = 10
		required_missions = {  }
		provinces_to_highlight = {
			OR = {
				area = wallonia_area
				area = brabant_area
				area = holland_area
				area = north_brabant_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			owner = {
				OR = {
					is_part_of_hre = no
					is_subject = yes
				}
			}
			ROOT = {
				NOT = { senior_union_with = BUR }
			}
		}
		trigger = {
			OR = {
				senior_union_with = BUR
				AND = {
					wallonia_area = {
						type = all
						OR = {
							country_or_non_sovereign_subject_holds = ROOT
							owner = {
								is_part_of_hre = yes
								is_subject = no
							}
						}
					}
					brabant_area = {
						type = all
						OR = {
							country_or_non_sovereign_subject_holds = ROOT
							owner = {
								is_part_of_hre = yes
								is_subject = no
							}
						}
					}
					holland_area = {
						type = all
						OR = {
							country_or_non_sovereign_subject_holds = ROOT
							owner = {
								is_part_of_hre = yes
								is_subject = no
							}
						}
					}
					north_brabant_area = {
						type = all
						OR = {
							country_or_non_sovereign_subject_holds = ROOT
							owner = {
								is_part_of_hre = yes
								is_subject = no
							}
						}
					}
				}
			}
		}
		effect = {
			if = {
				limit = {
					senior_union_with = BUR
				}
				add_country_modifier = {
					name = me_hab_eyes_on_the_west
					duration = 5475
				}
				BUR = {
					add_country_modifier = {
						name = me_hab_eyes_on_the_west
						duration = 5475
					}
				}
			}
			else_if = {
				limit = {
					west_burgundy_area = {
						type = all
						OR = {
							country_or_non_sovereign_subject_holds = ROOT
							owner = {
								is_part_of_hre = yes
								is_subject = no
							}
						}
					}
					bourgogne_area = {
						type = all
						OR = {
							country_or_non_sovereign_subject_holds = ROOT
							owner = {
								is_part_of_hre = yes
								is_subject = no
							}
						}
					}
					flanders_area = {
						type = all
						OR = {
							country_or_non_sovereign_subject_holds = ROOT
							owner = {
								is_part_of_hre = yes
								is_subject = no
							}
						}
					}
				}
				wallonia_area = {
					add_local_autonomy = -15
				}
				brabant_area = {
					add_local_autonomy = -15
				}
				holland_area = {
					add_local_autonomy = -15
				}
				north_brabant_area = {
					add_local_autonomy = -15
				}
				west_burgundy_area = {
					add_local_autonomy = -15
				}
				bourgogne_area = {
					add_local_autonomy = -15
				}
				flanders_area = {
					add_local_autonomy = -15
				}
				add_country_modifier = {
					name = me_hab_lotharingia_into_the_fold
					duration = 5475
				}
			}
			else = {
				add_country_modifier = {
					name = me_hab_balance_of_power
					duration = 7300
				}
				BUR = {
					add_country_modifier = {
						name = me_hab_kingdom_of_lotharingia
						duration = -1
					}
				}
			}
		}
	}

	ME_hab_papal_relations = {
		icon = support_the_orders
		position = 15
		required_missions = { ME_hab_shadowbringer }
		provinces_to_highlight = {
			OR = {
				area = central_italy_area
				province_id = 119
				province_id = 2977
			}
			NOT = { owned_by = ROOT }
			ROOT = {
				NOT = {
					OR = {
						AND = {
							is_emperor = yes
							PAP = {
								has_opinion = {
									who = ROOT
									value = 200
								}
							}
						}
						AND = {
							is_emperor = yes
							PAP = {
								capital_scope = {
									is_part_of_hre = yes
								}
							}
							papal_influence = 50
						}
						AND = {
							num_of_owned_provinces_with = {
								value = 4
								OR = {
									area = central_italy_area
									province_id = 119
									province_id = 2977
								}
							}
						}
					}
				}
			}
		}
		trigger = {
			OR = {
				AND = {
					is_emperor = yes
					PAP = {
						has_opinion = {
							who = ROOT
							value = 200
						}
					}
				}
				AND = {
					is_emperor = yes
					PAP = {
						capital_scope = {
							is_part_of_hre = yes
						}
					}
					papal_influence = 50
				}
				AND = {
					num_of_owned_provinces_with = {
						value = 4
						OR = {
							area = central_italy_area
							province_id = 119
							province_id = 2977
						}
					}
				}
			}
		}
		effect = {
			if = {
				limit = {
					is_emperor = yes
					PAP = {
						capital_scope = {
							is_part_of_hre = yes
						}
					}
					papal_influence = 50
				}
				add_country_modifier = {
					name = me_hab_papal_authority
					duration = 5475
				}
			}
			else_if = {
				limit = {
					num_of_owned_provinces_with = {
						value = 4
						OR = {
							area = central_italy_area
							province_id = 119
							province_id = 2977
						}
					}
				}
				central_italy_area = {
					limit = {
						owned_by = ROOT
					}
					add_province_modifier = {
						name = me_hab_under_new_management
						duration = 5475
					}
				}
				119 = {
					if = {
						limit = { owned_by = ROOT }
						add_province_modifier = {
							name = me_hab_under_new_management
							duration = 5475
						}
					}
				}
				2977 = {
					if = {
						limit = { owned_by = ROOT }
						add_province_modifier = {
							name = me_hab_under_new_management
							duration = 5475
						}
					}
				}
			}
			else = {
				PAP = {
					country_event = { id = ME_Austria_Events.23 }
				}
			}
		}
	}

	ME_hab_talks_with_the_hansa = {
		icon = return_visby_to_the_league
		position = 16
		required_missions = {  }
		provinces_to_highlight = {
			province_id = 45
			NOT = { owned_by = ROOT }
			owner = {
				NOT = {
					has_opinion = {
						who = ROOT
						value = 150
					}
				}
			}
		}
		trigger = {
			OR = {
				45 = {
					owner = {
						has_opinion = {
							who = ROOT
							value = 150
						}
					}
				}
				45 = {
					owned_by = ROOT
				}
			}
		}
		effect = {
			if = {
				limit = {
					NOT = {
						45 = {
							owned_by = ROOT
						}
					}
				}
				add_years_of_income = 0.5
				ME_give_claims = { id = 45 }
			}
			else = {
				45 = {
					add_province_modifier = {
						name = me_hab_the_seat_of_trade
						duration = 18250
					}
				}
			}
		}
	}

	ME_hab_early_industralization = {
		icon = explore_caribbean
		position = 18
		required_missions = { ME_hab_secure_lubeck ME_hab_expand_bohemian_cities }
		trigger = {
			calc_true_if = {
				desc = build_manufactories_mission_tooltip
				all_owned_province = {
					OR = {
						has_building = mills
						has_building = farm_estate
						has_building = tradecompany
						has_building = plantations
						has_building = textile
						has_building = weapons
						has_building = wharf
						has_building = furnace
					}
				}
				amount = 20
			}
			calc_true_if = {
				all_owned_province = {
					base_production = 10
					OR = {
						has_building = mills
						has_building = farm_estate
						has_building = tradecompany
						has_building = plantations
						has_building = textile
						has_building = weapons
						has_building = wharf
						has_building = furnace
					}
				}
				amount = 10
			}
		}
		effect = {
			add_years_of_income = 2
			custom_tooltip = ME_hab_early_industralization_tt
			tooltip = {
				add_province_modifier = {
					name = me_hab_a_push_to_industralisation
					duration = 7300
				}
			}
			hidden_effect = {
				every_owned_province = {
					limit = {
						base_production = 10
						OR = {
							has_building = mills
							has_building = farm_estate
							has_building = tradecompany
							has_building = plantations
							has_building = textile
							has_building = weapons
							has_building = wharf
							has_building = furnace
						}
					}
					add_province_modifier = {
						name = me_hab_a_push_to_industralisation
						duration = 7300
					}
				}
			}
		}
	}
}

ME_hab_slot_3 = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		OR = {
			AND = {
				tag = HAB
				has_country_flag = use_missions_expanded_missions_instead_of_paradox
			}
			AND = {
				tag = AUB
				primary_culture = austrian
			}
		}
	}
	has_country_shield = yes

	ME_hab_aeiou = {
		icon = a.e.i.o.u.
		position = 1
		required_missions = { }
		trigger = {
			army_size = 25
		}
		effect = {
			add_country_modifier = {
				name = me_hab_imperial_influence_modifier
				duration = 7300
			}
			every_elector = {
				add_opinion = {
					who = ROOT
					modifier = me_hab_rising_imperial_influence
				}
			}
		}
	}

	ME_hab_secure_elector_votes = {
		icon = catholic_confraternity
		position = 2
		required_missions = { ME_hab_aeiou }
		trigger = {
			if = {
				limit = {
					hre_size = 1
				}
				calc_true_if = {
					all_elector = {
						preferred_emperor = ROOT
						has_opinion = {
							who = ROOT
							value = 100
						}
					}
					amount = 5
				}
			}
			else = {

			}
		}
		effect = {
			add_country_modifier = {
				name = me_hab_successful_bid_for_the_imperial_crown
				duration = 5475
			}
			custom_tooltip = HAB_if_completed_by_valid_personal_union_boh
			tooltip = {
				add_casus_belli = {
					type = cb_restore_personal_union
					months = 300
					target = BOH
				}
				custom_tooltip = ME_cb_25
			}
			custom_tooltip = HAB_if_completed_by_valid_personal_union_boh_not
			tooltip = {
				ME_give_claims = { area = bohemia_area }
				ME_give_claims = { area = erzgebirge_area }
				ME_give_claims = { area = moravia_area }
			}
			hidden_effect = {
				if = {
					limit = {
						exists = BOH
						valid_for_personal_unions_trigger = yes
						BOH = {
							valid_for_personal_unions_trigger = yes
						}
					}
					add_casus_belli = {
						type = cb_restore_personal_union
						months = 300
						target = BOH
					}
				}
				else = {
					ME_give_claims = { area = bohemia_area }
					ME_give_claims = { area = erzgebirge_area }
					ME_give_claims = { area = moravia_area }
				}
			}
		}
	}

	ME_hab_secure_bohemia = {
		icon = reformatio_sigismundi
		position = 4
		required_missions = { ME_hab_secure_elector_votes }
		provinces_to_highlight = {
			OR = {
				area = bohemia_area
				area = erzgebirge_area
				area = moravia_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			ROOT = {
				NOT = { senior_union_with = BOH }
			}
		}
		trigger = {
			OR = {
				senior_union_with = BOH
				AND = {
					bohemia_area = {
						type = all
						country_or_non_sovereign_subject_holds = ROOT
					}
					erzgebirge_area = {
						type = all
						country_or_non_sovereign_subject_holds = ROOT
					}
					moravia_area = {
						type = all
						country_or_non_sovereign_subject_holds = ROOT
					}
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = me_hab_kingdom_of_bohemia
				duration = 5475
			}
			
			country_event = { id = ME_Austria_Events.37 }
		}
	}

	ME_hab_the_polish_realm = {
		icon = polish_diplomacy
		position = 5
		required_missions = { ME_hab_secure_bohemia ME_hab_the_castles_of_transylvania }
		provinces_to_highlight = {
			
		}
		trigger = {
			#lordv you probably wanna make the mision depend on the event choices in ME_Austria_Events.37
			
			#HAB_may_balkanize_poland country flag for balkanization
			# HAB_chose_to_conquer_poland for the conquest of sandomierz, malopolska and red ruthenia areas
		}
		effect = {
			
		}
	}

	ME_hab_the_mainland = {
		icon = claim_tirol
		position = 8
		required_missions = { ME_hab_a_magnificent_court }
		provinces_to_highlight = {
			OR = {
				province_id = 4751
				province_id = 110
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { num_of_buildings_in_province = 2 }
				NOT = { development = 15 }
			}
		}
		trigger = {
			4751 = {
				owned_by = ROOT
				num_of_buildings_in_province = 2
				development = 15
			}
			110 = {
				owned_by = ROOT
				num_of_buildings_in_province = 2
				development = 15
			}
		}
		effect = {
			4751 = {
				add_province_modifier = {
					name = me_hab_integration_to_the_realm
					duration = 18250
				}
				change_culture = ROOT
			}
			110 = {
				add_province_modifier = {
					name = me_hab_integration_to_the_realm
					duration = 18250
				}
				change_culture = ROOT
			}
			add_years_of_income = 1
		}
	}

	ME_hab_the_austrian_culture = {
		icon = invest_in_the_provinces
		position = 9
		required_missions = { ME_hab_the_mainland }
		provinces_to_highlight = {
			culture = ROOT
			ROOT = {
				NOT = {
					development_in_provinces = {
						value = 200
						culture = ROOT
					}
				}
			}
		}
		trigger = {
			development_in_provinces = {
				value = 200
				culture = ROOT
			}
		}
		effect = {
			custom_tooltip = ME_hab_the_austrian_culture_tt
			tooltip = {
				add_province_modifier = {
					name = me_hab_cultural_enthusiasm
					duration = 10950
				}
			}
			hidden_effect = {
				every_owned_province = {
					limit = {
						culture = ROOT
						num_of_times_improved_by_owner = 7
					}
					add_province_modifier = {
						name = me_hab_cultural_enthusiasm
						duration = 10950
					}
				}
			}
			random_owned_province = {
				limit = {
					culture = ROOT
				}
				add_base_tax = 2
				add_base_production = 2
				add_base_manpower = 2
			}
			random_owned_province = {
				limit = {
					culture = ROOT
				}
				add_base_tax = 2
				add_base_production = 2
				add_base_manpower = 2
			}
			random_owned_province = {
				limit = {
					culture = ROOT
				}
				add_base_tax = 2
				add_base_production = 2
				add_base_manpower = 2
			}
		}
	}

	ME_hab_germanization = {
		icon = promote_urbanization
		position = 10
		required_missions = { ME_hab_the_austrian_culture ME_hab_the_cultures_of_the_realm }
		trigger = {
			OR = {
				current_age = age_of_absolutism
				has_institution = enlightenment
			} #is this really necessary? Yes Stiopa, it is. I don't want people to rush the mission. It is meant to be a late game thing
			num_of_owned_provinces_with = {
				value = 50
				has_owner_accepted_culture = yes
				NOT = { culture_group = ROOT }
				is_overseas = no
			}
			bohemia_area = {
				type = all
				owned_by = ROOT
			}
			erzgebirge_area = {
				type = all
				owned_by = ROOT
			}
			moravia_area = {
				type = all
				owned_by = ROOT
			}
			transdanubia_area = {
				type = all
				owned_by = ROOT
			}
			alfold_area = {
				type = all
				owned_by = ROOT
			}
			slovakia_area = {
				type = all
				owned_by = ROOT
			}
		}
		effect = {
			set_country_flag = me_hab_start_germanization
			custom_tooltip = me_hab_germanization_tt
			hidden_effect = {
				set_variable = {
					which = germanization
					value = 0
				}
			}
		}
	}

	ME_hab_spread_our_dynasty = {
		icon = glory_to_von_habsburg
		position = 11
		required_missions = { ME_hab_burgundian_inheritance ME_hab_the_iberian_peninsula }
		trigger = {
			calc_true_if = {
				all_country = {
					dynasty = ROOT
					is_subject = no
				}
				amount = 3
			}
		}
		effect = {
			every_country = {
				limit = {
					dynasty = ROOT
					NOT = { tag = ROOT }
				}
				add_country_modifier = {
					name = me_hab_ties_with_austria
					duration = 1825
				}
			} #TO DO STIOPA: add a tooltip for this
			add_country_modifier = {
				name = me_hab_spread_our_dynastic_seeds
				duration = 7300
			}
			add_dip_power = 100
		}
	}

	ME_hab_a_von_habsburg_europe = {
		icon = peace_in_europe
		position = 12
		required_missions = { ME_hab_our_westward_enemy ME_hab_spread_our_dynasty }
		provinces_to_highlight = {
			continent = europe
			NOT = {
				owner = {
					dynasty = ROOT
				}
			}
		}
		trigger = {
			calc_true_if = {
				europe = {
					type = all
					owner = {
						dynasty = ROOT
					}
				}
				amount = 210
			}
		}
		effect = {
			disable_annexation_penalty = yes
			add_country_modifier = {
				name = me_hab_diplomatic_hegemony
				duration = -1
			}
		}
	}

	ME_hab_foreign_trade = {
		icon = purely_for_commerce
		position = 13
		required_missions = { ME_hab_the_spanish_throne }
		trigger = {
			1147 = {
				trade_share = {
					country = ROOT
					share = 50
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = me_hab_extending_our_influence
				duration = 18250
			}
		}
	}

	ME_hab_shadowbringer = {
		icon = me_mission_shiny_crown_hre
		position = 14
		required_missions = { }
		provinces_to_highlight = {
			region = italy_region
			NOT = { owned_by = ROOT }
			NOT = { has_global_flag = emperor_trying_to_avert_shadow_kingdom }
			ROOT = {
				NOT = {
					num_of_owned_provinces_with = {
						value = 10
						region = italy_region
					}
				}
			}
		}
		trigger = {
			OR = {
				custom_trigger_tooltip = {
					tooltip = ME_HAB_SHADOWBRINGERS_TRIGGER
					has_global_flag = emperor_trying_to_avert_shadow_kingdom
				}
				num_of_owned_provinces_with = {
					value = 10
					region = italy_region
				}
			}
		}
		effect = {
			if = {
				limit = {
					num_of_owned_provinces_with = {
						value = 10
						region = italy_region
					}
				}
				italy_region = {
					limit = {
						owned_by = ROOT
					}
					add_nationalism = -10
					add_unrest = -2
				}
			}
			else = {
				country_event = { id = ME_Austria_Events.1 }
			}
		}
	}

	ME_hab_reward_and_punishment = {
		icon = up_the_adige
		position = 15
		required_missions = { ME_hab_shadowbringer }
		provinces_to_highlight = {
			OR = {
				area = po_valley_area
				area = lombardy_area
				area = tuscany_area
				area = piedmont_area
				area = liguria_area
				province_id = 105
				province_id = 113
				province_id = 106
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			OR = {
				AND = {
					OR = {
						is_part_of_hre = no
						owner = {
							is_part_of_hre = no
						}
					}
				}
				ROOT = {
					NOT = { has_country_flag = shadow_kingdom_early_success }
				}
			}
		}
		trigger = {
			OR = {
				AND = {
					custom_trigger_tooltip = {
						tooltip = ME_HAB_REINED_IN_ITALY
						has_country_flag = shadow_kingdom_early_success
					}
					custom_trigger_tooltip = {
						tooltip = ME_HAB_NO_PROVINCE_IN_ITALY_IS_OWNED_BY_A_FOREIGNER
						po_valley_area = {
							type = all
							is_part_of_hre = yes
							owner = {
								is_part_of_hre = yes
							}
						}
						lombardy_area = {
							type = all
							is_part_of_hre = yes
							owner = {
								is_part_of_hre = yes
							}
						}
						tuscany_area = {
							type = all
							is_part_of_hre = yes
							owner = {
								is_part_of_hre = yes
							}
						}
						piedmont_area = {
							type = all
							is_part_of_hre = yes
							owner = {
								is_part_of_hre = yes
							}
						}
						liguria_area = {
							type = all
							is_part_of_hre = yes
							owner = {
								is_part_of_hre = yes
							}
						}
						105 = {
							is_part_of_hre = yes
							owner = {
								is_part_of_hre = yes
							}
						}
						113 = {
							is_part_of_hre = yes
							owner = {
								is_part_of_hre = yes
							}
						}
						106 = {
							is_part_of_hre = yes
							owner = {
								is_part_of_hre = yes
							}
						}
					}
				}
				AND = {
					po_valley_area = {
						type = all
						country_or_non_sovereign_subject_holds = ROOT
					}
					lombardy_area = {
						type = all
						country_or_non_sovereign_subject_holds = ROOT
					}
					tuscany_area = {
						type = all
						country_or_non_sovereign_subject_holds = ROOT
					}
					piedmont_area = {
						type = all
						country_or_non_sovereign_subject_holds = ROOT
					}
					liguria_area = {
						type = all
						country_or_non_sovereign_subject_holds = ROOT
					}
					105 = {
						country_or_non_sovereign_subject_holds = ROOT
					}
					113 = {
						country_or_non_sovereign_subject_holds = ROOT
					}
					106 = {
						country_or_non_sovereign_subject_holds = ROOT
					}
				}
			}
		}
		effect = {
			if = {
				limit = {
					has_country_flag = me_hab_shadow_kingdom_peaceful
				}
				every_country = {
					limit = {
						NOT = { tag = ROOT }
						capital_scope = {
							region = italy_region
							is_part_of_hre = yes
						}
					}
					add_country_modifier = {
						name = me_hab_imperial_privilege
						duration = 10950
					}
				}
				add_country_modifier = {
					name = me_hab_averted_shadow_kingdom
					duration = 7300
				}
			}
			else_if = {
				limit = {
					has_country_flag = me_hab_shadow_kingdom_military
				}
				add_country_modifier = {
					name = me_hab_iron_fist_in_italy
					duration = 7300
				}
			}
			else = {
				custom_tooltip = ME_hab_reward_and_punishment_tt
				tooltip = {
					add_province_modifier = {
						name = me_hab_province_privilege
						duration = 7300
					}
				}
				hidden_effect = {
					every_owned_province = {
						limit = {
							region = italy_region
						}
						add_province_modifier = {
							name = me_hab_province_privilege
							duration = 7300
						}
					}
				}
			}
		}
	}

	ME_hab_expand_southwards = {
		icon = develop_the_south
		position = 14
		required_missions = { ME_hab_papal_relations ME_hab_reward_and_punishment ME_hab_reorganize_the_kingdom }
		provinces_to_highlight = {
			OR = {
				area = apulia_area
				area = naples_area
				area = calabria_area
			}
			OR = {
				AND = {
					is_part_of_hre = no
					ROOT = {
						is_emperor = yes
					}
					OR = {
						apulia_area = {
							NOT = { owned_by = ROOT }
						}
						naples_area = {
							NOT = { owned_by = ROOT }
						}
						calabria_area = {
							NOT = { owned_by = ROOT }
						}
					}
				}
				AND = {
					NOT = { owned_by = ROOT }
					OR = {
						ROOT = {
							is_emperor = no
						}
						apulia_area = {
							is_part_of_hre = no
						}
						naples_area = {
							is_part_of_hre = no
						}
						calabria_area = {
							is_part_of_hre = no
						}
					}
				}
			}
			ROOT = {
				NOT = { senior_union_with = NAP }
			}
		}
		trigger = {
			OR = {
				senior_union_with = NAP
				AND = {
					is_emperor = yes
					apulia_area = {
						type = all
						is_part_of_hre = yes
					}
					naples_area = {
						type = all
						is_part_of_hre = yes
					}
					calabria_area = {
						type = all
						is_part_of_hre = yes
					}
				}
				AND = {
					apulia_area = {
						type = all
						owned_by = ROOT
					}
					naples_area = {
						type = all
						owned_by = ROOT
					}
					calabria_area = {
						type = all
						owned_by = ROOT
					}
				}
			}
		}
		effect = {
			if = {
				limit = {
					senior_union_with = NAP
				}
				NAP = {
					country_event = { id = ME_Austria_Events.2 }
				}
			}
			else_if = {
				limit = {
					apulia_area = {
						type = all
						owned_by = ROOT
					}
					naples_area = {
						type = all
						owned_by = ROOT
					}
					calabria_area = {
						type = all
						owned_by = ROOT
					}
				}
				apulia_area = {
					add_nationalism = -10
					add_local_autonomy = -25
				}
				naples_area = {
					add_nationalism = -10
					add_local_autonomy = -25
				}
				calabria_area = {
					add_nationalism = -10
					add_local_autonomy = -25
				}
			}
			else = {
				add_imperial_influence = 5
				add_adm_power = 50
				add_dip_power = 50
				add_mil_power = 50
			}
		}
	}

	ME_hab_expand_bohemian_cities = {
		icon = bohemian_commonwealth
		position = 15
		required_missions = { ME_hab_talks_with_the_hansa ME_hab_inward_perfection }
		provinces_to_highlight = {
			OR = {
				AND = {
					province_id = 266
					NOT = { development = 30 }
				}
				AND = {
					OR = {
						area = bohemia_area
						area = erzgebirge_area
						area = moravia_area
					}
					OR = {
						NOT = { owned_by = ROOT }
						AND = {
							NOT = { development = 17 }
							ROOT = {
								NOT = {
									num_of_owned_provinces_with = {
										value = 5
										OR = {
											area = bohemia_area
											area = erzgebirge_area
											area = moravia_area
										}
										development = 17
									}
								}
							}
						}
					}
				}
			}
		}
		trigger = {
			bohemia_area = {
				type = all
				owned_by = ROOT
			}
			erzgebirge_area = {
				type = all
				owned_by = ROOT
			}
			moravia_area = {
				type = all
				owned_by = ROOT
			}
			num_of_owned_provinces_with = {
				value = 5
				OR = {
					area = bohemia_area
					area = erzgebirge_area
					area = moravia_area
				}
				development = 17
			}
			266 = {
				development = 30
			}
		}
		effect = {
			bohemia_area = {
				limit = {
					development = 15
				}
				add_province_modifier = {
					name = me_hab_foundation_of_new_cities
					duration = 9125
				}
			}
			erzgebirge_area = {
				limit = {
					development = 15
				}
				add_province_modifier = {
					name = me_hab_foundation_of_new_cities
					duration = 9125
				}
			}
			moravia_area = {
				limit = {
					development = 15
				}
				add_province_modifier = {
					name = me_hab_foundation_of_new_cities
					duration = 9125
				}
			}
			2967 = {
				province_event = { id = ME_Austria_Events.3 }
			}
		}
	}

	ME_hab_people_of_the_realm = {
		icon = develop_konigsberg
		position = 19
		required_missions = { ME_hab_early_industralization ME_hab_provinces_of_the_realm }
		provinces_to_highlight = {
			OR = {
				area = bohemia_area
				area = erzgebirge_area
				area = moravia_area
				area = lusatia_area
				area = transdanubia_area
				area = slovakia_area
				area = alfold_area
				area = transylvania_area
				area = southern_transylvania_area
			}
			ROOT = {
				NOT = {
					development_in_provinces = {
						value = 500
						OR = {
							area = bohemia_area
							area = erzgebirge_area
							area = moravia_area
							area = lusatia_area
							area = transdanubia_area
							area = slovakia_area
							area = alfold_area
							area = transylvania_area
							area = southern_transylvania_area
						}
					}
				}
			}
		}
		trigger = {
			development_in_provinces = {
				value = 500
				OR = {
					area = bohemia_area
					area = erzgebirge_area
					area = moravia_area
					area = lusatia_area
					area = transdanubia_area
					area = slovakia_area
					area = alfold_area
					area = transylvania_area
					area = southern_transylvania_area
				}
			}
		}
		effect = {
			country_event = { id = ME_Austria_Events.4 }
		}
	}
}

ME_hab_slot_4 = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		OR = {
			AND = {
				tag = HAB
				has_country_flag = use_missions_expanded_missions_instead_of_paradox
			}
			AND = {
				tag = AUB
				primary_culture = austrian
			}
		}
	}
	has_country_shield = yes

	ME_hab_seize_croatia = {
		icon = take_the_bishoprics
		position = 3
		required_missions = { ME_hab_decline_of_hungary }
		provinces_to_highlight = {
			OR = {
				area = slavonia_area
				area = croatia_area
			}
			OR = {
				NOT = { country_or_non_sovereign_subject_holds = ROOT }
				local_autonomy = 20
			}
			ROOT = {
				NOT = {
					num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
						value = 7
						OR = {
							area = croatia_area
							area = slavonia_area
						}
						NOT = { local_autonomy = 20 }
					}
				}
			}
		}
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 7
				OR = {
					area = croatia_area
					area = slavonia_area
				}
				NOT = { local_autonomy = 20 }
			}
		}
		effect = {
			4752 = {
				hidden_effect = {
					if = {
						limit = {
							country_or_non_sovereign_subject_holds = ROOT
						}
						create_or_add_center_of_trade_level = { level = 1 }
						add_base_production = 2
					}
				}
				custom_tooltip = HAB_if_owned_by_root_or_non_sovereign
				tooltip = {
					create_or_add_center_of_trade_level = { level = 1 }
					add_base_production = 2
				}
			}
			custom_tooltip = " "
			custom_tooltip = HAB_distribute_3_manpower_in_croatia
			hidden_effect = {
				for = {
					amount = 3
					effect = "
						random_province = {
							limit = {
								OR = {
									area = croatia_area
									area = slavonia_area
								}
								country_or_non_sovereign_subject_holds = ROOT
							}
							add_base_manpower = 1
						}
					"
				}
			}
			custom_tooltip = " "
			custom_tooltip = HAB_if_seize_croatia_has_been_completed
			hidden_effect = {
				if = {
					limit = {
						mission_completed = ME_hab_the_kingdom_of_hungary
					}
					ME_give_claims = { area = southern_transylvania_area }
					ME_give_claims = { area = transylvania_area }
				}
			}
		}
	}

	ME_hab_the_castles_of_transylvania = {
		icon = alpine_defenses
		position = 4
		required_missions = { ME_hab_seize_croatia ME_hab_the_kingdom_of_hungary }
		provinces_to_highlight = {
			OR = {
				area = transylvania_area
				area = southern_transylvania_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			transylvania_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			southern_transylvania_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			if = {
				limit = {
					has_dlc = "Leviathan"
				}
				custom_tooltip = HAB_upgrade_bran_castle
				hidden_effect = {
					4128 = {
						if = {
							limit = {
								owner = {
									OR = {
										accepted_culture = carpathian
										primary_culture = carpathian
									}
								}
								OR = {
									has_great_project = {
										type = bran_castle
										tier = 1
									}
									has_great_project = {
										type = bran_castle
										tier = 2
									}
								}
							}
							add_great_project_tier = { type = bran_castle tier = 1 }
						}
					}
				}
			}
			custom_tooltip = " "
			custom_tooltip = HAB_every_fort_in_carpathia
			tooltip = {
				add_province_modifier = {
					name = me_hab_unshakable_fortresses
					duration = -1
				}
			}
			hidden_effect = {
				carpathia_region = {
					limit = {
						country_or_non_sovereign_subject_holds = ROOT
						fort_level = 2
					}
					add_province_modifier = {
						name = me_hab_unshakable_fortresses
						duration = -1
					}
				}
			}
		}
	}

	ME_hab_the_dracula_at_romania = {
		icon = despot_stefans_legacy
		position = 5
		required_missions = { ME_hab_the_castles_of_transylvania }
		provinces_to_highlight = {
			OR = {
				area = wallachia_area
				area = moldavia_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			wallachia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			moldavia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			hidden_effect = {
				if = {
					limit = {
						transylvania_area = {
							type = all
							country_or_non_sovereign_subject_holds = ROOT
						}
						southern_transylvania_area = {
							type = all
							country_or_non_sovereign_subject_holds = ROOT
						}
					}
					country_event = { id = ME_Austria_Events.5 }
				}
			}
			custom_tooltip = HAB_if_we_also_own_transylvania
			tooltip = {
				country_event = { id = ME_Austria_Events.5 }
			}
			custom_tooltip = " "
			add_country_modifier = {
				name = me_hab_order_of_the_dragon
				duration = 5475
			}
		}
	}

	ME_hab_footfalls_of_an_empire = {
		icon = eastern_catholicization
		position = 6
		required_missions = { ME_hab_the_dracula_at_romania ME_hab_the_polish_realm }
		provinces_to_highlight = {
			area = red_ruthenia_area
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			total_development = 500
			red_ruthenia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			red_ruthenia_area = {
				limit = {
					country_or_non_sovereign_subject_holds = ROOT
				}
				add_province_modifier = {
					name = me_hab_german_settlers
					duration = 18250
				}
			}
		}
	}

	ME_hab_the_austrian_empire = {
		icon = powerhouse_of_the_north
		position = 7
		required_missions = { ME_hab_footfalls_of_an_empire }
		provinces_to_highlight = {
			OR = {
				AND = {
					is_capital_of = ROOT
					NOT = { development = 30 }
				}
				AND = {
					owned_by = ROOT
					NOT = { culture = ROOT }
					ROOT = {
						NOT = { num_accepted_cultures = 5 }
						NOT = {
							num_of_owned_provinces_with = {
								culture = ROOT
								value = 30
							}
						}
					}
				}
			}
		}
		trigger = {
			total_development = 1000
			capital_scope = {
				development = 30
			}
			army_size = 150
			OR = {
				num_accepted_cultures = 5
				num_of_owned_provinces_with = {
					culture = ROOT
					value = 30
				}
			}
		}
		effect = {
			override_country_name = AUSTRIAN_EMPIRE
			if = {
				limit = {
					NOT = { government_rank = 3 }
					government = monarchy
				}
				set_government_rank = 3
			}
			add_country_modifier = {
				name = me_hab_aeiou_modifier
				duration = -1
			}
		}
	}

	ME_hab_the_false_empire = {
		icon = take_constantinople
		position = 8
		required_missions = { ME_hab_crusade }
		provinces_to_highlight = {
			province_id = 151
			OR = {
				NOT = { country_or_non_sovereign_subject_holds = ROOT }
				NOT = { religion = ROOT }
			}
		}
		trigger = {
			151 = {
				country_or_non_sovereign_subject_holds = ROOT
				religion = ROOT
			}
			OR = {
				NOT = { exists = BYZ }
				overlord_of = BYZ
			}
		}
		effect = {
			country_event = { id = ME_Austria_Events.6 }
		}
	}

	ME_hab_the_cultures_of_the_realm = {
		icon = multicultural_empire
		position = 9
		required_missions = { }
		provinces_to_highlight = {
			owned_by = ROOT
			NOT = { culture_group = ROOT }
			has_owner_accepted_culture = yes
			OR = {
				local_autonomy = 10
				unrest = 1
				nationalism = 1
			}
			ROOT = {
				NOT = {
					num_of_owned_provinces_with = {
						has_owner_accepted_culture = yes
						NOT = { culture_group = ROOT }
						NOT = { local_autonomy = 10 }
						NOT = { unrest = 1 }
						NOT = { nationalism = 1 }
						value = 15
					}
				}
			}
		}
		trigger = {
			num_accepted_cultures = 4
			num_of_owned_provinces_with = {
				has_owner_accepted_culture = yes
				NOT = { culture_group = ROOT }
				NOT = { local_autonomy = 10 }
				NOT = { unrest = 1 }
				NOT = { nationalism = 1 }
				value = 15
			}
		}
		effect = {
			country_event = { id = ME_Austria_Events.7 }
		}
	}

	ME_hab_the_iberian_peninsula = {
		icon = mission_restore_faith_in_the_throne
		position = 10
		required_missions = { }
		provinces_to_highlight = {
			region = iberia_region
			NOT = { owned_by = ROOT }
			ROOT = {
				NOT = {
					OR = {
						AND = {
							exists = SPA
							SPA = {
								dynasty = ROOT
							}
							NOT = { is_rival = SPA }
							NOT = { is_enemy = SPA }
							alliance_with = SPA
							marriage_with = SPA
						}
						AND = {
							NOT = { exists = SPA }
							exists = CAS
							CAS = {
								dynasty = ROOT
							}
							NOT = { is_rival = CAS }
							NOT = { is_enemy = CAS }
							alliance_with = CAS
							marriage_with = CAS
						}
						num_of_owned_provinces_with = {
							value = 20
							region = iberia_region
						}
					}
				}
			}
		}
		trigger = {
			#TODO: Idk how to even 'fix' this
			OR = {
				AND = {
					exists = SPA
					SPA = {
						dynasty = ROOT
					}
					NOT = { is_rival = SPA }
					NOT = { is_enemy = SPA }
					alliance_with = SPA
					marriage_with = SPA
				}
				AND = {
					NOT = { exists = SPA }
					exists = CAS
					CAS = {
						dynasty = ROOT
					}
					NOT = { is_rival = CAS }
					NOT = { is_enemy = CAS }
					alliance_with = CAS
					marriage_with = CAS
				}
				num_of_owned_provinces_with = {
					value = 20
					region = iberia_region
				}
			}
		}
		effect = {
			if = {
				limit = {
					num_of_owned_provinces_with = {
						value = 20
						region = iberia_region
					}
				}
				ME_give_claims = { region = iberia_region }
			}
			else = {
				country_event = {
					id = ME_Austria_Events.24
				}
			}
		}
	}

	ME_hab_the_spanish_throne = {
		icon = mission_intervene_in_castile
		position = 12
		required_missions = { ME_hab_the_iberian_peninsula }
		provinces_to_highlight = {
			region = iberia_region
			NOT = { owned_by = ROOT }
			ROOT = {
				NOT = {
					num_of_owned_provinces_with = {
						value = 40
						region = iberia_region
					}
				}
			}
		}
		trigger = {
			OR = {
				num_of_owned_provinces_with = {
					value = 40
					region = iberia_region
				}
				CAS = {
					junior_union_with = ROOT
					NOT = {
						liberty_desire = 20
					}
				}
				SPA = {
					junior_union_with = ROOT
					NOT = {
						liberty_desire = 20
					}
				}
			}
		}
		effect = {
			if = {
				limit = {
					overlord_of = SPA
				}
				SPA = {
					add_country_modifier = {
						name = me_hab_habsburg_domination
						duration = 18250
					}
				}
			}
			else_if = {
				limit = {
					overlord_of = CAS
				}
				CAS = {
					add_country_modifier = {
						name = me_hab_habsburg_domination
						duration = 18250
					}
				}
			}
			add_country_modifier = {
				name = me_hab_domination_of_iberia
				duration = -1
			}
		}
	}
}

ME_hab_slot_4_catholic = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		OR = {
			AND = {
				tag = HAB
				has_country_flag = use_missions_expanded_missions_instead_of_paradox
			}
			AND = {
				tag = AUB
				primary_culture = austrian
			}
		}
		NOT = {
			has_country_flag = me_hab_protestant_austria
		}
	}
	has_country_shield = yes

	ME_hab_rally_the_men = {
		icon = mission_guilds_of_barcelona
		position = 13
		required_missions = { ME_hab_loyalty_to_the_pope }
		trigger = {
			OR = {
				calc_true_if = {
					all_country = {
						OR = {
							religion = protestant
							religion = reformed
							religion = anglican
						}
						ROOT = {
							has_won_war_against = { who = PREV }
						}
					}
					amount = 3
				}
				all_country = {
					OR = {
						is_subject = yes
						AND = {
							NOT = { religion = protestant }
							NOT = { religion = reformed }
						}
					}
				}
			}
		}
		effect = {
			set_country_flag = me_hab_reformation_cb
			custom_tooltip = me_hab_unlock_order_in_empire_cb
			add_yearly_manpower = 1
		}
	}
}

ME_hab_slot_4_protestant = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		OR = {
			AND = {
				tag = HAB
				has_country_flag = use_missions_expanded_missions_instead_of_paradox
			}
			AND = {
				tag = AUB
				primary_culture = austrian
			}
		}
		has_country_flag = me_hab_protestant_austria
	}
	has_country_shield = yes

	ME_hab_spread_the_religion = {
		icon = mission_guilds_of_barcelona
		position = 13
		required_missions = { ME_hab_fall_from_grace }
		trigger = {
			custom_trigger_tooltip = {
				tooltip = obj_convert_20_provinces_tooltip
				check_variable = { which = num_converted_religion value = 20 }
			}
		}
		effect = {
			add_ruler_modifier = {
				name = me_hab_forge_ahead
				duration = -1
			}
		}
	}
}

ME_hab_slot_4_1 = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		OR = {
			AND = {
				tag = HAB
				has_country_flag = use_missions_expanded_missions_instead_of_paradox
			}
			AND = {
				tag = AUB
				primary_culture = austrian
			}
		}
	}
	has_country_shield = yes

	ME_hab_reorganize_the_kingdom = {
		icon = mission_guilds_of_barcelona
		position = 15
		required_missions = { ME_hab_shadowbringer }
		provinces_to_highlight = {
			OR = {
				area = venetia_area
				area = po_valley_area
				area = lombardy_area
				area = emilia_romagna_area
				area = tuscany_area
				area = liguria_area
				area = piedmont_area
				area = lazio_area
				province_id = 2977
				province_id = 119
			}
		}
		trigger = {
			OR = {
				AND = {
					is_emperor = yes
					#this trigger requires all provinces in the highlighting to fulfill the triggers, when editing the trigger or highlighting change the other one too!
					custom_trigger_tooltip = {
						tooltip = HAB_all_highlighted_provs_are_hre
						HAB_reorganize_the_kingdom_group_trigger = {
							trigger = " is_part_of_hre = yes "
						}
					}
				}
				custom_trigger_tooltip = {
					tooltip = HAB_all_highlighted_provs_are_country_or_non_sov_owned
					HAB_reorganize_the_kingdom_group_trigger = {
						trigger = "
							country_or_non_sovereign_subject_holds = ROOT
						"
					}
				}
			}
		}
		effect = {
			country_event = { id = ME_Austria_Events.8 }
		}
	}

	ME_hab_inward_perfection = {
		icon = dominant_economy
		position = 16
		required_missions = { }
		provinces_to_highlight = {
			province_id = 73
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { base_production = 8 }
			}
		}
		trigger = {
			mission_completed = ME_hab_unite_the_realm
			num_of_owned_provinces_with = {
				value = 4
				num_of_times_improved_by_owner = 5
			}
			73 = {
				owned_by = ROOT
				base_production = 8
			}
		}
		effect = {
			hidden_effect = {
				if = {
					limit = {
						owns = 73
						73 = {
							NOT = { has_province_modifier = hab_schwaz_mine }
						}
					}
					country_event = { id = ME_Austria_Events.21 }
				}
			}
			custom_tooltip = me_hab_if_is_between_year_1460_and_1480
			tooltip = {
				country_event = { id = ME_Austria_Events.21 }
			}
			73 = {
				add_province_modifier = {
					name = me_hab_the_austrian_economy
					duration = -1
				}
			}
		}
	}

	ME_hab_provinces_of_the_realm = {
		icon = the_ostend_company
		position = 18
		required_missions = { ME_hab_expand_bohemian_cities ME_hab_strengthen_our_capital }
		provinces_to_highlight = {
			OR = {
				province_id = 266
				province_id = 153
				province_id = 131
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { development = 40 }
			}
		}
		trigger = {
			266 = {
				owned_by = ROOT
				development = 40
			}
			153 = {
				owned_by = ROOT
				development = 40
			}
			131 = {
				owned_by = ROOT
				development = 40
			}
		}
		effect = {
			country_event = { id = ME_Austria_Events.9 }
		}
	}
}

ME_hab_slot_5 = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		OR = {
			AND = {
				tag = HAB
				has_country_flag = use_missions_expanded_missions_instead_of_paradox
			}
			AND = {
				tag = AUB
				primary_culture = austrian
			}
		}
	}
	has_country_shield = yes

	ME_hab_decline_of_hungary = {
		icon = the_hungarian_question
		position = 2
		required_missions = { ME_hab_aeiou }
		trigger = {
			total_own_and_non_tributary_subject_development = HUN
			OR = {
				custom_trigger_tooltip = {
					tooltip = ME_HAB_LADISLAUS_RULER
					has_country_flag = hab_ladislaus_postumus_king
				}
				mission_completed = ME_hab_unite_the_realm
			}
			OR = {
				total_own_and_non_tributary_subject_development = 250
				alliance_with = HUN
			}
		}
		effect = {
			ME_give_claims = { area = croatia_area }
			ME_give_claims = { area = slavonia_area }
			custom_tooltip = HAB_if_completed_by_alliance
			tooltip = {
				HUN = {
					country_event = { id = ME_Austria_Events.10 }
				}
				custom_tooltip = HAB_if_hungary_declines
				custom_tooltip = " "
			}
			custom_tooltip = HAB_if_completed_by_valid_personal_union
			tooltip = {
				add_casus_belli = {
					target = HUN
					type = cb_restore_personal_union
					months = 300
				}
				custom_tooltip = ME_cb_25
				custom_tooltip = " "
			}
			custom_tooltip = HAB_if_completed_by_neither_of_above
			tooltip = {
				ME_give_claims = { area = slovakia_area }
				ME_give_claims = { area = transdanubia_area }
				ME_give_claims = { area = alfold_area }
			}
			hidden_effect = {
				if = {
					limit = {
						alliance_with = HUN
					}
					HUN = {
						country_event = { id = ME_Austria_Events.10 }
					}
				} #TODO Tooltip, of course
				else_if = {
					limit = {
						exists = HUN
						HUN = {
							valid_for_personal_unions_trigger = yes
						}
						valid_for_personal_unions_trigger = yes
					}
					add_casus_belli = {
						target = HUN
						type = cb_restore_personal_union
						months = 300
					}
					custom_tooltip = ME_cb_25
				}
				else = {
					ME_give_claims = { area = slovakia_area }
					ME_give_claims = { area = transdanubia_area }
					ME_give_claims = { area = alfold_area }
				}
			}
		}
	}

	ME_hab_the_kingdom_of_hungary = {
		icon = a_strong_government
		position = 3
		required_missions = { ME_hab_decline_of_hungary }
		provinces_to_highlight = {
			OR = {
				area = slovakia_area
				area = transdanubia_area
				area = alfold_area
			}
			OR = {
				NOT = { owned_by = ROOT }
				local_autonomy = 20
			}
		}
		trigger = {
			OR = {
				HUN = {
					junior_union_with = ROOT
				}
				num_of_owned_provinces_with = {
					value = 12
					OR = {
						area = slovakia_area
						area = transdanubia_area
						area = alfold_area
					}
					NOT = { local_autonomy = 20 }
				}
			}
		}
		effect = {
			custom_tooltip = HAB_if_seize_croatia_has_been_completed
			hidden_effect = {
				if = {
					limit = {
						mission_completed = ME_hab_seize_croatia
					}
					ME_give_claims = { area = southern_transylvania_area }
					ME_give_claims = { area = transylvania_area }
				}
			}
			custom_tooltip = " "
			custom_tooltip = HAB_if_completed_by_pu_with_hun
			tooltip = {
				country_event = { id = ME_Austria_Events.11 }
				custom_tooltip = " "
			}
			custom_tooltip = HAB_if_completed_province_ownership
			tooltip = {
				add_country_modifier = {
					name = royal_hungary
					duration = 5475
				}
			}
			hidden_effect = {
				if = {
					limit = {
						HUN = {
							junior_union_with = ROOT
						}
					}
					country_event = { id = ME_Austria_Events.11 }
				}
				else = {
					add_country_modifier = {
						name = royal_hungary
						duration = 5475
					}
				}
			}
		}
	}

	ME_hab_avenge_christedom = {
		icon = revenge_for_nicopolis
		position = 5
		required_missions = { ME_hab_the_castles_of_transylvania }
		provinces_to_highlight = {
			region = carpathia_region
			country_or_non_sovereign_subject_holds = TUR
		}
		trigger = {
			if = {
				limit = {
					TUR = {
						exists = yes
					}
				}
				army_size = TUR
				carpathia_region = {
					type = all
					NOT = { country_or_non_sovereign_subject_holds = TUR }
				}
			}
			else = {
				custom_trigger_tooltip = {
					tooltip = ME_HAB_STRONGEST_ARMY_IN_BALKANS
					NOT = {
						any_country = {
							capital_scope = { region = balkan_region }
							army_size = ROOT
						}
					}
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = me_hab_under_a_new_banner
				duration = 9125
			}
			if = {
				limit = {
					religion = catholic
					exists = PAP
				}
				PAP = {
					country_event = { id = ME_Austria_Events.12 }
				}
			}
		}
	}

	ME_hab_crusade = {
		icon = the_holy_league
		position = 7
		required_missions = { ME_hab_avenge_christedom }
		provinces_to_highlight = {
			OR = {
				area = bulgaria_area
				area = silistria_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			NOT = { exists = TUR }
		}
		trigger = {
			if = {
				limit = {
					exists = TUR
				}
				offensive_war_with = TUR
				war_score_against = {
					who = TUR
					value = 50
				}
			}
			else = {
				bulgaria_area = {
					type = all
					country_or_non_sovereign_subject_holds = ROOT
				}
				silistria_area = {
					type = all
					country_or_non_sovereign_subject_holds = ROOT
				}
			}
		}
		effect = {
			if = {
				limit = {
					exists = TUR
				}
				custom_tooltip = HAB_gain_claim_on_turkish_balkans
				hidden_effect = {
					balkan_region = {
						limit = {
							NOT = { is_permanent_claim = ROOT }
							NOT = { is_core = ROOT }
							owned_by = TUR
						}
						add_permanent_claim = ROOT
					}
				}
			}
			else = {
				ME_give_claims = { area = thrace_area }
				ME_give_claims = { area = macedonia_area }
			}
			add_yearly_manpower = 1
		}
	}

	ME_hab_endwalker = {
		icon = defend_the_city
		position = 8
		required_missions = { ME_hab_crusade }
		provinces_to_highlight = {
			region = balkan_region
			OR = {
				country_or_non_sovereign_subject_holds = TUR
				religion_group = muslim
				AND = {
					NOT = { owned_by = ROOT }
					ROOT = {
						NOT = {
							num_of_owned_provinces_with = {
								value = 30
								region = balkan_region
							}
						}
					}
				}
			}
		}
		trigger = {
			balkan_region = {
				type = all
				NOT = { country_or_non_sovereign_subject_holds = TUR }
				NOT = { religion_group = muslim }
			}
			num_of_owned_provinces_with = {
				value = 30
				region = balkan_region
			}
		}
		effect = {
			custom_tooltip = every_country_in_europe
			tooltip = {
				country_event = { id = ME_Austria_Events.22 }
			}
			hidden_effect = {
				balkan_region = {
					remove_core = TUR
				}
				every_country = {
					limit = {
						capital_scope = {
							region = europe
						}
					}
					country_event = { id = ME_Austria_Events.22 }
				}
			}
		}
	}

	ME_hab_habsburg_magnificence = {
		icon = imperial_ascendancy
		position = 10
		required_missions = { ME_hab_the_cultures_of_the_realm }
		trigger = {
			has_institution = enlightenment
			prestige = 50
			if = {
				limit = {
					OR = {
						has_dlc = "Emperor"
						has_dlc = "Rights of Man"
					}
				}
				is_great_power = yes
				NOT = { great_power_rank = 4 }
			} #TODO: scripted trigger this
			has_mil_advisor_3 = yes
			has_adm_advisor_3 = yes
			has_dip_advisor_3 = yes
		}
		effect = {
			add_country_modifier = {
				name = me_hab_our_seat_in_the_world
				duration = -1
			}
		}
	}

	ME_hab_rising_unrest = {
		icon = catholic_confraternity
		position = 11
		required_missions = {  }
		trigger = {
			custom_trigger_tooltip = {
				tooltip = me_hab_reformation_started
				has_global_flag = reformation_started
			}
			OR = {
				religion = protestant
				religion = reformed
				has_country_modifier = counter_reformation
			}
		}
		effect = {
			custom_tooltip = me_hab_get_new_missions
			if = {
				limit = {
					NOT = { religion = catholic }
				}
				set_country_flag = me_hab_protestant_austria
			}
			swap_non_generic_missions = yes
			add_prestige_or_monarch_power = { amount = 20 }
		}
	}
}

ME_hab_slot_5_catholic = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		OR = {
			AND = {
				tag = HAB
				has_country_flag = use_missions_expanded_missions_instead_of_paradox
			}
			AND = {
				tag = AUB
				primary_culture = austrian
			}
		}
		NOT = {
			has_country_flag = me_hab_protestant_austria
		}
	}
	has_country_shield = yes

	ME_hab_loyalty_to_the_pope = {
		icon = sway_the_pope
		position = 12
		required_missions = { ME_hab_rising_unrest }
		trigger = {
			if = {
				limit = {
					exists = PAP
				}
				PAP = {
					has_opinion = {
						who = ROOT
						value = 10
					}
				}
			}
			else = {
				is_papal_controller = yes
			}
			if = {
				limit = {
					has_estate = estate_church
				}
				estate_loyalty = {
					estate = estate_church
					loyalty = 60
				}
			}
			else = {
				papal_influence = 50
			}
		}
		effect = {
			add_country_modifier = {
				name = me_hab_papal_approval
				duration = 7300
			}
		}
	}

	ME_hab_cleanse_the_unbelievers = {
		icon = mission_religious
		position = 13
		required_missions = { ME_hab_loyalty_to_the_pope }
		trigger = {
			custom_trigger_tooltip = {
				tooltip = obj_convert_20_provinces_tooltip
				check_variable = { which = num_converted_religion value = 20 }
			}
			religious_unity = 1
		}
		effect = {
			add_ruler_modifier = {
				name = me_hab_bulward_against_the_reformation
				duration = -1
			}
		}
	}

	ME_hab_heavensward = {
		icon = mission_european_church
		position = 14
		required_missions = { ME_hab_cleanse_the_unbelievers ME_hab_rally_the_men }
		trigger = {
			OR = {
				temple = 20
				cathedral = 20
			}
			OR = {
				full_idea_group = religious_ideas
				has_estate_privilege = estate_church_one_faith_one_culture
			}
		}
		effect = {
			add_papal_influence = 20
			if = {
				limit = {
					has_dlc = "Emperor"
				}
				add_curia_treasury = 300
			}
		}
	}
}

ME_hab_slot_5_catholic_dlc = {
	slot = 5
	generic = no
	ai = yes
	potential_on_load = {
		has_dlc = "Art of War"
	}
	potential = {
		has_dlc = "Art of War"
		OR = {
			AND = {
				tag = HAB
				has_country_flag = use_missions_expanded_missions_instead_of_paradox
			}
			AND = {
				tag = AUB
				primary_culture = austrian
			}
		}
		NOT = {
			has_country_flag = me_hab_protestant_austria
		}
	}
	has_country_shield = yes

	ME_hab_stormblood_catholic = {
		icon = me_mission_army
		position = 15
		required_missions = { ME_hab_heavensward }
		trigger = {
			OR = {
				AND = {
					is_in_league_war = yes
					war_score = 50
				}
				AND = {
					hre_religion_locked = yes
					hre_religion = ROOT
				}
				AND = {
					hre_religion_treaty = yes
					OR = {
						is_emperor = yes
						emperor = {
							religion = ROOT
						}
					}
				}
				custom_trigger_tooltip = {
					tooltip = obj_religious_league_war_on_winning_side_tooltip
					has_country_flag = religious_league_war_on_winning_side
				}
			}
		}
		effect = {
			if = {
				limit = {
					is_in_league_war = yes
					war_score = 50
				}
				add_country_modifier = {
					name = me_hab_born_from_blood
					duration = 3650
				}
			}
			else_if = {
				limit = {
					OR = {
						AND = {
							hre_religion_locked = yes
							hre_religion = ROOT
						}
						AND = {
							hre_religion_treaty = yes
							OR = {
								is_emperor = yes
								emperor = {
									religion = ROOT
								}
							}
						}
					}
				}
				add_ruler_modifier = {
					name = me_hab_end_of_a_conflict
					duration = -1
				}
				if = {
					limit = {
						is_emperor = yes
					}
					add_country_modifier = {
						name = me_hab_peace_in_the_empire
						duration = -1
					}
				}
			}
			else = {
				add_country_modifier = {
					name = me_hab_explot_the_german_discord
					duration = 7300
				}
			}
		}
	}
}

ME_hab_slot_5_protestant = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		OR = {
			AND = {
				tag = HAB
				has_country_flag = use_missions_expanded_missions_instead_of_paradox
			}
			AND = {
				tag = AUB
				primary_culture = austrian
			}
		}
		has_country_flag = me_hab_protestant_austria
	}
	has_country_shield = yes

	ME_hab_fall_from_grace = {
		icon = sway_the_pope
		position = 12
		required_missions = { ME_hab_rising_unrest }
		trigger = {
			religious_unity = 0.75
			calc_true_if = {
				all_country = {
					has_opinion = {
						who = ROOT
						value = 70
					}
				}
				amount = 2
			}
		}
		effect = {
			add_country_modifier = {
				name = me_hab_regain_our_seat
				duration = -1
			}
			custom_tooltip = me_hab_modifier_will_go_away
		}
	}

	ME_hab_we_fall = {
		icon = mission_religious
		position = 13
		required_missions = { ME_hab_fall_from_grace }
		provinces_to_highlight = {
			province_id = 118
			NOT = { controlled_by = ROOT }
			ROOT = {
				NOT = {
					OR = {
						calc_true_if = {
							all_elector = {
								religion = ROOT
								reverse_has_opinion = {
									who = ROOT
									value = 100
								}
							}
							amount = 1
						}
						any_elector = {
							religion = catholic
							capital_scope = {
								controlled_by = ROOT
							}
						}
						118 = {
							owner = {
								OR = {
									has_opinion_modifier = {
										who = ROOT
										modifier = insulted
									}
									has_opinion_modifier = {
										who = ROOT
										modifier = scornfully_insulted
									}
								}
							}
						}
						118 = {
							controlled_by = ROOT
						}
					}
				}
			}
		}
		trigger = {
			OR = {
				calc_true_if = {
					all_elector = {
						religion = ROOT
						reverse_has_opinion = {
							who = ROOT
							value = 100
						}
					}
					amount = 1
				}
				any_elector = {
					religion = catholic
					capital_scope = {
						controlled_by = ROOT
					}
				}
				118 = {
					owner = {
						OR = {
							has_opinion_modifier = {
								who = ROOT
								modifier = insulted
							}
							has_opinion_modifier = {
								who = ROOT
								modifier = scornfully_insulted
							}
						}
					}
				}
				118 = {
					controlled_by = ROOT
				}
			}
		}
		effect = {
			add_years_of_income = 0.8
			every_known_country = {
				limit = {
					NOT = { tag = ROOT }
					religion = ROOT
				}
				add_opinion = {
					who = ROOT
					modifier = me_hab_champion_of_reformation
				}
			}
		}
	}

	ME_hab_steps_of_faith = {
		icon = mission_european_church
		position = 14
		required_missions = { ME_hab_we_fall ME_hab_spread_the_religion }
		provinces_to_highlight = {
			OR = {
				region = north_german_region
				region = south_german_region
			}
			NOT = { religion = ROOT }
			ROOT = {
				NOT = {
					calc_true_if = {
						all_country = {
							capital_scope = {
								continent = europe
							}
							religion = ROOT
							total_development = 200
						}
						amount = 5
					}
				}
			}
		}
		trigger = {
			OR = {
				calc_true_if = {
					all_country = {
						capital_scope = {
							continent = europe
						}
						religion = ROOT
						total_development = 200
					}
					amount = 5
				}
				AND = {
					north_german_region = {
						type = all
						religion = ROOT
					}
					south_german_region = {
						type = all
						religion = ROOT
					}
				}
			}
		}
		effect = {
			every_country = {
				limit = {
					NOT = { tag = ROOT }
					NOT = { religion = ROOT }
					religion_group = christian
					capital_scope = {
						OR = {
							region = north_german_region
							region = south_german_region
						}
					}
				}
				country_event = { id = ME_Austria_Events.30 }
			}
		}
	}
}

ME_hab_slot_5_protestant_dlc = {
	slot = 5
	generic = no
	ai = yes
	potential_on_load = {
		has_dlc = "Art of War"
	}
	potential = {
		has_dlc = "Art of War"
		OR = {
			AND = {
				tag = HAB
				has_country_flag = use_missions_expanded_missions_instead_of_paradox
			}
			AND = {
				tag = AUB
				primary_culture = austrian
			}
		}
		has_country_flag = me_hab_protestant_austria
	}
	has_country_shield = yes

	ME_hab_stormblood_protestant = {
		icon = me_mission_army
		position = 15
		required_missions = { ME_hab_steps_of_faith }
		trigger = {
			OR = {
				AND = {
					is_in_league_war = yes
					war_score = 50
				}
				AND = {
					hre_religion_locked = yes
					hre_religion = ROOT
				}
				AND = {
					hre_religion_treaty = yes
					OR = {
						is_emperor = yes
						emperor = {
							religion = ROOT
						}
					}
				}
				custom_trigger_tooltip = {
					tooltip = obj_religious_league_war_on_winning_side_tooltip
					has_country_flag = religious_league_war_on_winning_side
				}
			}
		}
		effect = {
			if = {
				limit = {
					is_in_league_war = yes
					war_score = 50
				}
				add_country_modifier = {
					name = me_hab_born_from_blood
					duration = 3650
				}
			}
			else_if = {
				limit = {
					OR = {
						AND = {
							hre_religion_locked = yes
							hre_religion = ROOT
						}
						AND = {
							hre_religion_treaty = yes
							OR = {
								is_emperor = yes
								emperor = {
									religion = ROOT
								}
							}
						}
					}
				}
				add_ruler_modifier = {
					name = me_hab_end_of_a_conflict
					duration = -1
				}
				if = {
					limit = {
						is_emperor = yes
					}
					add_country_modifier = {
						name = me_hab_peace_in_the_empire
						duration = -1
					}
				}
			}
			else = {
				add_country_modifier = {
					name = me_hab_explot_the_german_discord
					duration = 7300
				}
			}
		}
	}
}

ME_hab_slot_5_1 = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		OR = {
			AND = {
				tag = HAB
				has_country_flag = use_missions_expanded_missions_instead_of_paradox
			}
			AND = {
				tag = AUB
				primary_culture = austrian
			}
		}
	}
	has_country_shield = yes

	ME_hab_strengthen_our_capital = {
		icon = the_viennese_waltz
		position = 17
		required_missions = { ME_hab_inward_perfection }
		provinces_to_highlight = {
			province_id = 134
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { development = 30 }
				NOT = { num_of_buildings_in_province = 4 }
				north_german_region = {
                    higher_development_than = 134
                }
				south_german_region = {
					NOT = { province_id = 134 }
                    higher_development_than = 134
                }
			}
		}
		trigger = {
			134 = {
				num_of_buildings_in_province = 4
				development = 30
				owned_by = ROOT
			}
			custom_trigger_tooltip = {
                tooltip = ME_HAB_VIENNA_BEST_GERMAN_PROVINCE
                north_german_region = {
                    type = all
					NOT = { higher_development_than = 134 }
                }
				south_german_region = {
                    type = all
                    OR = {
						province_id = 134
                        NOT = { higher_development_than = 134 }
                    }
                }
            }
		}
		effect = {
			if = {
				limit = {
					has_dlc = "Leviathan"
					is_expanded_mod_active = { mod = great_monuments }
					134 = {
						NOT = {
							has_great_project = {
								type = gme_schonbrunn
								tier = 3
							}
						}
					}
				}
				134 = {
					add_great_project_tier = {
						type = gme_schonbrunn
						tier = 1
					}
				}
			}
			add_estate_loyalty = {
				estate = estate_nobles
				loyalty = 10
			}
			add_estate_loyalty = {
				estate = estate_church
				loyalty = 10
			}
			add_estate_loyalty = {
				estate = estate_burghers
				loyalty = 10
			}
			if = {
				limit = {
					has_regency = no
					NOT = { DIP = 6 }
				}
				change_dip = 1
			}
			else = {
				add_dip_power = 100
			}
			if = {
				limit = {
					has_heir = yes
					NOT = { heir_dip = 6 }
				}
				change_heir_dip = 1
			}
			else = {
				add_dip_power = 100
			}
		}
	}
}
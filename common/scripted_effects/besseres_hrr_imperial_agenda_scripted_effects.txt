set_up_random_available_imperial_agenda = {
	random_list = {
		1 = {
			trigger = {
				NOT = { has_imperial_agenda_available = { agenda = add_province_x_to_hre } }
				imperial_agenda_valid_trigger = { agenda = add_province_x_to_hre }
			}
			set_up_imperial_agenda = { agenda = add_province_x_to_hre }
		}
		1 = {
			trigger = {
				NOT = { has_imperial_agenda_available = { agenda = improve_x_elector_opinion } }
				imperial_agenda_valid_trigger = { agenda = improve_x_elector_opinion }
			}
			set_up_imperial_agenda = { agenda = improve_x_elector_opinion }
		}
		1 = {
			trigger = {
				NOT = { has_imperial_agenda_available = { agenda = increase_hre_size } }
				imperial_agenda_valid_trigger = { agenda = increase_hre_size }
			}
			set_up_imperial_agenda = { agenda = increase_hre_size }
		}
		1 = {
			trigger = {
				NOT = { has_imperial_agenda_available = { agenda = add_5_provs_to_hre } }
				imperial_agenda_valid_trigger = { agenda = add_5_provs_to_hre }
			}
			set_up_imperial_agenda = { agenda = add_5_provs_to_hre }
		}
		1 = {
			trigger = {
				NOT = { has_imperial_agenda_available = { agenda = have_7_electors } }
				imperial_agenda_valid_trigger = { agenda = have_7_electors }
			}
			set_up_imperial_agenda = { agenda = have_7_electors }
		}
		1 = {
			trigger = {
				NOT = { has_imperial_agenda_available = { agenda = prove_imperial_legitimacy } }
				imperial_agenda_valid_trigger = { agenda = prove_imperial_legitimacy }
			}
			set_up_imperial_agenda = { agenda = prove_imperial_legitimacy }
		}
		1 = {
			trigger = {
				NOT = { has_imperial_agenda_available = { agenda = convert_imperial_province } }
				imperial_agenda_valid_trigger = { agenda = convert_imperial_province }
			}
			set_up_imperial_agenda = { agenda = convert_imperial_province }
		}
		1 = {
			trigger = {
				NOT = { has_imperial_agenda_available = { agenda = convert_imperial_country } }
				imperial_agenda_valid_trigger = { agenda = convert_imperial_country }
			}
			set_up_imperial_agenda = { agenda = convert_imperial_country }
		}
		1 = {
			trigger = {
				NOT = { has_imperial_agenda_available = { agenda = pass_imperial_reform } }
				imperial_agenda_valid_trigger = { agenda = pass_imperial_reform }
			}
			set_up_imperial_agenda = { agenda = pass_imperial_reform }
		}
		1 = {
			trigger = {
				NOT = { has_imperial_agenda_available = { agenda = restore_imperial_peace } }
				imperial_agenda_valid_trigger = { agenda = restore_imperial_peace }
			}
			set_up_imperial_agenda = { agenda = restore_imperial_peace }
		}
		1 = {
			trigger = {
				NOT = { has_imperial_agenda_available = { agenda = be_elected_by_5_electors } }
				imperial_agenda_valid_trigger = { agenda = be_elected_by_5_electors }
			}
			set_up_imperial_agenda = { agenda = be_elected_by_5_electors }
		}
		1 = {
			trigger = {
				NOT = { has_imperial_agenda_available = { agenda = get_x_elector_vote } }
				imperial_agenda_valid_trigger = { agenda = get_x_elector_vote }
			}
			set_up_imperial_agenda = { agenda = get_x_elector_vote }
		}
		2 = {
			trigger = {
				NOT = { has_imperial_agenda_available = { agenda = destroy_hostile_reform_center } }
				imperial_agenda_valid_trigger = { agenda = destroy_hostile_reform_center }
			}
			set_up_imperial_agenda = { agenda = destroy_hostile_reform_center }
		}
		1 = {
			trigger = {
				NOT = { has_imperial_agenda_available = { agenda = return_hre_core_internal } }
				imperial_agenda_valid_trigger = { agenda = return_hre_core_internal }
			}
			set_up_imperial_agenda = { agenda = return_hre_core_internal }
		}
		1 = {
			trigger = {
				NOT = { has_imperial_agenda_available = { agenda = return_hre_core_external } }
				imperial_agenda_valid_trigger = { agenda = return_hre_core_external }
			}
			set_up_imperial_agenda = { agenda = return_hre_core_external }
		}
		1 = {
			trigger = {
				NOT = { has_imperial_agenda_available = { agenda = release_hre_country } }
				imperial_agenda_valid_trigger = { agenda = release_hre_country }
			}
			set_up_imperial_agenda = { agenda = release_hre_country }
		}
		1 = {
			trigger = {
				NOT = { has_imperial_agenda_available = { agenda = free_hre_vassal_from_outsider } }
				imperial_agenda_valid_trigger = { agenda = free_hre_vassal_from_outsider }
			}
			set_up_imperial_agenda = { agenda = free_hre_vassal_from_outsider }
		}
		1 = {
			trigger = {
				NOT = { has_imperial_agenda_available = { agenda = push_outsiders_out_of_hre } }
				imperial_agenda_valid_trigger = { agenda = push_outsiders_out_of_hre }
			}
			set_up_imperial_agenda = { agenda = push_outsiders_out_of_hre }
		}
		2 = {
			trigger = {
				NOT = { has_imperial_agenda_available = { agenda = liberate_imperial_elector } }
				imperial_agenda_valid_trigger = { agenda = liberate_imperial_elector }
			}
			set_up_imperial_agenda = { agenda = liberate_imperial_elector }
		}
		1 = {
			trigger = {
				NOT = { has_imperial_agenda_available = { agenda = develop_the_imperial_capital } }
				imperial_agenda_valid_trigger = { agenda = develop_the_imperial_capital }
			}
			set_up_imperial_agenda = { agenda = develop_the_imperial_capital }
		}
		1 = {
			trigger = {
				NOT = { has_imperial_agenda_available = { agenda = fortify_the_imperial_border } }
				imperial_agenda_valid_trigger = { agenda = fortify_the_imperial_border }
			}
			set_up_imperial_agenda = { agenda = fortify_the_imperial_border }
		}
		1 = {
			trigger = {
				NOT = { has_imperial_agenda_available = { agenda = rival_imperial_enemy } }
				imperial_agenda_valid_trigger = { agenda = rival_imperial_enemy }
			}
			set_up_imperial_agenda = { agenda = rival_imperial_enemy }
		}
		1 = {
			trigger = {
				NOT = { has_imperial_agenda_available = { agenda = marry_3_electors } }
				imperial_agenda_valid_trigger = { agenda = marry_3_electors }
			}
			set_up_imperial_agenda = { agenda = marry_3_electors }
		}
		3 = {
			trigger = {
				NOT = { has_imperial_agenda_available = { agenda = reconquest_of_rome } }
				imperial_agenda_valid_trigger = { agenda = reconquest_of_rome }
			}
			set_up_imperial_agenda = { agenda = reconquest_of_rome }
		}
		100 = {
			trigger = {
				NOT = { has_imperial_agenda_available = { agenda = conquest_of_rome } }
				imperial_agenda_valid_trigger = { agenda = conquest_of_rome }
			}
			set_up_imperial_agenda = { agenda = conquest_of_rome }
		}
		1 = {
			trigger = {
				NOT = { has_imperial_agenda_available = { agenda = improve_opinion_with_all_electors } }
				imperial_agenda_valid_trigger = { agenda = improve_opinion_with_all_electors }
			}
			set_up_imperial_agenda = { agenda = improve_opinion_with_all_electors }
		}
		1 = {
			trigger = {
				NOT = { has_imperial_agenda_available = { agenda = make_x_an_elector } }
				imperial_agenda_valid_trigger = { agenda = make_x_an_elector }
			}
			set_up_imperial_agenda = { agenda = make_x_an_elector }
		}
		2 = {
			trigger = {
				NOT = { has_imperial_agenda_available = { agenda = make_x_a_free_city } }
				imperial_agenda_valid_trigger = { agenda = make_x_a_free_city }
			}
			set_up_imperial_agenda = { agenda = make_x_a_free_city }
		}
	}
}

complete_imperial_agenda = {
	[[tooltip]
		if = {
			limit = {
				always = $tooltip$
			}
			custom_tooltip = select_imperial_agenda_success_tt
		}
	]
	[[agenda]
		complete_imperial_agenda_$agenda$ = yes
		clr_global_flag = cheat_imperial_agenda_flag
	]
	[[active_agenda]
		if = {
			limit = {
				always = $active_agenda$
			}
			if = {
				limit = {
					has_imperial_agenda_selected = { agenda = add_province_x_to_hre }
				}
				complete_imperial_agenda = { agenda = add_province_x_to_hre }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = improve_x_elector_opinion }
				}
				complete_imperial_agenda = { agenda = improve_x_elector_opinion }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = increase_hre_size }
				}
				complete_imperial_agenda = { agenda = increase_hre_size }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = add_5_provs_to_hre }
				}
				complete_imperial_agenda = { agenda = add_5_provs_to_hre }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = have_7_electors }
				}
				complete_imperial_agenda = { agenda = have_7_electors }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = prove_imperial_legitimacy }
				}
				complete_imperial_agenda = { agenda = prove_imperial_legitimacy }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = convert_imperial_province }
				}
				complete_imperial_agenda = { agenda = convert_imperial_province }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = convert_imperial_country }
				}
				complete_imperial_agenda = { agenda = convert_imperial_country }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = pass_imperial_reform }
				}
				complete_imperial_agenda = { agenda = pass_imperial_reform }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = restore_imperial_peace }
				}
				complete_imperial_agenda = { agenda = restore_imperial_peace }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = be_elected_by_5_electors }
				}
				complete_imperial_agenda = { agenda = be_elected_by_5_electors }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = get_x_elector_vote }
				}
				complete_imperial_agenda = { agenda = get_x_elector_vote }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = destroy_hostile_reform_center }
				}
				complete_imperial_agenda = { agenda = destroy_hostile_reform_center }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = return_hre_core_internal }
				}
				complete_imperial_agenda = { agenda = return_hre_core_internal }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = return_hre_core_external }
				}
				complete_imperial_agenda = { agenda = return_hre_core_external }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = release_hre_country }
				}
				complete_imperial_agenda = { agenda = release_hre_country }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = free_hre_vassal_from_outsider }
				}
				complete_imperial_agenda = { agenda = free_hre_vassal_from_outsider }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = push_outsiders_out_of_hre }
				}
				complete_imperial_agenda = { agenda = push_outsiders_out_of_hre }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = liberate_imperial_elector }
				}
				complete_imperial_agenda = { agenda = liberate_imperial_elector }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = develop_the_imperial_capital }
				}
				complete_imperial_agenda = { agenda = develop_the_imperial_capital }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = fortify_the_imperial_border }
				}
				complete_imperial_agenda = { agenda = fortify_the_imperial_border }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = rival_imperial_enemy }
				}
				complete_imperial_agenda = { agenda = rival_imperial_enemy }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = marry_3_electors }
				}
				complete_imperial_agenda = { agenda = marry_3_electors }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = reconquest_of_rome }
				}
				complete_imperial_agenda = { agenda = reconquest_of_rome }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = conquest_of_rome }
				}
				complete_imperial_agenda = { agenda = conquest_of_rome }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = improve_opinion_with_all_electors }
				}
				complete_imperial_agenda = { agenda = improve_opinion_with_all_electors }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = make_x_an_elector }
				}
				complete_imperial_agenda = { agenda = make_x_an_elector }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = make_x_a_free_city }
				}
				complete_imperial_agenda = { agenda = make_x_a_free_city }
			}
		}
	]
}

fail_imperial_agenda = {
	[[tooltip]
		if = {
			limit = {
				always = $tooltip$
			}
			custom_tooltip = select_imperial_agenda_fail_tt
		}
	]
	[[agenda]
		fail_imperial_agenda_$agenda$ = yes
		clr_global_flag = cheat_imperial_agenda_flag
	]
	[[active_agenda]
		if = {
			limit = {
				always = $active_agenda$
			}
			if = {
				limit = {
					has_imperial_agenda_selected = { agenda = add_province_x_to_hre }
				}
				fail_imperial_agenda = { agenda = add_province_x_to_hre }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = improve_x_elector_opinion }
				}
				fail_imperial_agenda = { agenda = improve_x_elector_opinion }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = increase_hre_size }
				}
				fail_imperial_agenda = { agenda = increase_hre_size }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = add_5_provs_to_hre }
				}
				fail_imperial_agenda = { agenda = add_5_provs_to_hre }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = have_7_electors }
				}
				fail_imperial_agenda = { agenda = have_7_electors }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = prove_imperial_legitimacy }
				}
				fail_imperial_agenda = { agenda = prove_imperial_legitimacy }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = convert_imperial_province }
				}
				fail_imperial_agenda = { agenda = convert_imperial_province }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = convert_imperial_country }
				}
				fail_imperial_agenda = { agenda = convert_imperial_country }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = pass_imperial_reform }
				}
				fail_imperial_agenda = { agenda = pass_imperial_reform }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = restore_imperial_peace }
				}
				fail_imperial_agenda = { agenda = restore_imperial_peace }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = be_elected_by_5_electors }
				}
				fail_imperial_agenda = { agenda = be_elected_by_5_electors }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = get_x_elector_vote }
				}
				fail_imperial_agenda = { agenda = get_x_elector_vote }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = destroy_hostile_reform_center }
				}
				fail_imperial_agenda = { agenda = destroy_hostile_reform_center }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = return_hre_core_internal }
				}
				fail_imperial_agenda = { agenda = return_hre_core_internal }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = return_hre_core_external }
				}
				fail_imperial_agenda = { agenda = return_hre_core_external }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = release_hre_country }
				}
				fail_imperial_agenda = { agenda = release_hre_country }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = free_hre_vassal_from_outsider }
				}
				fail_imperial_agenda = { agenda = free_hre_vassal_from_outsider }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = push_outsiders_out_of_hre }
				}
				fail_imperial_agenda = { agenda = push_outsiders_out_of_hre }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = liberate_imperial_elector }
				}
				fail_imperial_agenda = { agenda = liberate_imperial_elector }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = develop_the_imperial_capital }
				}
				fail_imperial_agenda = { agenda = develop_the_imperial_capital }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = fortify_the_imperial_border }
				}
				fail_imperial_agenda = { agenda = fortify_the_imperial_border }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = rival_imperial_enemy }
				}
				fail_imperial_agenda = { agenda = rival_imperial_enemy }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = marry_3_electors }
				}
				fail_imperial_agenda = { agenda = marry_3_electors }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = reconquest_of_rome }
				}
				fail_imperial_agenda = { agenda = reconquest_of_rome }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = conquest_of_rome }
				}
				fail_imperial_agenda = { agenda = conquest_of_rome }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = improve_opinion_with_all_electors }
				}
				fail_imperial_agenda = { agenda = improve_opinion_with_all_electors }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = make_x_an_elector }
				}
				fail_imperial_agenda = { agenda = make_x_an_elector }
			}
			else_if = {
				limit = {
					has_imperial_agenda_selected = { agenda = make_x_a_free_city }
				}
				fail_imperial_agenda = { agenda = make_x_a_free_city }
			}
		}
	]
}

clear_possible_imperial_agendas = {
	clear_possible_imperial_agenda = { agenda = add_province_x_to_hre }
	clear_possible_imperial_agenda = { agenda = improve_x_elector_opinion }
	clear_possible_imperial_agenda = { agenda = increase_hre_size }
	clear_possible_imperial_agenda = { agenda = add_5_provs_to_hre }
	clear_possible_imperial_agenda = { agenda = have_7_electors }
	clear_possible_imperial_agenda = { agenda = prove_imperial_legitimacy }
	clear_possible_imperial_agenda = { agenda = convert_imperial_province }
	clear_possible_imperial_agenda = { agenda = convert_imperial_country }
	clear_possible_imperial_agenda = { agenda = pass_imperial_reform }
	clear_possible_imperial_agenda = { agenda = restore_imperial_peace }
	clear_possible_imperial_agenda = { agenda = be_elected_by_5_electors }
	clear_possible_imperial_agenda = { agenda = get_x_elector_vote }
	clear_possible_imperial_agenda = { agenda = destroy_hostile_reform_center }
	clear_possible_imperial_agenda = { agenda = return_hre_core_internal }
	clear_possible_imperial_agenda = { agenda = return_hre_core_external }
	clear_possible_imperial_agenda = { agenda = release_hre_country }
	clear_possible_imperial_agenda = { agenda = free_hre_vassal_from_outsider }
	clear_possible_imperial_agenda = { agenda = push_outsiders_out_of_hre }
	clear_possible_imperial_agenda = { agenda = liberate_imperial_elector }
	clear_possible_imperial_agenda = { agenda = develop_the_imperial_capital }
	clear_possible_imperial_agenda = { agenda = fortify_the_imperial_border }
	clear_possible_imperial_agenda = { agenda = rival_imperial_enemy }
	clear_possible_imperial_agenda = { agenda = marry_3_electors }
	clear_possible_imperial_agenda = { agenda = reconquest_of_rome }
	clear_possible_imperial_agenda = { agenda = conquest_of_rome }
	clear_possible_imperial_agenda = { agenda = improve_opinion_with_all_electors }
	clear_possible_imperial_agenda = { agenda = make_x_an_elector }
	clear_possible_imperial_agenda = { agenda = make_x_a_free_city }
}

clear_possible_imperial_agenda = {
	hidden_effect = {
		if = {
			limit = {
				has_imperial_agenda_available = { agenda = $agenda$ }
			}
			clear_imperial_agenda_$agenda$ = yes
		}
	}
}

select_imperial_agenda = {
	custom_tooltip = select_imperial_agenda_tt_$agenda$
	custom_tooltip = " "
	custom_tooltip = select_imperial_agenda_trigger_tt
	custom_tooltip = select_imperial_agenda_trigger_tt_$agenda$
	custom_tooltip = " "
	tooltip = {
		complete_imperial_agenda = { agenda = $agenda$ tooltip = yes }
	}
	custom_tooltip = " "
	tooltip = {
		fail_imperial_agenda = { agenda = $agenda$ tooltip = yes }
	}
	hidden_effect = {
		set_country_flag = chosen_imperial_agenda_$agenda$
		select_imperial_agenda_$agenda$ = yes
		clear_possible_imperial_agendas = yes
	}
}

finish_imperial_agenda = {
	if = {
		limit = {
			has_active_imperial_agenda = yes
		}
		if = {
			limit = {
				imperial_agenda_trigger = yes
			}
			complete_imperial_agenda = { active_agenda = yes }
		}
		else = {
			fail_imperial_agenda = { active_agenda = yes }
			country_event = { id = besseres_hrr_imperial_agenda_events.4 }
		}
	}
}

set_up_imperial_agenda = {
	set_country_flag = imperial_agenda_$agenda$
	set_up_imperial_agenda_$agenda$ = yes
}

clear_set_up_flags_for_imperial_agenda = {
	clr_country_flag = imperial_agenda_$agenda$
}

clear_flags_for_imperial_agenda = {
	clr_country_flag = chosen_imperial_agenda_$agenda$
}

imperial_agenda_generic_fail_effect = {
	add_imperial_influence = -5
	every_elector = {
		limit = {
			NOT = { tag = ROOT }
		}
		add_opinion = {
			who = ROOT
			modifier = imperial_agenda_failed_opinion
		}
	}
}

# Individual Agendas:
## add_province_x_to_hre
set_up_imperial_agenda_add_province_x_to_hre = {
	random_province = {
		limit = {
			continent = europe
			is_wasteland = no
			is_part_of_hre = no
			OR = {
				any_neighbor_province = {
					is_part_of_hre = yes
				}
				AND = {
					has_port = yes
					sea_zone = {
						any_neighbor_province = {
							has_port = yes
							is_part_of_hre = yes
						}
					}
				}
			}
		}
		save_event_target_as = add_province_x_to_hre_province
		save_global_event_target_as = add_province_x_to_hre_province
	}
}
select_imperial_agenda_add_province_x_to_hre = {
	event_target:add_province_x_to_hre_province = {
		if = {
			limit = {
				NOT = { is_permanent_claim = ROOT }
				NOT = { is_core = ROOT }
			}
			add_claim = ROOT
		}
	}
}
clear_imperial_agenda_add_province_x_to_hre = {
	clear_set_up_flags_for_imperial_agenda = { agenda = add_province_x_to_hre }
	if = {
		limit = {
			NOT = { has_imperial_agenda_selected = { agenda = add_province_x_to_hre } }
		}
		clear_global_event_target = add_province_x_to_hre_province
	}
}
complete_imperial_agenda_add_province_x_to_hre = {
	add_imperial_influence = 1
	event_target:add_province_x_to_hre_province = {
		add_base_production = 1
		custom_tooltip = complete_imperial_agenda_add_province_x_to_hre_opinion_tt
		hidden_effect = {
			if = {
				limit = {
					NOT = { owned_by = ROOT }
				}
				owner = {
					add_opinion = {
						who = ROOT
						modifier = imperial_agenda_opinion_add_province_x_to_hre
					}
				}
			}
		}
	}
	hidden_effect = {
		event_target:add_province_x_to_hre_province = {
			if = {
				limit = {
					is_claim = ROOT
					NOT = { is_permanent_claim = ROOT }
				}
				remove_claim = ROOT
			}
		}
		clear_global_event_target = add_province_x_to_hre_province
		clear_flags_for_imperial_agenda = { agenda = add_province_x_to_hre }
	}
}
fail_imperial_agenda_add_province_x_to_hre = {
	imperial_agenda_generic_fail_effect = yes
	hidden_effect = {
		event_target:add_province_x_to_hre_province = {
			if = {
				limit = {
					is_claim = ROOT
					NOT = { is_permanent_claim = ROOT }
				}
				remove_claim = ROOT
			}
		}
		clear_global_event_target = add_province_x_to_hre_province
		clear_flags_for_imperial_agenda = { agenda = add_province_x_to_hre }
	}
}

## improve_x_elector_opinion
set_up_imperial_agenda_improve_x_elector_opinion = {
	random_elector = {
		limit = {
			NOT = { tag = ROOT }
			NOT = {
				has_opinion = {
					who = ROOT
					value = 150
				}
			}
		}
		save_global_event_target_as = improve_x_elector_opinion_country
	}
}
select_imperial_agenda_improve_x_elector_opinion = {
	# No Effect
}
clear_imperial_agenda_improve_x_elector_opinion = {
	clear_set_up_flags_for_imperial_agenda = { agenda = improve_x_elector_opinion }
	if = {
		limit = {
			NOT = { has_imperial_agenda_selected = { agenda = improve_x_elector_opinion } }
		}
		clear_global_event_target = improve_x_elector_opinion_country
	}
}
complete_imperial_agenda_improve_x_elector_opinion = {
	add_dip_power = 75
	event_target:improve_x_elector_opinion_country = {
		add_trust = {
			who = ROOT
			value = 10
			mutual = yes
		}
	}
	hidden_effect = {
		clear_global_event_target = improve_x_elector_opinion_country
		clear_flags_for_imperial_agenda = { agenda = improve_x_elector_opinion }
	}
}
fail_imperial_agenda_improve_x_elector_opinion = {
	hidden_effect = {
		remove_country_modifier = fail_imperial_agenda_improve_x_elector_opinion_modifier
	}
	add_country_modifier = {
		name = fail_imperial_agenda_improve_x_elector_opinion_modifier
		duration = 3650
	}
	hidden_effect = {
		clear_global_event_target = improve_x_elector_opinion_country
		clear_flags_for_imperial_agenda = { agenda = improve_x_elector_opinion }
	}
}

## increase_hre_size
set_up_imperial_agenda_increase_hre_size = {
	set_variable = { which = increase_hre_size_value value = 0 }
	export_to_variable = {
		which = increase_hre_size_value
		value = trigger_value:hre_size
	}
	change_variable = { which = increase_hre_size_value value = 1 }
}
select_imperial_agenda_increase_hre_size = {
	set_variable = { which = increase_hre_size_value value = 0 }
	export_to_variable = {
		which = increase_hre_size_value
		value = trigger_value:hre_size
	}
	change_variable = { which = increase_hre_size_value value = 1 }
}
clear_imperial_agenda_increase_hre_size = {
	clear_set_up_flags_for_imperial_agenda = { agenda = increase_hre_size }
	if = {
		limit = {
			NOT = { has_imperial_agenda_selected = { agenda = increase_hre_size } }
		}
		set_variable = { which = increase_hre_size_value value = 0 }
	}
}
complete_imperial_agenda_increase_hre_size = {
	add_prestige = 5
	add_imperial_influence = 5
	hidden_effect = {
		set_variable = { which = increase_hre_size_value value = 0 }
		clear_flags_for_imperial_agenda = { agenda = increase_hre_size }
	}
}
fail_imperial_agenda_increase_hre_size = {
	add_prestige = -10
	hidden_effect = {
		set_variable = { which = increase_hre_size_value value = 0 }
		clear_flags_for_imperial_agenda = { agenda = increase_hre_size }
	}
}

## add_5_provs_to_hre
set_up_imperial_agenda_add_5_provs_to_hre = {
	set_variable = { which = add_5_provs_to_hre_value value = 0 }
	every_province = {
		limit = {
			is_part_of_hre = yes
		}
		ROOT = {
			change_variable = { which = add_5_provs_to_hre_value value = 1 }
		}
	}
	change_variable = { which = add_5_provs_to_hre_value value = 5 }
}
select_imperial_agenda_add_5_provs_to_hre = {
	set_variable = { which = add_5_provs_to_hre_value value = 0 }
	every_province = {
		limit = {
			is_part_of_hre = yes
		}
		ROOT = {
			change_variable = { which = add_5_provs_to_hre_value value = 1 }
		}
	}
	change_variable = { which = add_5_provs_to_hre_value value = 5 }
}
clear_imperial_agenda_add_5_provs_to_hre = {
	clear_set_up_flags_for_imperial_agenda = { agenda = add_5_provs_to_hre }
	if = {
		limit = {
			NOT = { has_imperial_agenda_selected = { agenda = add_5_provs_to_hre } }
		}
		set_variable = { which = add_5_provs_to_hre_value value = 0 }
	}
}
complete_imperial_agenda_add_5_provs_to_hre = {
	add_power_projection = {
		type = mission_rewards_power_projection
		amount = 5
	}
	hidden_effect = {
		set_variable = { which = add_5_provs_to_hre_value value = 0 }
		clear_flags_for_imperial_agenda = { agenda = add_5_provs_to_hre }
	}
}
fail_imperial_agenda_add_5_provs_to_hre = {
	add_imperial_influence = -5
	hidden_effect = {
		set_variable = { which = add_5_provs_to_hre_value value = 0 }
		clear_flags_for_imperial_agenda = { agenda = add_5_provs_to_hre }
	}
}

## have_7_electors
set_up_imperial_agenda_have_7_electors = {
	# No Effect
}
select_imperial_agenda_have_7_electors = {
	every_elector = {
		set_country_flag = was_elector_before_imperial_agenda
	}
}
clear_imperial_agenda_have_7_electors = {
	clear_set_up_flags_for_imperial_agenda = { agenda = have_7_electors }
}
complete_imperial_agenda_have_7_electors = {
	add_adm_power = 50
	custom_tooltip = complete_imperial_agenda_have_7_electors_tt
	hidden_effect = {
		every_elector = {
			limit = {
				NOT = { has_country_flag = was_elector_before_imperial_agenda }
			}
			add_opinion = {
				who = ROOT
				modifier = imperial_agenda_opinion_have_7_electors
			}
		}
		every_country = {
			clr_country_flag = was_elector_before_imperial_agenda
		}
		clear_flags_for_imperial_agenda = { agenda = have_7_electors }
	}
}
fail_imperial_agenda_have_7_electors = {
	imperial_agenda_generic_fail_effect = yes
	hidden_effect = {
		every_country = {
			clr_country_flag = was_elector_before_imperial_agenda
		}
		clear_flags_for_imperial_agenda = { agenda = have_7_electors }
	}
}

## prove_imperial_legitimacy
set_up_imperial_agenda_prove_imperial_legitimacy = {
	# No Effect
}
select_imperial_agenda_prove_imperial_legitimacy = {
	# No Effect
}
clear_imperial_agenda_prove_imperial_legitimacy = {
	clear_set_up_flags_for_imperial_agenda = { agenda = prove_imperial_legitimacy }
}
complete_imperial_agenda_prove_imperial_legitimacy = {
	hidden_effect = {
		remove_country_modifier = complete_imperial_agenda_prove_imperial_legitimacy_modifier
	}
	add_country_modifier = {
		name = complete_imperial_agenda_prove_imperial_legitimacy_modifier
		duration = 3650
	}
	hidden_effect = {
		clear_flags_for_imperial_agenda = { agenda = prove_imperial_legitimacy }
	}
}
fail_imperial_agenda_prove_imperial_legitimacy = {
	hidden_effect = {
		remove_country_modifier = fail_imperial_agenda_prove_imperial_legitimacy_modifier
	}
	add_country_modifier = {
		name = fail_imperial_agenda_prove_imperial_legitimacy_modifier
		duration = 3650
	}
	hidden_effect = {
		clear_flags_for_imperial_agenda = { agenda = prove_imperial_legitimacy }
	}
}

## convert_imperial_province
set_up_imperial_agenda_convert_imperial_province = {
	random_owned_province = {
		limit = {
			is_part_of_hre = yes
			has_owner_religion = no
		}
		save_event_target_as = convert_imperial_province_province
		save_global_event_target_as = convert_imperial_province_province
	}
}
select_imperial_agenda_convert_imperial_province = {
	# No Effect
}
clear_imperial_agenda_convert_imperial_province = {
	clear_set_up_flags_for_imperial_agenda = { agenda = convert_imperial_province }
	if = {
		limit = {
			NOT = { has_imperial_agenda_selected = { agenda = convert_imperial_province } }
		}
		clear_global_event_target = convert_imperial_province_province
	}
}
complete_imperial_agenda_convert_imperial_province = {
	hidden_effect = {
		remove_country_modifier = complete_imperial_agenda_convert_imperial_province_modifier
	}
	add_country_modifier = {
		name = complete_imperial_agenda_convert_imperial_province_modifier
		duration = 3650
	}
	event_target:convert_imperial_province_province = {
		add_base_tax = 1
	}
	hidden_effect = {
		clear_global_event_target = convert_imperial_province_province
		clear_flags_for_imperial_agenda = { agenda = convert_imperial_province }
	}
}
fail_imperial_agenda_convert_imperial_province = {
	event_target:convert_imperial_province_province = {
		hidden_effect = {
			remove_province_modifier = missionary_failure
		}
		add_province_modifier = {
			name = missionary_failure
			duration = 3650
		}
		random_neighbor_province = {
			limit = {
				owned_by = ROOT
				NOT = { religion = PREV }
			}
			change_religion = PREV
		}
	}
	hidden_effect = {
		clear_global_event_target = convert_imperial_province_province
		clear_flags_for_imperial_agenda = { agenda = convert_imperial_province }
	}
}

## convert_imperial_country
set_up_imperial_agenda_convert_imperial_country = {
	random_country = {
		limit = {
			is_part_of_hre = yes
			NOT = { religion = ROOT }
			OR = {
				is_subject = no
				is_subject_of = ROOT
			}
		}
		save_global_event_target_as = convert_imperial_country_country
	}
}
select_imperial_agenda_convert_imperial_country = {
	event_target:convert_imperial_country_country = {
		reverse_add_casus_belli = {
			target = ROOT
			type = cb_religious_conformance
			months = 61
		}
	}
}
clear_imperial_agenda_convert_imperial_country = {
	clear_set_up_flags_for_imperial_agenda = { agenda = convert_imperial_country }
	if = {
		limit = {
			NOT = { has_imperial_agenda_selected = { agenda = convert_imperial_country } }
		}
		clear_global_event_target = convert_imperial_country_country
	}
}
complete_imperial_agenda_convert_imperial_country = {
	add_imperial_influence = 5
	every_country = {
		limit = {
			is_part_of_hre = yes
			religion = ROOT
		}
		add_opinion = {
			who = ROOT
			modifier = imperial_agenda_completed_opinion
		}
	}
	hidden_effect = {
		clear_global_event_target = convert_imperial_country_country
		clear_flags_for_imperial_agenda = { agenda = convert_imperial_country }
	}
}
fail_imperial_agenda_convert_imperial_country = {
	add_imperial_influence = -5
	every_country = {
		limit = {
			is_part_of_hre = yes
			religion = ROOT
		}
		add_opinion = {
			who = ROOT
			modifier = imperial_agenda_failed_opinion
		}
	}
	hidden_effect = {
		clear_global_event_target = convert_imperial_country_country
		clear_flags_for_imperial_agenda = { agenda = convert_imperial_country }
	}
}

## pass_imperial_reform
set_up_imperial_agenda_pass_imperial_reform = {
	set_variable = { which = pass_imperial_reform_value value = 0 }
	if = {
		limit = {
			has_dlc = "Emperor"
		}
		if = {
			limit = {
				hre_reform_passed = emperor_reichsreform
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = emperor_reichsregiment
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = emperor_reichsstabilitaet
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = emperor_gemeinerpfennig
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = emperor_perpetual_diet
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = emperor_landsknechtswesen
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = emperor_landfriede
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = emperor_reichstag_collegia
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = emperor_expand_gemeiner_pfennig
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = emperor_rechenschaft
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = emperor_geteilte_macht
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = emperor_reichskrieg
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = emperor_hofgericht
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = emperor_imperial_estates
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = emperor_erbkaisertum
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = emperor_privilegia_de_non_appelando
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = emperor_renovatio
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
	}
	else = {
		if = {
			limit = {
				hre_reform_passed = reichsreform
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = reichsregiment
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = hofgericht
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = gemeinerpfennig
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = landfriede
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = erbkaisertum
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = privilegia_de_non_appelando
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = renovatio
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
	}
	change_variable = { which = pass_imperial_reform_value value = 1 }
}
select_imperial_agenda_pass_imperial_reform = {
	set_variable = { which = pass_imperial_reform_value value = 0 }
	if = {
		limit = {
			has_dlc = "Emperor"
		}
		if = {
			limit = {
				hre_reform_passed = emperor_reichsreform
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = emperor_reichsregiment
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = emperor_reichsstabilitaet
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = emperor_gemeinerpfennig
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = emperor_perpetual_diet
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = emperor_landsknechtswesen
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = emperor_landfriede
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = emperor_reichstag_collegia
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = emperor_expand_gemeiner_pfennig
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = emperor_rechenschaft
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = emperor_geteilte_macht
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = emperor_reichskrieg
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = emperor_hofgericht
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = emperor_imperial_estates
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = emperor_erbkaisertum
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = emperor_privilegia_de_non_appelando
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = emperor_renovatio
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
	}
	else = {
		if = {
			limit = {
				hre_reform_passed = reichsreform
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = reichsregiment
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = hofgericht
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = gemeinerpfennig
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = landfriede
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = erbkaisertum
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = privilegia_de_non_appelando
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
		if = {
			limit = {
				hre_reform_passed = renovatio
			}
			change_variable = { which = pass_imperial_reform_value value = 1 }
		}
	}
	change_variable = { which = pass_imperial_reform_value value = 1 }
}
clear_imperial_agenda_pass_imperial_reform = {
	clear_set_up_flags_for_imperial_agenda = { agenda = pass_imperial_reform }
	if = {
		limit = {
			NOT = { has_imperial_agenda_selected = { agenda = pass_imperial_reform } }
		}
		set_variable = { which = pass_imperial_reform_value value = 0 }
	}
}
complete_imperial_agenda_pass_imperial_reform = {
	add_imperial_influence = 10
	every_country = {
		limit = {
			is_part_of_hre = yes
		}
		add_opinion = {
			who = ROOT
			modifier = imperial_agenda_completed_opinion
		}
	}
	hidden_effect = {
		set_variable = { which = pass_imperial_reform_value value = 0 }
		clear_flags_for_imperial_agenda = { agenda = pass_imperial_reform }
	}
}
fail_imperial_agenda_pass_imperial_reform = {
	imperial_agenda_generic_fail_effect = yes
	hidden_effect = {
		set_variable = { which = pass_imperial_reform_value value = 0 }
		clear_flags_for_imperial_agenda = { agenda = pass_imperial_reform }
	}
}

## restore_imperial_peace
set_up_imperial_agenda_restore_imperial_peace = {
	# No Effect
}
select_imperial_agenda_restore_imperial_peace = {
	# No Effect
}
clear_imperial_agenda_restore_imperial_peace = {
	clear_set_up_flags_for_imperial_agenda = { agenda = restore_imperial_peace }
}
complete_imperial_agenda_restore_imperial_peace = {
	hidden_effect = {
		remove_country_modifier = complete_imperial_agenda_restore_imperial_peace_modifier
	}
	add_country_modifier = {
		name = complete_imperial_agenda_restore_imperial_peace_modifier
		duration = 3650
	}
	hidden_effect = {
		clear_flags_for_imperial_agenda = { agenda = restore_imperial_peace }
	}
}
fail_imperial_agenda_restore_imperial_peace = {
	hidden_effect = {
		remove_country_modifier = fail_imperial_agenda_restore_imperial_peace_modifier
	}
	add_country_modifier = {
		name = fail_imperial_agenda_restore_imperial_peace_modifier
		duration = 3650
	}
	imperial_agenda_generic_fail_effect = yes
	hidden_effect = {
		clear_flags_for_imperial_agenda = { agenda = restore_imperial_peace }
	}
}

## be_elected_by_5_electors
set_up_imperial_agenda_be_elected_by_5_electors = {
	# No Effect
}
select_imperial_agenda_be_elected_by_5_electors = {
	every_elector = {
		limit = {
			NOT = { preferred_emperor = ROOT }
		}
		set_country_flag = has_not_elected_us_before_imperial_agenda
	}
}
clear_imperial_agenda_be_elected_by_5_electors = {
	clear_set_up_flags_for_imperial_agenda = { agenda = be_elected_by_5_electors }
}
complete_imperial_agenda_be_elected_by_5_electors = {
	hidden_effect = {
		remove_country_modifier = complete_imperial_agenda_be_elected_by_5_electors_modifier
	}
	add_country_modifier = {
		name = complete_imperial_agenda_be_elected_by_5_electors_modifier
		duration = 3650
	}
	custom_tooltip = complete_imperial_agenda_be_elected_by_5_electors_tt
	hidden_effect = {
		every_elector = {
			limit = {
				has_country_flag = has_not_elected_us_before_imperial_agenda
			}
			add_opinion = {
				who = ROOT
				modifier = imperial_agenda_opinion_be_elected_by_5_electors
			}
		}
		every_country = {
			limit = {
				has_country_flag = has_not_elected_us_before_imperial_agenda
			}
			clr_country_flag = has_not_elected_us_before_imperial_agenda
		}
		clear_flags_for_imperial_agenda = { agenda = be_elected_by_5_electors }
	}
}
fail_imperial_agenda_be_elected_by_5_electors = {
	imperial_agenda_generic_fail_effect = yes
	hidden_effect = {
		every_country = {
			limit = {
				has_country_flag = has_not_elected_us_before_imperial_agenda
			}
			clr_country_flag = has_not_elected_us_before_imperial_agenda
		}
		clear_flags_for_imperial_agenda = { agenda = be_elected_by_5_electors }
	}
}

## get_x_elector_vote
set_up_imperial_agenda_get_x_elector_vote = {
	random_elector = {
		limit = {
			NOT = { tag = ROOT }
			NOT = { preferred_emperor = ROOT }
		}
		save_global_event_target_as = get_x_elector_vote_country
	}
}
select_imperial_agenda_get_x_elector_vote = {
	# No Effect
}
clear_imperial_agenda_get_x_elector_vote = {
	clear_set_up_flags_for_imperial_agenda = { agenda = get_x_elector_vote }
	if = {
		limit = {
			NOT = { has_imperial_agenda_selected = { agenda = get_x_elector_vote } }
		}
		clear_global_event_target = get_x_elector_vote_country
	}
}
complete_imperial_agenda_get_x_elector_vote = {
	add_dip_power = 75
	event_target:get_x_elector_vote_country = {
		add_trust = {
			who = ROOT
			value = 10
			mutual = yes
		}
	}
	hidden_effect = {
		clear_global_event_target = get_x_elector_vote_country
		clear_flags_for_imperial_agenda = { agenda = get_x_elector_vote }
	}
}
fail_imperial_agenda_get_x_elector_vote = {
	add_dip_power = -100
	event_target:get_x_elector_vote_country = {
		add_opinion = {
			who = ROOT
			modifier = imperial_agenda_opinion_get_x_elector_vote
		}
	}
	hidden_effect = {
		clear_global_event_target = get_x_elector_vote_country
		clear_flags_for_imperial_agenda = { agenda = get_x_elector_vote }
	}
}

## destroy_hostile_reform_center
set_up_imperial_agenda_destroy_hostile_reform_center = {
	random_province = {
		limit = {
			is_part_of_hre = yes
			NOT = { religion = ROOT }
			is_reformation_center = yes
		}
		save_event_target_as = destroy_hostile_reform_center_province
		save_global_event_target_as = destroy_hostile_reform_center_province
	}
}
select_imperial_agenda_destroy_hostile_reform_center = {
	event_target:destroy_hostile_reform_center_province = {
		if = {
			limit = {
				NOT = { is_permanent_claim = ROOT }
				NOT = { is_core = ROOT }
			}
			add_claim = ROOT
		}
	}
}
clear_imperial_agenda_destroy_hostile_reform_center = {
	clear_set_up_flags_for_imperial_agenda = { agenda = destroy_hostile_reform_center }
	if = {
		limit = {
			NOT = { has_imperial_agenda_selected = { agenda = destroy_hostile_reform_center } }
		}
		clear_global_event_target = destroy_hostile_reform_center_province
	}
}
complete_imperial_agenda_destroy_hostile_reform_center = {
	hidden_effect = {
		remove_country_modifier = complete_imperial_agenda_destroy_hostile_reform_center_modifier
	}
	add_country_modifier = {
		name = complete_imperial_agenda_destroy_hostile_reform_center_modifier
		duration = 3650
	}
	event_target:destroy_hostile_reform_center_province = {
		add_unrest = -5
	}
	hidden_effect = {
		event_target:destroy_hostile_reform_center_province = {
			if = {
				limit = {
					is_claim = ROOT
					NOT = { is_permanent_claim = ROOT }
				}
				remove_claim = ROOT
			}
		}
		clear_global_event_target = destroy_hostile_reform_center_province
		clear_flags_for_imperial_agenda = { agenda = destroy_hostile_reform_center }
	}
}
fail_imperial_agenda_destroy_hostile_reform_center = {
	hidden_effect = {
		remove_country_modifier = fail_imperial_agenda_destroy_hostile_reform_center_modifier
	}
	add_country_modifier = {
		name = fail_imperial_agenda_destroy_hostile_reform_center_modifier
		duration = 3650
	}
	hidden_effect = {
		event_target:destroy_hostile_reform_center_province = {
			if = {
				limit = {
					is_claim = ROOT
					NOT = { is_permanent_claim = ROOT }
				}
				remove_claim = ROOT
			}
		}
		clear_global_event_target = destroy_hostile_reform_center_province
		clear_flags_for_imperial_agenda = { agenda = destroy_hostile_reform_center }
	}
}

## return_hre_core_internal
set_up_imperial_agenda_return_hre_core_internal = {
	random_province = {
		limit = {
			continent = europe
			NOT = { owned_by = ROOT }
			is_part_of_hre = yes
			any_core_country = {
				exists = yes
				NOT = { tag = ROOT }
				is_part_of_hre = yes
				PREV = {
					NOT = { owned_by = PREV }
				}
			}
		}
		save_event_target_as = return_hre_core_internal_province
		save_global_event_target_as = return_hre_core_internal_province
		random_core_country = {
			limit = {
				exists = yes
				NOT = { tag = ROOT }
				is_part_of_hre = yes
				PREV = {
					NOT = { owned_by = PREV }
				}
			}
			save_global_event_target_as = return_hre_core_internal_country
		}
	}
}
select_imperial_agenda_return_hre_core_internal = {
	event_target:return_hre_core_internal_province = {
		if = {
			limit = {
				NOT = { is_permanent_claim = ROOT }
				NOT = { is_core = ROOT }
			}
			add_claim = ROOT
		}
	}
}
clear_imperial_agenda_return_hre_core_internal = {
	clear_set_up_flags_for_imperial_agenda = { agenda = return_hre_core_internal }
	if = {
		limit = {
			NOT = { has_imperial_agenda_selected = { agenda = return_hre_core_internal } }
		}
		clear_global_event_target = return_hre_core_internal_province
		clear_global_event_target = return_hre_core_internal_country
	}
}
complete_imperial_agenda_return_hre_core_internal = {
	add_imperial_influence = 5
	add_dip_power = 50
	event_target:return_hre_core_internal_country = {
		add_opinion = {
			who = ROOT
			modifier = imperial_agenda_opinion_return_hre_core_internal
		}
	}
	hidden_effect = {
		event_target:return_hre_core_internal_province = {
			if = {
				limit = {
					is_claim = ROOT
					NOT = { is_permanent_claim = ROOT }
				}
				remove_claim = ROOT
			}
		}
		clear_global_event_target = return_hre_core_internal_province
		clear_global_event_target = return_hre_core_internal_country
		clear_flags_for_imperial_agenda = { agenda = return_hre_core_internal }
	}
}
fail_imperial_agenda_return_hre_core_internal = {
	add_imperial_influence = -5
	event_target:return_hre_core_internal_country = {
		add_opinion = {
			who = ROOT
			modifier = imperial_agenda_opinion_return_hre_core_internal_negative
		}
	}
	hidden_effect = {
		event_target:return_hre_core_internal_province = {
			if = {
				limit = {
					is_claim = ROOT
					NOT = { is_permanent_claim = ROOT }
				}
				remove_claim = ROOT
			}
		}
		clear_global_event_target = return_hre_core_internal_province
		clear_global_event_target = return_hre_core_internal_country
		clear_flags_for_imperial_agenda = { agenda = return_hre_core_internal }
	}
}

## return_hre_core_external
set_up_imperial_agenda_return_hre_core_external = {
	random_province = {
		limit = {
			continent = europe
			NOT = { owned_by = ROOT }
			owner = {
				is_part_of_hre = no
			}
			any_core_country = {
				exists = yes
				is_subject = no
				NOT = { tag = ROOT }
				is_part_of_hre = yes
				PREV = {
					NOT = { owned_by = PREV }
				}
			}
		}
		save_event_target_as = return_hre_core_external_province
		save_global_event_target_as = return_hre_core_external_province
		random_core_country = {
			limit = {
				exists = yes
				is_subject = no
				NOT = { tag = ROOT }
				is_part_of_hre = yes
				PREV = {
					NOT = { owned_by = PREV }
				}
			}
			save_global_event_target_as = return_hre_core_external_country
		}
	}
}
select_imperial_agenda_return_hre_core_external = {
	event_target:return_hre_core_external_province = {
		if = {
			limit = {
				NOT = { is_permanent_claim = ROOT }
				NOT = { is_core = ROOT }
			}
			add_claim = ROOT
		}
	}
}
clear_imperial_agenda_return_hre_core_external = {
	clear_set_up_flags_for_imperial_agenda = { agenda = return_hre_core_external }
	if = {
		limit = {
			NOT = { has_imperial_agenda_selected = { agenda = return_hre_core_external } }
		}
		clear_global_event_target = return_hre_core_external_province
		clear_global_event_target = return_hre_core_external_country
	}
}
complete_imperial_agenda_return_hre_core_external = {
	add_imperial_influence = 5
	add_power_projection = {
		type = mission_rewards_power_projection
		amount = 10
	}
	event_target:return_hre_core_external_country = {
		add_opinion = {
			who = ROOT
			modifier = imperial_agenda_opinion_return_hre_core_external
		}
	}
	hidden_effect = {
		event_target:return_hre_core_external_province = {
			if = {
				limit = {
					is_claim = ROOT
					NOT = { is_permanent_claim = ROOT }
				}
				remove_claim = ROOT
			}
		}
		clear_global_event_target = return_hre_core_external_province
		clear_global_event_target = return_hre_core_external_country
		clear_flags_for_imperial_agenda = { agenda = return_hre_core_external }
	}
}
fail_imperial_agenda_return_hre_core_external = {
	add_imperial_influence = -10
	add_prestige = -10
	event_target:return_hre_core_external_country = {
		add_opinion = {
			who = ROOT
			modifier = imperial_agenda_opinion_return_hre_core_external_negative
		}
	}
	hidden_effect = {
		event_target:return_hre_core_external_province = {
			if = {
				limit = {
					is_claim = ROOT
					NOT = { is_permanent_claim = ROOT }
				}
				remove_claim = ROOT
			}
		}
		clear_global_event_target = return_hre_core_external_province
		clear_global_event_target = return_hre_core_external_country
		clear_flags_for_imperial_agenda = { agenda = return_hre_core_external }
	}
}

## release_hre_country
set_up_imperial_agenda_release_hre_country = {
	random_province = {
		limit = {
			continent = europe
			is_part_of_hre = yes
			NOT = { owned_by = ROOT }
			OR = {
				AND = {
					NOT = { hre_reform_passed = emperor_landfriede }
					NOT = { hre_reform_passed = landfriede }
				}
				owner = {
					is_part_of_hre = no
				}
			}
			any_core_country = {
				exists = no
			}
		}
		save_event_target_as = release_hre_country_province
		save_global_event_target_as = release_hre_country_province
		random_core_country = {
			limit = {
				exists = no
			}
			save_global_event_target_as = release_hre_country_country
		}
	}
}
select_imperial_agenda_release_hre_country = {
	event_target:release_hre_country_province = {
		if = {
			limit = {
				NOT = { is_permanent_claim = ROOT }
				NOT = { is_core = ROOT }
			}
			add_claim = ROOT
		}
	}
}
clear_imperial_agenda_release_hre_country = {
	clear_set_up_flags_for_imperial_agenda = { agenda = release_hre_country }
	if = {
		limit = {
			NOT = { has_imperial_agenda_selected = { agenda = release_hre_country } }
		}
		clear_global_event_target = release_hre_country_province
		clear_global_event_target = release_hre_country_country
	}
}
complete_imperial_agenda_release_hre_country = {
	add_imperial_influence = 5
	hidden_effect = {
		remove_country_modifier = complete_imperial_agenda_release_hre_country_modifier
	}
	add_country_modifier = {
		name = complete_imperial_agenda_release_hre_country_modifier
		duration = 3650
	}
	hidden_effect = {
		event_target:release_hre_country_province = {
			if = {
				limit = {
					is_claim = ROOT
					NOT = { is_permanent_claim = ROOT }
				}
				remove_claim = ROOT
			}
		}
		clear_global_event_target = release_hre_country_province
		clear_global_event_target = release_hre_country_country
		clear_flags_for_imperial_agenda = { agenda = release_hre_country }
	}
}
fail_imperial_agenda_release_hre_country = {
	hidden_effect = {
		remove_country_modifier = fail_imperial_agenda_release_hre_country_modifier
	}
	add_country_modifier = {
		name = fail_imperial_agenda_release_hre_country_modifier
		duration = 3650
	}
	hidden_effect = {
		event_target:release_hre_country_province = {
			if = {
				limit = {
					is_claim = ROOT
					NOT = { is_permanent_claim = ROOT }
				}
				remove_claim = ROOT
			}
		}
		clear_global_event_target = release_hre_country_province
		clear_global_event_target = release_hre_country_country
		clear_flags_for_imperial_agenda = { agenda = release_hre_country }
	}
}

## free_hre_vassal_from_outsider
set_up_imperial_agenda_free_hre_vassal_from_outsider = {
	random_country = {
		limit = {
			is_part_of_hre = yes
			is_subject = yes
			overlord = {
				is_part_of_hre = no
			}
		}
		save_global_event_target_as = free_hre_vassal_from_outsider_country
	}
}
select_imperial_agenda_free_hre_vassal_from_outsider = {
	event_target:free_hre_vassal_from_outsider_country = {
		overlord = {
			reverse_add_casus_belli = {
				target = ROOT
				type = cb_free_imperial_vassal
			}
		}
	}
}
clear_imperial_agenda_free_hre_vassal_from_outsider = {
	clear_set_up_flags_for_imperial_agenda = { agenda = free_hre_vassal_from_outsider }
	if = {
		limit = {
			NOT = { has_imperial_agenda_selected = { agenda = free_hre_vassal_from_outsider } }
		}
		clear_global_event_target = free_hre_vassal_from_outsider_country
	}
}
complete_imperial_agenda_free_hre_vassal_from_outsider = {
	add_imperial_influence = 5
	add_mil_power = 75
	event_target:free_hre_vassal_from_outsider_country = {
		add_trust = {
			who = ROOT
			value = 10
			mutual = yes
		}
	}
	hidden_effect = {
		clear_global_event_target = free_hre_vassal_from_outsider_country
		clear_flags_for_imperial_agenda = { agenda = free_hre_vassal_from_outsider }
	}
}
fail_imperial_agenda_free_hre_vassal_from_outsider = {
	imperial_agenda_generic_fail_effect = yes
	hidden_effect = {
		clear_global_event_target = free_hre_vassal_from_outsider_country
		clear_flags_for_imperial_agenda = { agenda = free_hre_vassal_from_outsider }
	}
}

## push_outsiders_out_of_hre
set_up_imperial_agenda_push_outsiders_out_of_hre = {
	# No Effect
}
select_imperial_agenda_push_outsiders_out_of_hre = {
	# No effect
}
clear_imperial_agenda_push_outsiders_out_of_hre = {
	clear_set_up_flags_for_imperial_agenda = { agenda = push_outsiders_out_of_hre }
}
complete_imperial_agenda_push_outsiders_out_of_hre = {
	hidden_effect = {
		remove_country_modifier = complete_imperial_agenda_push_outsiders_out_of_hre_modifier
	}
	add_country_modifier = {
		name = complete_imperial_agenda_push_outsiders_out_of_hre_modifier
		duration = 7300
	}
	every_elector = {
		add_opinion = {
			who = ROOT
			modifier = imperial_agenda_completed_opinion
		}
	}
	hidden_effect = {
		clear_flags_for_imperial_agenda = { agenda = push_outsiders_out_of_hre }
	}
}
fail_imperial_agenda_push_outsiders_out_of_hre = {
	add_imperial_influence = -10
	every_elector = {
		add_opinion = {
			who = ROOT
			modifier = imperial_agenda_opinion_push_outsiders_out_of_hre
		}
	}
	hidden_effect = {
		clear_flags_for_imperial_agenda = { agenda = push_outsiders_out_of_hre }
	}
}

## liberate_imperial_elector
set_up_imperial_agenda_liberate_imperial_elector = {
	random_elector = {
		limit = {
			is_subject = yes
			NOT = { is_subject_of = ROOT }
		}
		save_global_event_target_as = liberate_imperial_elector_country
	}
}
select_imperial_agenda_liberate_imperial_elector = {
	# No Effect
}
clear_imperial_agenda_liberate_imperial_elector = {
	clear_set_up_flags_for_imperial_agenda = { agenda = liberate_imperial_elector }
	if = {
		limit = {
			NOT = { has_imperial_agenda_selected = { agenda = liberate_imperial_elector } }
		}
		clear_global_event_target = liberate_imperial_elector_country
	}
}
complete_imperial_agenda_liberate_imperial_elector = {
	hidden_effect = {
		remove_country_modifier = complete_imperial_agenda_liberate_imperial_elector_modifier
	}
	add_country_modifier = {
		name = complete_imperial_agenda_liberate_imperial_elector_modifier
		duration = 3650
	}
	hidden_effect = {
		clear_global_event_target = liberate_imperial_elector
		clear_flags_for_imperial_agenda = { agenda = liberate_imperial_elector }
	}
}
fail_imperial_agenda_liberate_imperial_elector = {
	hidden_effect = {
		remove_country_modifier = fail_imperial_agenda_liberate_imperial_elector_modifier
	}
	add_country_modifier = {
		name = fail_imperial_agenda_liberate_imperial_elector_modifier
		duration = 3650
	}
	hidden_effect = {
		clear_global_event_target = liberate_imperial_elector
		clear_flags_for_imperial_agenda = { agenda = liberate_imperial_elector }
	}
}

## develop_the_imperial_capital
set_up_imperial_agenda_develop_the_imperial_capital = {
	capital_scope = {
		save_event_target_as = develop_the_imperial_capital_province
		save_global_event_target_as = develop_the_imperial_capital_province
		set_variable = { which = develop_the_imperial_capital_value value = 0 }
		export_to_variable = {
			which = develop_the_imperial_capital_value
			value = development
		}
		change_variable = { which = develop_the_imperial_capital_value value = 5 }
	}
}
select_imperial_agenda_develop_the_imperial_capital = {
	capital_scope = {
		save_event_target_as = develop_the_imperial_capital_province
		save_global_event_target_as = develop_the_imperial_capital_province
		set_variable = { which = develop_the_imperial_capital_value value = 0 }
		export_to_variable = {
			which = develop_the_imperial_capital_value
			value = development
		}
		change_variable = { which = develop_the_imperial_capital_value value = 5 }
	}
}
clear_imperial_agenda_develop_the_imperial_capital = {
	clear_set_up_flags_for_imperial_agenda = { agenda = develop_the_imperial_capital }
	if = {
		limit = {
			NOT = { has_imperial_agenda_selected = { agenda = develop_the_imperial_capital } }
		}
		event_target:develop_the_imperial_capital_province = {
			set_variable = { which = develop_the_imperial_capital_value value = 0 }
		}
		clear_global_event_target = develop_the_imperial_capital_province
	}
}
complete_imperial_agenda_develop_the_imperial_capital = {
	event_target:develop_the_imperial_capital_province = {
		hidden_effect = {
			remove_province_modifier = complete_imperial_agenda_develop_the_imperial_capital_modifier
		}
		add_province_modifier = {
			name = complete_imperial_agenda_develop_the_imperial_capital_modifier
			duration = 3650
		}
	}
	hidden_effect = {
		event_target:develop_the_imperial_capital_province = {
			set_variable = { which = develop_the_imperial_capital_value value = 0 }
		}
		clear_global_event_target = develop_the_imperial_capital_province
		clear_flags_for_imperial_agenda = { agenda = develop_the_imperial_capital }
	}
}
fail_imperial_agenda_develop_the_imperial_capital = {
	event_target:develop_the_imperial_capital_province = {
		hidden_effect = {
			remove_province_modifier = fail_imperial_agenda_develop_the_imperial_capital_modifier
		}
		add_province_modifier = {
			name = fail_imperial_agenda_develop_the_imperial_capital_modifier
			duration = 3650
		}
	}
	hidden_effect = {
		event_target:develop_the_imperial_capital_province = {
			set_variable = { which = develop_the_imperial_capital_value value = 0 }
		}
		clear_global_event_target = develop_the_imperial_capital_province
		clear_flags_for_imperial_agenda = { agenda = develop_the_imperial_capital }
	}
}

## fortify_the_imperial_border
set_up_imperial_agenda_fortify_the_imperial_border = {
	random_owned_province = {
		limit = {
			is_part_of_hre = yes
			NOT = { fort_level = 2 }
			num_free_building_slots = 1
			any_neighbor_province = {
				is_part_of_hre = no
				owner = {
					is_part_of_hre = no
				}
			}
		}
		save_event_target_as = fortify_the_imperial_border_province
		save_global_event_target_as = fortify_the_imperial_border_province
	}
}
select_imperial_agenda_fortify_the_imperial_border = {
	# No Effect
}
clear_imperial_agenda_fortify_the_imperial_border = {
	clear_set_up_flags_for_imperial_agenda = { agenda = fortify_the_imperial_border }
	if = {
		limit = {
			NOT = { has_imperial_agenda_selected = { agenda = fortify_the_imperial_border } }
		}
		clear_global_event_target = fortify_the_imperial_border_province
	}
}
complete_imperial_agenda_fortify_the_imperial_border = {
	event_target:fortify_the_imperial_border_province = {
		hidden_effect = {
			remove_province_modifier = complete_imperial_agenda_fortify_the_imperial_border_modifier
		}
		add_province_modifier = {
			name = complete_imperial_agenda_fortify_the_imperial_border_modifier
			duration = 3650
		}
	}
	hidden_effect = {
		clear_global_event_target = fortify_the_imperial_border_province
		clear_flags_for_imperial_agenda = { agenda = fortify_the_imperial_border }
	}
}
fail_imperial_agenda_fortify_the_imperial_border = {
	event_target:fortify_the_imperial_border_province = {
		hidden_effect = {
			remove_province_modifier = fail_imperial_agenda_fortify_the_imperial_border_modifier
		}
		add_province_modifier = {
			name = fail_imperial_agenda_fortify_the_imperial_border_modifier
			duration = 3650
		}
	}
	hidden_effect = {
		clear_global_event_target = fortify_the_imperial_border_province
		clear_flags_for_imperial_agenda = { agenda = fortify_the_imperial_border }
	}
}

## rival_imperial_enemy
set_up_imperial_agenda_rival_imperial_enemy = {
	random_known_country = {
		limit = {
			NOT = { tag = ROOT }
			is_subject = no
			is_part_of_hre = no
			NOT = { is_enemy = ROOT }
			NOT = { alliance_with = ROOT }
			military_strength = { who = ROOT value = 0.5 }
			NOT = { military_strength = { who = ROOT value = 1.5 } }
			NOT = {
				border_distance = {
					who = ROOT
					distance = 130
				}
			}
			variable_arithmetic_trigger = {
				export_to_variable = {
					which = lowest_required_dev
					value = trigger_value:total_development
					who = ROOT
				}
				export_to_variable = {
					which = highest_required_dev
					value = trigger_value:total_development
					who = ROOT
				}
				export_to_variable = {
					which = their_dev
					value = trigger_value:total_development
				}
				change_variable = { which = lowest_required_dev value = -100 }
				change_variable = { which = highest_required_dev value = 100 }
				check_variable = { which = their_dev which = lowest_required_dev }
				NOT = { check_variable = { which = their_dev which = highest_required_dev } }
			}
			any_neighbor_country = {
				is_part_of_hre = yes
			}
		}
		save_global_event_target_as = rival_imperial_enemy_country
	}
}
select_imperial_agenda_rival_imperial_enemy = {
	# No Effect
}
clear_imperial_agenda_rival_imperial_enemy = {
	clear_set_up_flags_for_imperial_agenda = { agenda = rival_imperial_enemy }
	if = {
		limit = {
			NOT = { has_imperial_agenda_selected = { agenda = rival_imperial_enemy } }
		}
		clear_global_event_target = rival_imperial_enemy_country
	}
}
complete_imperial_agenda_rival_imperial_enemy = {
	hidden_effect = {
		remove_country_modifier = complete_imperial_agenda_rival_imperial_enemy_modifier
	}
	add_country_modifier = {
		name = complete_imperial_agenda_rival_imperial_enemy_modifier
		duration = 3650
	}
	every_country = {
		limit = {
			is_part_of_hre = yes
			is_neighbor_of = event_target:rival_imperial_enemy_country
		}
		add_opinion = {
			who = ROOT
			modifier = imperial_agenda_opinion_rival_imperial_enemy
		}
	}
	hidden_effect = {
		clear_global_event_target = rival_imperial_enemy_country
		clear_flags_for_imperial_agenda = { agenda = rival_imperial_enemy }
	}
}
fail_imperial_agenda_rival_imperial_enemy = {
	add_imperial_influence = -5
	every_country = {
		limit = {
			is_part_of_hre = yes
			is_neighbor_of = event_target:rival_imperial_enemy_country
		}
		add_opinion = {
			who = ROOT
			modifier = imperial_agenda_opinion_rival_imperial_enemy_negative
		}
	}
	hidden_effect = {
		clear_global_event_target = rival_imperial_enemy_country
		clear_flags_for_imperial_agenda = { agenda = rival_imperial_enemy }
	}
}

## marry_3_electors
set_up_imperial_agenda_marry_3_electors = {
	# No Effect
}
select_imperial_agenda_marry_3_electors = {
	every_elector = {
		limit = {
			NOT = { marriage_with = ROOT }
		}
		set_country_flag = was_not_married_to_emperor
	}
}
clear_imperial_agenda_marry_3_electors = {
	clear_set_up_flags_for_imperial_agenda = { agenda = marry_3_electors }
}
complete_imperial_agenda_marry_3_electors = {
	hidden_effect = {
		remove_country_modifier = complete_imperial_agenda_marry_3_electors_modifier
	}
	add_country_modifier = {
		name = complete_imperial_agenda_marry_3_electors_modifier
		duration = 3650
	}
	custom_tooltip = complete_imperial_agenda_marry_3_electors_tt
	hidden_effect = {
		every_elector = {
			limit = {
				has_country_flag = was_not_married_to_emperor
				marriage_with = ROOT
			}
			add_opinion = {
				who = ROOT
				modifier = imperial_agenda_opinion_marry_3_electors
			}
		}
		every_country = {
			limit = {
				has_country_flag = was_not_married_to_emperor
			}
			clr_country_flag = was_not_married_to_emperor
		}
		clear_flags_for_imperial_agenda = { agenda = marry_3_electors }
	}
}
fail_imperial_agenda_marry_3_electors = {
	hidden_effect = {
		remove_country_modifier = fail_imperial_agenda_marry_3_electors_modifier
	}
	add_country_modifier = {
		name = fail_imperial_agenda_marry_3_electors_modifier
		duration = 3650
	}
	hidden_effect = {
		every_country = {
			limit = {
				has_country_flag = was_not_married_to_emperor
			}
			clr_country_flag = was_not_married_to_emperor
		}
		clear_flags_for_imperial_agenda = { agenda = marry_3_electors }
	}
}

## reconquest_of_rome
set_up_imperial_agenda_reconquest_of_rome = {
	118 = {
		save_event_target_as = reconquest_of_rome_province
		save_global_event_target_as = reconquest_of_rome_province
	}
}
select_imperial_agenda_reconquest_of_rome = {
	event_target:reconquest_of_rome_province = {
		if = {
			limit = {
				NOT = { is_permanent_claim = ROOT }
				NOT = { is_core = ROOT }
			}
			add_claim = ROOT
		}
	}
}
clear_imperial_agenda_reconquest_of_rome = {
	clear_set_up_flags_for_imperial_agenda = { agenda = reconquest_of_rome }
	if = {
		limit = {
			NOT = { has_imperial_agenda_selected = { agenda = reconquest_of_rome } }
		}
		clear_global_event_target = reconquest_of_rome_province
	}
}
complete_imperial_agenda_reconquest_of_rome = {
	add_papal_influence = 20
	hidden_effect = {
		remove_country_modifier = complete_imperial_agenda_reconquest_of_rome_modifier
	}
	add_country_modifier = {
		name = complete_imperial_agenda_reconquest_of_rome_modifier
		duration = 3650
	}
	hidden_effect = {
		event_target:reconquest_of_rome_province = {
			if = {
				limit = {
					is_claim = ROOT
					NOT = { is_permanent_claim = ROOT }
				}
				remove_claim = ROOT
			}
		}
		clear_global_event_target = reconquest_of_rome_province
		clear_flags_for_imperial_agenda = { agenda = reconquest_of_rome }
	}
}
fail_imperial_agenda_reconquest_of_rome = {
	add_papal_influence = -20
	hidden_effect = {
		remove_country_modifier = fail_imperial_agenda_reconquest_of_rome_modifier
	}
	add_country_modifier = {
		name = fail_imperial_agenda_reconquest_of_rome_modifier
		duration = 3650
	}
	hidden_effect = {
		event_target:reconquest_of_rome_province = {
			if = {
				limit = {
					is_claim = ROOT
					NOT = { is_permanent_claim = ROOT }
				}
				remove_claim = ROOT
			}
		}
		clear_global_event_target = reconquest_of_rome_province
		clear_flags_for_imperial_agenda = { agenda = reconquest_of_rome }
	}
}

## conquest_of_rome
set_up_imperial_agenda_conquest_of_rome = {
	118 = {
		save_event_target_as = conquest_of_rome_province
		save_global_event_target_as = conquest_of_rome_province
	}
}
select_imperial_agenda_conquest_of_rome = {
	event_target:conquest_of_rome_province = {
		if = {
			limit = {
				NOT = { is_permanent_claim = ROOT }
				NOT = { is_core = ROOT }
			}
			add_claim = ROOT
		}
	}
}
clear_imperial_agenda_conquest_of_rome = {
	clear_set_up_flags_for_imperial_agenda = { agenda = conquest_of_rome }
	if = {
		limit = {
			NOT = { has_imperial_agenda_selected = { agenda = conquest_of_rome } }
		}
		clear_global_event_target = conquest_of_rome_province
	}
}
complete_imperial_agenda_conquest_of_rome = {
	event_target:conquest_of_rome_province = {
		tooltip = {
			add_province_modifier = {
				name = complete_imperial_agenda_conquest_of_rome_modifier
				duration = -1
				desc = IMPERIAL_AGENDA_MODIFIER_ACTIVE_AS_LONG_AS_UNDER_CATHOLIC_EMPEROR_CONTROL
			}
		}
	}
	hidden_effect = {
		event_target:conquest_of_rome_province = {
			add_province_triggered_modifier = complete_imperial_agenda_conquest_of_rome_triggered_modifier
			if = {
				limit = {
					is_claim = ROOT
					NOT = { is_permanent_claim = ROOT }
				}
				remove_claim = ROOT
			}
		}
		clear_global_event_target = conquest_of_rome_province
		clear_flags_for_imperial_agenda = { agenda = conquest_of_rome }
	}
}
fail_imperial_agenda_conquest_of_rome = {
	add_imperial_influence = -20
	every_elector = {
		limit = {
			religion = catholic
		}
		add_opinion = {
			who = ROOT
			modifier = imperial_agenda_opinion_conquest_of_rome
		}
	}
	hidden_effect = {
		event_target:conquest_of_rome_province = {
			if = {
				limit = {
					is_claim = ROOT
					NOT = { is_permanent_claim = ROOT }
				}
				remove_claim = ROOT
			}
		}
		clear_global_event_target = conquest_of_rome_province
		clear_flags_for_imperial_agenda = { agenda = conquest_of_rome }
	}
}

## improve_opinion_with_all_electors
set_up_imperial_agenda_improve_opinion_with_all_electors = {
	# No Effects
}
select_imperial_agenda_improve_opinion_with_all_electors = {
	# No Effects
}
clear_imperial_agenda_improve_opinion_with_all_electors = {
	clear_set_up_flags_for_imperial_agenda = { agenda = improve_opinion_with_all_electors }
}
complete_imperial_agenda_improve_opinion_with_all_electors = {
	hidden_effect = {
		set_ruler_flag = complete_imperial_agenda_improve_opinion_with_all_electors_flag
		if = {
			limit = {
				has_regency = yes
				has_heir = yes
			}
			set_heir_flag = complete_imperial_agenda_improve_opinion_with_all_electors_flag
		}
		remove_country_modifier = complete_imperial_agenda_improve_opinion_with_all_electors_modifier
	}
	add_ruler_modifier = {
		name = complete_imperial_agenda_improve_opinion_with_all_electors_modifier
		duration = -1
	}
	hidden_effect = {
		country_event = { id = besseres_hrr_imperial_agenda_events.6 }
		clear_flags_for_imperial_agenda = { agenda = improve_opinion_with_all_electors }
	}
}
fail_imperial_agenda_improve_opinion_with_all_electors = {
	imperial_agenda_generic_fail_effect = yes
	hidden_effect = {
		clear_flags_for_imperial_agenda = { agenda = improve_opinion_with_all_electors }
	}
}

# make_x_an_elector
set_up_imperial_agenda_make_x_an_elector = {
	random_country = {
		limit = {
			is_valid_elector = yes
		}
		save_global_event_target_as = make_x_an_elector_country
	}
}
select_imperial_agenda_make_x_an_elector = {
	# No Effect
}
clear_imperial_agenda_make_x_an_elector = {
	clear_set_up_flags_for_imperial_agenda = { agenda = make_x_an_elector }
	if = {
		limit = {
			NOT = { has_imperial_agenda_selected = { agenda = make_x_an_elector } }
		}
		clear_global_event_target = make_x_an_elector_country
	}
}
complete_imperial_agenda_make_x_an_elector = {
	add_imperial_influence = 5
	event_target:make_x_an_elector_country = {
		add_trust = {
			who = ROOT
			value = 10
			mutual = yes
		}
		add_opinion = {
			who = ROOT
			modifier = imperial_agenda_opinion_make_x_an_elector
		}
	}
	hidden_effect = {
		clear_flags_for_imperial_agenda = { agenda = make_x_an_elector }
		clear_global_event_target = make_x_an_elector_country
	}
}
fail_imperial_agenda_make_x_an_elector = {
	imperial_agenda_generic_fail_effect = yes
	hidden_effect = {
		clear_flags_for_imperial_agenda = { agenda = make_x_an_elector }
		clear_global_event_target = make_x_an_elector_country
	}
}

# make_x_a_free_city
set_up_imperial_agenda_make_x_a_free_city = {
	random_country = {
		limit = {
			is_valid_free_city = yes
		}
		save_global_event_target_as = make_x_a_free_city_country
		capital_scope = {
			save_event_target_as = make_x_a_free_city_province
			save_global_event_target_as = make_x_a_free_city_province
		}
	}
}
select_imperial_agenda_make_x_a_free_city = {
	# No Effect
}
clear_imperial_agenda_make_x_a_free_city = {
	clear_set_up_flags_for_imperial_agenda = { agenda = make_x_a_free_city }
	if = {
		limit = {
			NOT = { has_imperial_agenda_selected = { agenda = make_x_a_free_city } }
		}
		clear_global_event_target = make_x_a_free_city_country
		clear_global_event_target = make_x_a_free_city_province
	}
}
complete_imperial_agenda_make_x_a_free_city = {
	hidden_effect = {
		remove_country_modifier = complete_imperial_agenda_make_x_a_free_city_modifier
	}
	add_country_modifier = {
		name = complete_imperial_agenda_make_x_a_free_city_modifier
		duration = 5475
	}
	hidden_effect = {
		clear_flags_for_imperial_agenda = { agenda = make_x_a_free_city }
		clear_global_event_target = make_x_a_free_city_country
		clear_global_event_target = make_x_a_free_city_province
	}
}
fail_imperial_agenda_make_x_a_free_city = {
	add_imperial_influence = -5
	event_target:make_x_a_free_city_country = {
		add_trust = {
			who = ROOT
			value = -10
			mutual = yes
		}
		add_opinion = {
			who = ROOT
			modifier = imperial_agenda_failed_opinion
		}
	}
	hidden_effect = {
		clear_flags_for_imperial_agenda = { agenda = make_x_a_free_city }
		clear_global_event_target = make_x_a_free_city_country
		clear_global_event_target = make_x_a_free_city_province
	}
}

# template
#set_up_imperial_agenda_ = {
#
#}
#select_imperial_agenda_ = {
#
#}
#clear_imperial_agenda_ = {
#	clear_set_up_flags_for_imperial_agenda = { agenda = X }
#}
#complete_imperial_agenda_ = {
#	hidden_effect = {
#		clear_flags_for_imperial_agenda = { agenda = X }
#	}
#}
#fail_imperial_agenda_ = {
#	hidden_effect = {
#		clear_flags_for_imperial_agenda = { agenda = X }
#	}
#}
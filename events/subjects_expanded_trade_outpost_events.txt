namespace = subjects_expanded_trade_outpost_events

country_event = {
	id = subjects_expanded_trade_outpost_events.1
	title = subjects_expanded_trade_outpost_events.EVTNAME1
	desc = subjects_expanded_trade_outpost_events.EVTDESC1
	picture = CITY_VIEW_eventPicture
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					is_in_selected_trade_outpost_region_or_area = yes
					has_port = yes
					development = 30
					NOT = { has_province_flag = already_rejected_trade_outpost_province_@ROOT }
					NOT = { province_id = event_target:trade_outpost_province_1 }
					NOT = { province_id = event_target:trade_outpost_province_2 }
					NOT = { province_id = event_target:trade_outpost_province_3 }
					NOT = { province_id = event_target:trade_outpost_province_4 }
					NOT = { province_id = event_target:trade_outpost_province_5 }
					OR = {
						REB = {
							NOT = { check_variable = { which = num_of_autonomy_civil_wars value = 100 } }
						}
						any_core_country = {
							exists = no
						}
					}
				}
				save_event_target_as = trade_outpost_province_1
				if = {
					limit = {
						any_core_country = {
							exists = no
						}
					}
					set_province_flag = trade_outpost_province_release_core_country_@ROOT
					random_core_country = {
						limit = {
							exists = no
						}
						save_event_target_as = trade_outpost_province_1_core_country
					}
				}
			}
			random_owned_province = {
				limit = {
					is_in_selected_trade_outpost_region_or_area = yes
					has_port = yes
					development = 30
					NOT = { has_province_flag = already_rejected_trade_outpost_province_@ROOT }
					NOT = { province_id = event_target:trade_outpost_province_1 }
					NOT = { province_id = event_target:trade_outpost_province_2 }
					NOT = { province_id = event_target:trade_outpost_province_3 }
					NOT = { province_id = event_target:trade_outpost_province_4 }
					NOT = { province_id = event_target:trade_outpost_province_5 }
					OR = {
						REB = {
							NOT = { check_variable = { which = num_of_autonomy_civil_wars value = 100 } }
						}
						any_core_country = {
							exists = no
						}
					}
				}
				save_event_target_as = trade_outpost_province_2
				if = {
					limit = {
						any_core_country = {
							exists = no
						}
					}
					set_province_flag = trade_outpost_province_release_core_country_@ROOT
					random_core_country = {
						limit = {
							exists = no
						}
						save_event_target_as = trade_outpost_province_2_core_country
					}
				}
			}
			random_owned_province = {
				limit = {
					is_in_selected_trade_outpost_region_or_area = yes
					has_port = yes
					development = 30
					NOT = { has_province_flag = already_rejected_trade_outpost_province_@ROOT }
					NOT = { province_id = event_target:trade_outpost_province_1 }
					NOT = { province_id = event_target:trade_outpost_province_2 }
					NOT = { province_id = event_target:trade_outpost_province_3 }
					NOT = { province_id = event_target:trade_outpost_province_4 }
					NOT = { province_id = event_target:trade_outpost_province_5 }
					OR = {
						REB = {
							NOT = { check_variable = { which = num_of_autonomy_civil_wars value = 100 } }
						}
						any_core_country = {
							exists = no
						}
					}
				}
				save_event_target_as = trade_outpost_province_3
				if = {
					limit = {
						any_core_country = {
							exists = no
						}
					}
					set_province_flag = trade_outpost_province_release_core_country_@ROOT
					random_core_country = {
						limit = {
							exists = no
						}
						save_event_target_as = trade_outpost_province_3_core_country
					}
				}
			}
			random_owned_province = {
				limit = {
					is_in_selected_trade_outpost_region_or_area = yes
					has_port = yes
					development = 30
					NOT = { has_province_flag = already_rejected_trade_outpost_province_@ROOT }
					NOT = { province_id = event_target:trade_outpost_province_1 }
					NOT = { province_id = event_target:trade_outpost_province_2 }
					NOT = { province_id = event_target:trade_outpost_province_3 }
					NOT = { province_id = event_target:trade_outpost_province_4 }
					NOT = { province_id = event_target:trade_outpost_province_5 }
					OR = {
						REB = {
							NOT = { check_variable = { which = num_of_autonomy_civil_wars value = 100 } }
						}
						any_core_country = {
							exists = no
						}
					}
				}
				save_event_target_as = trade_outpost_province_4
				if = {
					limit = {
						any_core_country = {
							exists = no
						}
					}
					set_province_flag = trade_outpost_province_release_core_country_@ROOT
					random_core_country = {
						limit = {
							exists = no
						}
						save_event_target_as = trade_outpost_province_4_core_country
					}
				}
			}
			random_owned_province = {
				limit = {
					is_in_selected_trade_outpost_region_or_area = yes
					has_port = yes
					development = 30
					NOT = { has_province_flag = already_rejected_trade_outpost_province_@ROOT }
					NOT = { province_id = event_target:trade_outpost_province_1 }
					NOT = { province_id = event_target:trade_outpost_province_2 }
					NOT = { province_id = event_target:trade_outpost_province_3 }
					NOT = { province_id = event_target:trade_outpost_province_4 }
					NOT = { province_id = event_target:trade_outpost_province_5 }
					OR = {
						REB = {
							NOT = { check_variable = { which = num_of_autonomy_civil_wars value = 100 } }
						}
						any_core_country = {
							exists = no
						}
					}
				}
				save_event_target_as = trade_outpost_province_5
				if = {
					limit = {
						any_core_country = {
							exists = no
						}
					}
					set_province_flag = trade_outpost_province_release_core_country_@ROOT
					random_core_country = {
						limit = {
							exists = no
						}
						save_event_target_as = trade_outpost_province_5_core_country
					}
				}
			}
		}
	}
	
	option = {
		name = subjects_expanded_trade_outpost_events1.EVTOPT1
		
		trigger = {
			event_target:trade_outpost_province_1 = {
				owned_by = ROOT
				NOT = { has_province_flag = already_rejected_trade_outpost_province_@ROOT }
			}
		}
		
		ai_chance = { factor = 100 }
		
		add_treasury = -3000
		if = {
			limit = {
				event_target:trade_outpost_province_1 = {
					has_province_flag = trade_outpost_province_release_core_country_@ROOT
				}
			}
			event_target:trade_outpost_province_1_core_country = {
				event_target:trade_outpost_province_1 = { cede_province = PREV }
				ROOT = {
					create_subject = {
						subject = PREV
						subject_type = trade_outpost
					}
				}
				add_truce_with = ROOT
			}
		}
		else = {
			event_target:trade_outpost_province_1 = {
				custom_tooltip = RELEASE_TRADE_OUTPOST_IN_THIS_PROVINCE
			}
			hidden_effect = {
				set_country_flag = is_releasing_trade_outpost
				event_target:trade_outpost_province_1 = {
					set_province_flag = release_trade_outpost_here_@ROOT
					set_estate = trade_outpost_release_estate
				}
				create_independent_estate = { estate = trade_outpost_release_estate government = republic government_reform = noble_elite_reform }
				event_target:trade_outpost_province_1 = {
					if = {
						limit = {
							has_estate = trade_outpost_release_estate
						}
						remove_estate = trade_outpost_release_estate
					}
					clr_province_flag = release_trade_outpost_here_@ROOT
					owner = {
						ROOT = {
							create_subject = {
								subject = PREV
								subject_type = trade_outpost
							}
						}
						add_truce_with = ROOT
					}
				}
				clr_country_flag = is_releasing_trade_outpost
				REB = {
					change_variable = { which = num_of_autonomy_civil_wars value = 1 }
				}
			}
		}
		
		hidden_effect = {
			event_target:trade_outpost_province_1 = {
				if = {
					limit = {
						is_core = ROOT
					}
					remove_core = ROOT
				}
			}
			clear_selected_trade_outpost_region_or_area = yes
			every_province = {
				limit = {
					has_province_flag = already_rejected_trade_outpost_province_@ROOT
				}
				clr_province_flag = already_rejected_trade_outpost_province_@ROOT
			}
			every_province = {
				limit = {
					has_province_flag = trade_outpost_province_release_core_country_@ROOT
				}
				clr_province_flag = trade_outpost_province_release_core_country_@ROOT
			}
		}
	}
	
	option = {
		name = subjects_expanded_trade_outpost_events1.EVTOPT2
		
		trigger = {
			event_target:trade_outpost_province_2 = {
				owned_by = ROOT
				NOT = { has_province_flag = already_rejected_trade_outpost_province_@ROOT }
			}
		}
		
		ai_chance = { factor = 100 }
		
		add_treasury = -3000
		if = {
			limit = {
				event_target:trade_outpost_province_2 = {
					has_province_flag = trade_outpost_province_release_core_country_@ROOT
				}
			}
			event_target:trade_outpost_province_2_core_country = {
				event_target:trade_outpost_province_2 = { cede_province = PREV }
				ROOT = {
					create_subject = {
						subject = PREV
						subject_type = trade_outpost
					}
				}
				add_truce_with = ROOT
			}
		}
		else = {
			event_target:trade_outpost_province_2 = {
				custom_tooltip = RELEASE_TRADE_OUTPOST_IN_THIS_PROVINCE
			}
			hidden_effect = {
				set_country_flag = is_releasing_trade_outpost
				event_target:trade_outpost_province_2 = {
					set_province_flag = release_trade_outpost_here_@ROOT
					set_estate = trade_outpost_release_estate
				}
				create_independent_estate = { estate = trade_outpost_release_estate government = republic government_reform = noble_elite_reform }
				event_target:trade_outpost_province_2 = {
					if = {
						limit = {
							has_estate = trade_outpost_release_estate
						}
						remove_estate = trade_outpost_release_estate
					}
					clr_province_flag = release_trade_outpost_here_@ROOT
					owner = {
						ROOT = {
							create_subject = {
								subject = PREV
								subject_type = trade_outpost
							}
						}
						add_truce_with = ROOT
					}
				}
				clr_country_flag = is_releasing_trade_outpost
				REB = {
					change_variable = { which = num_of_autonomy_civil_wars value = 1 }
				}
			}
		}
		
		hidden_effect = {
			event_target:trade_outpost_province_2 = {
				if = {
					limit = {
						is_core = ROOT
					}
					remove_core = ROOT
				}
			}
			clear_selected_trade_outpost_region_or_area = yes
			every_province = {
				limit = {
					has_province_flag = already_rejected_trade_outpost_province_@ROOT
				}
				clr_province_flag = already_rejected_trade_outpost_province_@ROOT
			}
			every_province = {
				limit = {
					has_province_flag = trade_outpost_province_release_core_country_@ROOT
				}
				clr_province_flag = trade_outpost_province_release_core_country_@ROOT
			}
		}
	}
	
	option = {
		name = subjects_expanded_trade_outpost_events1.EVTOPT3
		
		trigger = {
			event_target:trade_outpost_province_3 = {
				owned_by = ROOT
				NOT = { has_province_flag = already_rejected_trade_outpost_province_@ROOT }
			}
		}
		
		ai_chance = { factor = 100 }
		
		add_treasury = -3000
		if = {
			limit = {
				event_target:trade_outpost_province_3 = {
					has_province_flag = trade_outpost_province_release_core_country_@ROOT
				}
			}
			event_target:trade_outpost_province_3_core_country = {
				event_target:trade_outpost_province_3 = { cede_province = PREV }
				ROOT = {
					create_subject = {
						subject = PREV
						subject_type = trade_outpost
					}
				}
				add_truce_with = ROOT
			}
		}
		else = {
			event_target:trade_outpost_province_3 = {
				custom_tooltip = RELEASE_TRADE_OUTPOST_IN_THIS_PROVINCE
			}
			hidden_effect = {
				set_country_flag = is_releasing_trade_outpost
				event_target:trade_outpost_province_3 = {
					set_province_flag = release_trade_outpost_here_@ROOT
					set_estate = trade_outpost_release_estate
				}
				create_independent_estate = { estate = trade_outpost_release_estate government = republic government_reform = noble_elite_reform }
				event_target:trade_outpost_province_3 = {
					if = {
						limit = {
							has_estate = trade_outpost_release_estate
						}
						remove_estate = trade_outpost_release_estate
					}
					clr_province_flag = release_trade_outpost_here_@ROOT
					owner = {
						ROOT = {
							create_subject = {
								subject = PREV
								subject_type = trade_outpost
							}
						}
						add_truce_with = ROOT
					}
				}
				clr_country_flag = is_releasing_trade_outpost
				REB = {
					change_variable = { which = num_of_autonomy_civil_wars value = 1 }
				}
			}
		}
		
		hidden_effect = {
			event_target:trade_outpost_province_3 = {
				if = {
					limit = {
						is_core = ROOT
					}
					remove_core = ROOT
				}
			}
			clear_selected_trade_outpost_region_or_area = yes
			every_province = {
				limit = {
					has_province_flag = already_rejected_trade_outpost_province_@ROOT
				}
				clr_province_flag = already_rejected_trade_outpost_province_@ROOT
			}
			every_province = {
				limit = {
					has_province_flag = trade_outpost_province_release_core_country_@ROOT
				}
				clr_province_flag = trade_outpost_province_release_core_country_@ROOT
			}
		}
	}
	
	option = {
		name = subjects_expanded_trade_outpost_events1.EVTOPT4
		
		trigger = {
			event_target:trade_outpost_province_4 = {
				owned_by = ROOT
				NOT = { has_province_flag = already_rejected_trade_outpost_province_@ROOT }
			}
		}
		
		ai_chance = { factor = 100 }
		
		add_treasury = -3000
		if = {
			limit = {
				event_target:trade_outpost_province_4 = {
					has_province_flag = trade_outpost_province_release_core_country_@ROOT
				}
			}
			event_target:trade_outpost_province_4_core_country = {
				event_target:trade_outpost_province_4 = { cede_province = PREV }
				ROOT = {
					create_subject = {
						subject = PREV
						subject_type = trade_outpost
					}
				}
				add_truce_with = ROOT
			}
		}
		else = {
			event_target:trade_outpost_province_4 = {
				custom_tooltip = RELEASE_TRADE_OUTPOST_IN_THIS_PROVINCE
			}
			hidden_effect = {
				set_country_flag = is_releasing_trade_outpost
				event_target:trade_outpost_province_4 = {
					set_province_flag = release_trade_outpost_here_@ROOT
					set_estate = trade_outpost_release_estate
				}
				create_independent_estate = { estate = trade_outpost_release_estate government = republic government_reform = noble_elite_reform }
				event_target:trade_outpost_province_4 = {
					if = {
						limit = {
							has_estate = trade_outpost_release_estate
						}
						remove_estate = trade_outpost_release_estate
					}
					clr_province_flag = release_trade_outpost_here_@ROOT
					owner = {
						ROOT = {
							create_subject = {
								subject = PREV
								subject_type = trade_outpost
							}
						}
						add_truce_with = ROOT
					}
				}
				clr_country_flag = is_releasing_trade_outpost
				REB = {
					change_variable = { which = num_of_autonomy_civil_wars value = 1 }
				}
			}
		}
		
		hidden_effect = {
			event_target:trade_outpost_province_4 = {
				if = {
					limit = {
						is_core = ROOT
					}
					remove_core = ROOT
				}
			}
			clear_selected_trade_outpost_region_or_area = yes
			every_province = {
				limit = {
					has_province_flag = already_rejected_trade_outpost_province_@ROOT
				}
				clr_province_flag = already_rejected_trade_outpost_province_@ROOT
			}
			every_province = {
				limit = {
					has_province_flag = trade_outpost_province_release_core_country_@ROOT
				}
				clr_province_flag = trade_outpost_province_release_core_country_@ROOT
			}
		}
	}
	
	option = {
		name = subjects_expanded_trade_outpost_events1.EVTOPT5
		
		trigger = {
			event_target:trade_outpost_province_5 = {
				owned_by = ROOT
				NOT = { has_province_flag = already_rejected_trade_outpost_province_@ROOT }
			}
		}
		
		ai_chance = { factor = 100 }
		
		add_treasury = -3000
		if = {
			limit = {
				event_target:trade_outpost_province_5 = {
					has_province_flag = trade_outpost_province_release_core_country_@ROOT
				}
			}
			event_target:trade_outpost_province_5_core_country = {
				event_target:trade_outpost_province_5 = { cede_province = PREV }
				ROOT = {
					create_subject = {
						subject = PREV
						subject_type = trade_outpost
					}
				}
				add_truce_with = ROOT
			}
		}
		else = {
			event_target:trade_outpost_province_5 = {
				custom_tooltip = RELEASE_TRADE_OUTPOST_IN_THIS_PROVINCE
			}
			hidden_effect = {
				set_country_flag = is_releasing_trade_outpost
				event_target:trade_outpost_province_5 = {
					set_province_flag = release_trade_outpost_here_@ROOT
					set_estate = trade_outpost_release_estate
				}
				create_independent_estate = { estate = trade_outpost_release_estate government = republic government_reform = noble_elite_reform }
				event_target:trade_outpost_province_5 = {
					if = {
						limit = {
							has_estate = trade_outpost_release_estate
						}
						remove_estate = trade_outpost_release_estate
					}
					clr_province_flag = release_trade_outpost_here_@ROOT
					owner = {
						ROOT = {
							create_subject = {
								subject = PREV
								subject_type = trade_outpost
							}
						}
						add_truce_with = ROOT
					}
				}
				clr_country_flag = is_releasing_trade_outpost
				REB = {
					change_variable = { which = num_of_autonomy_civil_wars value = 1 }
				}
			}
		}
		
		hidden_effect = {
			event_target:trade_outpost_province_5 = {
				if = {
					limit = {
						is_core = ROOT
					}
					remove_core = ROOT
				}
			}
			clear_selected_trade_outpost_region_or_area = yes
			every_province = {
				limit = {
					has_province_flag = already_rejected_trade_outpost_province_@ROOT
				}
				clr_province_flag = already_rejected_trade_outpost_province_@ROOT
			}
			every_province = {
				limit = {
					has_province_flag = trade_outpost_province_release_core_country_@ROOT
				}
				clr_province_flag = trade_outpost_province_release_core_country_@ROOT
			}
		}
	}
	
	option = {
		name = subjects_expanded_trade_outpost_events1.EVTOPT6
		
		trigger = {
			any_owned_province = {
				is_in_selected_trade_outpost_region_or_area = yes
				has_port = yes
				development = 30
				NOT = { has_province_flag = already_rejected_trade_outpost_province_@ROOT }
				NOT = { province_id = event_target:trade_outpost_province_1 }
				NOT = { province_id = event_target:trade_outpost_province_2 }
				NOT = { province_id = event_target:trade_outpost_province_3 }
				NOT = { province_id = event_target:trade_outpost_province_4 }
				NOT = { province_id = event_target:trade_outpost_province_5 }
				OR = {
					REB = {
						NOT = { check_variable = { which = num_of_autonomy_civil_wars value = 100 } }
					}
					any_core_country = {
						exists = no
					}
				}
			}
		}
		
		ai_chance = { factor = 0 }
		
		country_event = { id = subjects_expanded_trade_outpost_events.2 }
		
		hidden_effect = {
			event_target:trade_outpost_province_1 = {
				set_province_flag = already_rejected_trade_outpost_province_@ROOT
			}
			event_target:trade_outpost_province_2 = {
				set_province_flag = already_rejected_trade_outpost_province_@ROOT
			}
			event_target:trade_outpost_province_3 = {
				set_province_flag = already_rejected_trade_outpost_province_@ROOT
			}
			event_target:trade_outpost_province_4 = {
				set_province_flag = already_rejected_trade_outpost_province_@ROOT
			}
			event_target:trade_outpost_province_5 = {
				set_province_flag = already_rejected_trade_outpost_province_@ROOT
			}
		}
	}
	
	option = {
		name = subjects_expanded_trade_outpost_events1.EVTOPT7
		
		ai_chance = { factor = 1 }
		
		hidden_effect = {
			clear_selected_trade_outpost_region_or_area = yes
			every_province = {
				limit = {
					has_province_flag = already_rejected_trade_outpost_province_@ROOT
				}
				clr_province_flag = already_rejected_trade_outpost_province_@ROOT
			}
			every_province = {
				limit = {
					has_province_flag = trade_outpost_province_release_core_country_@ROOT
				}
				clr_province_flag = trade_outpost_province_release_core_country_@ROOT
			}
		}
	}
}

country_event = {
	id = subjects_expanded_trade_outpost_events.2
	title = subjects_expanded_trade_outpost_events.EVTNAME1
	desc = subjects_expanded_trade_outpost_events.EVTDESC1
	picture = CITY_VIEW_eventPicture
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					is_in_selected_trade_outpost_region_or_area = yes
					has_port = yes
					development = 30
					NOT = { has_province_flag = already_rejected_trade_outpost_province_@ROOT }
					NOT = { province_id = event_target:trade_outpost_province_1 }
					NOT = { province_id = event_target:trade_outpost_province_2 }
					NOT = { province_id = event_target:trade_outpost_province_3 }
					NOT = { province_id = event_target:trade_outpost_province_4 }
					NOT = { province_id = event_target:trade_outpost_province_5 }
					OR = {
						REB = {
							NOT = { check_variable = { which = num_of_autonomy_civil_wars value = 100 } }
						}
						any_core_country = {
							exists = no
						}
					}
				}
				save_event_target_as = trade_outpost_province_1
				if = {
					limit = {
						any_core_country = {
							exists = no
						}
					}
					set_province_flag = trade_outpost_province_release_core_country_@ROOT
					random_core_country = {
						limit = {
							exists = no
						}
						save_event_target_as = trade_outpost_province_1_core_country
					}
				}
			}
			random_owned_province = {
				limit = {
					is_in_selected_trade_outpost_region_or_area = yes
					has_port = yes
					development = 30
					NOT = { has_province_flag = already_rejected_trade_outpost_province_@ROOT }
					NOT = { province_id = event_target:trade_outpost_province_1 }
					NOT = { province_id = event_target:trade_outpost_province_2 }
					NOT = { province_id = event_target:trade_outpost_province_3 }
					NOT = { province_id = event_target:trade_outpost_province_4 }
					NOT = { province_id = event_target:trade_outpost_province_5 }
					OR = {
						REB = {
							NOT = { check_variable = { which = num_of_autonomy_civil_wars value = 100 } }
						}
						any_core_country = {
							exists = no
						}
					}
				}
				save_event_target_as = trade_outpost_province_2
				if = {
					limit = {
						any_core_country = {
							exists = no
						}
					}
					set_province_flag = trade_outpost_province_release_core_country_@ROOT
					random_core_country = {
						limit = {
							exists = no
						}
						save_event_target_as = trade_outpost_province_2_core_country
					}
				}
			}
			random_owned_province = {
				limit = {
					is_in_selected_trade_outpost_region_or_area = yes
					has_port = yes
					development = 30
					NOT = { has_province_flag = already_rejected_trade_outpost_province_@ROOT }
					NOT = { province_id = event_target:trade_outpost_province_1 }
					NOT = { province_id = event_target:trade_outpost_province_2 }
					NOT = { province_id = event_target:trade_outpost_province_3 }
					NOT = { province_id = event_target:trade_outpost_province_4 }
					NOT = { province_id = event_target:trade_outpost_province_5 }
					OR = {
						REB = {
							NOT = { check_variable = { which = num_of_autonomy_civil_wars value = 100 } }
						}
						any_core_country = {
							exists = no
						}
					}
				}
				save_event_target_as = trade_outpost_province_3
				if = {
					limit = {
						any_core_country = {
							exists = no
						}
					}
					set_province_flag = trade_outpost_province_release_core_country_@ROOT
					random_core_country = {
						limit = {
							exists = no
						}
						save_event_target_as = trade_outpost_province_3_core_country
					}
				}
			}
			random_owned_province = {
				limit = {
					is_in_selected_trade_outpost_region_or_area = yes
					has_port = yes
					development = 30
					NOT = { has_province_flag = already_rejected_trade_outpost_province_@ROOT }
					NOT = { province_id = event_target:trade_outpost_province_1 }
					NOT = { province_id = event_target:trade_outpost_province_2 }
					NOT = { province_id = event_target:trade_outpost_province_3 }
					NOT = { province_id = event_target:trade_outpost_province_4 }
					NOT = { province_id = event_target:trade_outpost_province_5 }
					OR = {
						REB = {
							NOT = { check_variable = { which = num_of_autonomy_civil_wars value = 100 } }
						}
						any_core_country = {
							exists = no
						}
					}
				}
				save_event_target_as = trade_outpost_province_4
				if = {
					limit = {
						any_core_country = {
							exists = no
						}
					}
					set_province_flag = trade_outpost_province_release_core_country_@ROOT
					random_core_country = {
						limit = {
							exists = no
						}
						save_event_target_as = trade_outpost_province_4_core_country
					}
				}
			}
			random_owned_province = {
				limit = {
					is_in_selected_trade_outpost_region_or_area = yes
					has_port = yes
					development = 30
					NOT = { has_province_flag = already_rejected_trade_outpost_province_@ROOT }
					NOT = { province_id = event_target:trade_outpost_province_1 }
					NOT = { province_id = event_target:trade_outpost_province_2 }
					NOT = { province_id = event_target:trade_outpost_province_3 }
					NOT = { province_id = event_target:trade_outpost_province_4 }
					NOT = { province_id = event_target:trade_outpost_province_5 }
					OR = {
						REB = {
							NOT = { check_variable = { which = num_of_autonomy_civil_wars value = 100 } }
						}
						any_core_country = {
							exists = no
						}
					}
				}
				save_event_target_as = trade_outpost_province_5
				if = {
					limit = {
						any_core_country = {
							exists = no
						}
					}
					set_province_flag = trade_outpost_province_release_core_country_@ROOT
					random_core_country = {
						limit = {
							exists = no
						}
						save_event_target_as = trade_outpost_province_5_core_country
					}
				}
			}
		}
	}
	
	option = {
		name = subjects_expanded_trade_outpost_events1.EVTOPT1
		
		trigger = {
			event_target:trade_outpost_province_1 = {
				owned_by = ROOT
				NOT = { has_province_flag = already_rejected_trade_outpost_province_@ROOT }
			}
		}
		
		ai_chance = { factor = 100 }
		
		add_treasury = -3000
		if = {
			limit = {
				event_target:trade_outpost_province_1 = {
					has_province_flag = trade_outpost_province_release_core_country_@ROOT
				}
			}
			event_target:trade_outpost_province_1_core_country = {
				event_target:trade_outpost_province_1 = { cede_province = PREV }
				ROOT = {
					create_subject = {
						subject = PREV
						subject_type = trade_outpost
					}
				}
				add_truce_with = ROOT
			}
		}
		else = {
			event_target:trade_outpost_province_1 = {
				custom_tooltip = RELEASE_TRADE_OUTPOST_IN_THIS_PROVINCE
			}
			hidden_effect = {
				set_country_flag = is_releasing_trade_outpost
				event_target:trade_outpost_province_1 = {
					set_province_flag = release_trade_outpost_here_@ROOT
					set_estate = trade_outpost_release_estate
				}
				create_independent_estate = { estate = trade_outpost_release_estate government = republic government_reform = noble_elite_reform }
				event_target:trade_outpost_province_1 = {
					if = {
						limit = {
							has_estate = trade_outpost_release_estate
						}
						remove_estate = trade_outpost_release_estate
					}
					clr_province_flag = release_trade_outpost_here_@ROOT
					owner = {
						ROOT = {
							create_subject = {
								subject = PREV
								subject_type = trade_outpost
							}
						}
						add_truce_with = ROOT
					}
				}
				clr_country_flag = is_releasing_trade_outpost
				REB = {
					change_variable = { which = num_of_autonomy_civil_wars value = 1 }
				}
			}
		}
		
		hidden_effect = {
			event_target:trade_outpost_province_1 = {
				if = {
					limit = {
						is_core = ROOT
					}
					remove_core = ROOT
				}
			}
			clear_selected_trade_outpost_region_or_area = yes
			every_province = {
				limit = {
					has_province_flag = already_rejected_trade_outpost_province_@ROOT
				}
				clr_province_flag = already_rejected_trade_outpost_province_@ROOT
			}
			every_province = {
				limit = {
					has_province_flag = trade_outpost_province_release_core_country_@ROOT
				}
				clr_province_flag = trade_outpost_province_release_core_country_@ROOT
			}
		}
	}
	
	option = {
		name = subjects_expanded_trade_outpost_events1.EVTOPT2
		
		trigger = {
			event_target:trade_outpost_province_2 = {
				owned_by = ROOT
				NOT = { has_province_flag = already_rejected_trade_outpost_province_@ROOT }
			}
		}
		
		ai_chance = { factor = 100 }
		
		add_treasury = -3000
		if = {
			limit = {
				event_target:trade_outpost_province_2 = {
					has_province_flag = trade_outpost_province_release_core_country_@ROOT
				}
			}
			event_target:trade_outpost_province_2_core_country = {
				event_target:trade_outpost_province_2 = { cede_province = PREV }
				ROOT = {
					create_subject = {
						subject = PREV
						subject_type = trade_outpost
					}
				}
				add_truce_with = ROOT
			}
		}
		else = {
			event_target:trade_outpost_province_2 = {
				custom_tooltip = RELEASE_TRADE_OUTPOST_IN_THIS_PROVINCE
			}
			hidden_effect = {
				set_country_flag = is_releasing_trade_outpost
				event_target:trade_outpost_province_2 = {
					set_province_flag = release_trade_outpost_here_@ROOT
					set_estate = trade_outpost_release_estate
				}
				create_independent_estate = { estate = trade_outpost_release_estate government = republic government_reform = noble_elite_reform }
				event_target:trade_outpost_province_2 = {
					if = {
						limit = {
							has_estate = trade_outpost_release_estate
						}
						remove_estate = trade_outpost_release_estate
					}
					clr_province_flag = release_trade_outpost_here_@ROOT
					owner = {
						ROOT = {
							create_subject = {
								subject = PREV
								subject_type = trade_outpost
							}
						}
						add_truce_with = ROOT
					}
				}
				clr_country_flag = is_releasing_trade_outpost
				REB = {
					change_variable = { which = num_of_autonomy_civil_wars value = 1 }
				}
			}
		}
		
		hidden_effect = {
			event_target:trade_outpost_province_2 = {
				if = {
					limit = {
						is_core = ROOT
					}
					remove_core = ROOT
				}
			}
			clear_selected_trade_outpost_region_or_area = yes
			every_province = {
				limit = {
					has_province_flag = already_rejected_trade_outpost_province_@ROOT
				}
				clr_province_flag = already_rejected_trade_outpost_province_@ROOT
			}
			every_province = {
				limit = {
					has_province_flag = trade_outpost_province_release_core_country_@ROOT
				}
				clr_province_flag = trade_outpost_province_release_core_country_@ROOT
			}
		}
	}
	
	option = {
		name = subjects_expanded_trade_outpost_events1.EVTOPT3
		
		trigger = {
			event_target:trade_outpost_province_3 = {
				owned_by = ROOT
				NOT = { has_province_flag = already_rejected_trade_outpost_province_@ROOT }
			}
		}
		
		ai_chance = { factor = 100 }
		
		add_treasury = -3000
		if = {
			limit = {
				event_target:trade_outpost_province_3 = {
					has_province_flag = trade_outpost_province_release_core_country_@ROOT
				}
			}
			event_target:trade_outpost_province_3_core_country = {
				event_target:trade_outpost_province_3 = { cede_province = PREV }
				ROOT = {
					create_subject = {
						subject = PREV
						subject_type = trade_outpost
					}
				}
				add_truce_with = ROOT
			}
		}
		else = {
			event_target:trade_outpost_province_3 = {
				custom_tooltip = RELEASE_TRADE_OUTPOST_IN_THIS_PROVINCE
			}
			hidden_effect = {
				set_country_flag = is_releasing_trade_outpost
				event_target:trade_outpost_province_3 = {
					set_province_flag = release_trade_outpost_here_@ROOT
					set_estate = trade_outpost_release_estate
				}
				create_independent_estate = { estate = trade_outpost_release_estate government = republic government_reform = noble_elite_reform }
				event_target:trade_outpost_province_3 = {
					if = {
						limit = {
							has_estate = trade_outpost_release_estate
						}
						remove_estate = trade_outpost_release_estate
					}
					clr_province_flag = release_trade_outpost_here_@ROOT
					owner = {
						ROOT = {
							create_subject = {
								subject = PREV
								subject_type = trade_outpost
							}
						}
						add_truce_with = ROOT
					}
				}
				clr_country_flag = is_releasing_trade_outpost
				REB = {
					change_variable = { which = num_of_autonomy_civil_wars value = 1 }
				}
			}
		}
		
		hidden_effect = {
			event_target:trade_outpost_province_3 = {
				if = {
					limit = {
						is_core = ROOT
					}
					remove_core = ROOT
				}
			}
			clear_selected_trade_outpost_region_or_area = yes
			every_province = {
				limit = {
					has_province_flag = already_rejected_trade_outpost_province_@ROOT
				}
				clr_province_flag = already_rejected_trade_outpost_province_@ROOT
			}
			every_province = {
				limit = {
					has_province_flag = trade_outpost_province_release_core_country_@ROOT
				}
				clr_province_flag = trade_outpost_province_release_core_country_@ROOT
			}
		}
	}
	
	option = {
		name = subjects_expanded_trade_outpost_events1.EVTOPT4
		
		trigger = {
			event_target:trade_outpost_province_4 = {
				owned_by = ROOT
				NOT = { has_province_flag = already_rejected_trade_outpost_province_@ROOT }
			}
		}
		
		ai_chance = { factor = 100 }
		
		add_treasury = -3000
		if = {
			limit = {
				event_target:trade_outpost_province_4 = {
					has_province_flag = trade_outpost_province_release_core_country_@ROOT
				}
			}
			event_target:trade_outpost_province_4_core_country = {
				event_target:trade_outpost_province_4 = { cede_province = PREV }
				ROOT = {
					create_subject = {
						subject = PREV
						subject_type = trade_outpost
					}
				}
				add_truce_with = ROOT
			}
		}
		else = {
			event_target:trade_outpost_province_4 = {
				custom_tooltip = RELEASE_TRADE_OUTPOST_IN_THIS_PROVINCE
			}
			hidden_effect = {
				set_country_flag = is_releasing_trade_outpost
				event_target:trade_outpost_province_4 = {
					set_province_flag = release_trade_outpost_here_@ROOT
					set_estate = trade_outpost_release_estate
				}
				create_independent_estate = { estate = trade_outpost_release_estate government = republic government_reform = noble_elite_reform }
				event_target:trade_outpost_province_4 = {
					if = {
						limit = {
							has_estate = trade_outpost_release_estate
						}
						remove_estate = trade_outpost_release_estate
					}
					clr_province_flag = release_trade_outpost_here_@ROOT
					owner = {
						ROOT = {
							create_subject = {
								subject = PREV
								subject_type = trade_outpost
							}
						}
						add_truce_with = ROOT
					}
				}
				clr_country_flag = is_releasing_trade_outpost
				REB = {
					change_variable = { which = num_of_autonomy_civil_wars value = 1 }
				}
			}
		}
		
		hidden_effect = {
			event_target:trade_outpost_province_4 = {
				if = {
					limit = {
						is_core = ROOT
					}
					remove_core = ROOT
				}
			}
			clear_selected_trade_outpost_region_or_area = yes
			every_province = {
				limit = {
					has_province_flag = already_rejected_trade_outpost_province_@ROOT
				}
				clr_province_flag = already_rejected_trade_outpost_province_@ROOT
			}
			every_province = {
				limit = {
					has_province_flag = trade_outpost_province_release_core_country_@ROOT
				}
				clr_province_flag = trade_outpost_province_release_core_country_@ROOT
			}
		}
	}
	
	option = {
		name = subjects_expanded_trade_outpost_events1.EVTOPT5
		
		trigger = {
			event_target:trade_outpost_province_5 = {
				owned_by = ROOT
				NOT = { has_province_flag = already_rejected_trade_outpost_province_@ROOT }
			}
		}
		
		ai_chance = { factor = 100 }
		
		add_treasury = -3000
		if = {
			limit = {
				event_target:trade_outpost_province_5 = {
					has_province_flag = trade_outpost_province_release_core_country_@ROOT
				}
			}
			event_target:trade_outpost_province_5_core_country = {
				event_target:trade_outpost_province_5 = { cede_province = PREV }
				ROOT = {
					create_subject = {
						subject = PREV
						subject_type = trade_outpost
					}
				}
				add_truce_with = ROOT
			}
		}
		else = {
			event_target:trade_outpost_province_5 = {
				custom_tooltip = RELEASE_TRADE_OUTPOST_IN_THIS_PROVINCE
			}
			hidden_effect = {
				set_country_flag = is_releasing_trade_outpost
				event_target:trade_outpost_province_5 = {
					set_province_flag = release_trade_outpost_here_@ROOT
					set_estate = trade_outpost_release_estate
				}
				create_independent_estate = { estate = trade_outpost_release_estate government = republic government_reform = noble_elite_reform }
				event_target:trade_outpost_province_5 = {
					if = {
						limit = {
							has_estate = trade_outpost_release_estate
						}
						remove_estate = trade_outpost_release_estate
					}
					clr_province_flag = release_trade_outpost_here_@ROOT
					owner = {
						ROOT = {
							create_subject = {
								subject = PREV
								subject_type = trade_outpost
							}
						}
						add_truce_with = ROOT
					}
				}
				clr_country_flag = is_releasing_trade_outpost
				REB = {
					change_variable = { which = num_of_autonomy_civil_wars value = 1 }
				}
			}
		}
		
		hidden_effect = {
			event_target:trade_outpost_province_5 = {
				if = {
					limit = {
						is_core = ROOT
					}
					remove_core = ROOT
				}
			}
			clear_selected_trade_outpost_region_or_area = yes
			every_province = {
				limit = {
					has_province_flag = already_rejected_trade_outpost_province_@ROOT
				}
				clr_province_flag = already_rejected_trade_outpost_province_@ROOT
			}
			every_province = {
				limit = {
					has_province_flag = trade_outpost_province_release_core_country_@ROOT
				}
				clr_province_flag = trade_outpost_province_release_core_country_@ROOT
			}
		}
	}
	
	option = {
		name = subjects_expanded_trade_outpost_events1.EVTOPT6
		
		trigger = {
			any_owned_province = {
				is_in_selected_trade_outpost_region_or_area = yes
				has_port = yes
				development = 30
				NOT = { has_province_flag = already_rejected_trade_outpost_province_@ROOT }
				NOT = { province_id = event_target:trade_outpost_province_1 }
				NOT = { province_id = event_target:trade_outpost_province_2 }
				NOT = { province_id = event_target:trade_outpost_province_3 }
				NOT = { province_id = event_target:trade_outpost_province_4 }
				NOT = { province_id = event_target:trade_outpost_province_5 }
				OR = {
					REB = {
						NOT = { check_variable = { which = num_of_autonomy_civil_wars value = 100 } }
					}
					any_core_country = {
						exists = no
					}
				}
			}
		}
		
		ai_chance = { factor = 0 }
		
		country_event = { id = subjects_expanded_trade_outpost_events.1 }
		
		hidden_effect = {
			event_target:trade_outpost_province_1 = {
				set_province_flag = already_rejected_trade_outpost_province_@ROOT
			}
			event_target:trade_outpost_province_2 = {
				set_province_flag = already_rejected_trade_outpost_province_@ROOT
			}
			event_target:trade_outpost_province_3 = {
				set_province_flag = already_rejected_trade_outpost_province_@ROOT
			}
			event_target:trade_outpost_province_4 = {
				set_province_flag = already_rejected_trade_outpost_province_@ROOT
			}
			event_target:trade_outpost_province_5 = {
				set_province_flag = already_rejected_trade_outpost_province_@ROOT
			}
		}
	}
	
	option = {
		name = subjects_expanded_trade_outpost_events1.EVTOPT7
		
		ai_chance = { factor = 1 }
		
		hidden_effect = {
			clear_selected_trade_outpost_region_or_area = yes
			every_province = {
				limit = {
					has_province_flag = already_rejected_trade_outpost_province_@ROOT
				}
				clr_province_flag = already_rejected_trade_outpost_province_@ROOT
			}
			every_province = {
				limit = {
					has_province_flag = trade_outpost_province_release_core_country_@ROOT
				}
				clr_province_flag = trade_outpost_province_release_core_country_@ROOT
			}
		}
	}
}

country_event = {
	id = subjects_expanded_trade_outpost_events.3
	title = subjects_expanded_trade_outpost_events.EVTNAME3
	desc = subjects_expanded_trade_outpost_events.EVTDESC3
	picture = GOOD_WITH_MONARCH_eventPicture
	
	major = yes
	
	trigger = {
		is_subject_of_type = trade_outpost
		num_of_cities = 2
	}
	
	mean_time_to_happen = {
		months = 1
	}
	
	option = {
		name = subjects_expanded_trade_outpost_events3.EVTOPT1
		
		ai_chance = { factor = 100 }
		
		overlord = {
			grant_independence = yes
		}
	}
}

country_event = {
	id = subjects_expanded_trade_outpost_events.4
	title = subjects_expanded_trade_outpost_events.EVTNAME4
	desc = subjects_expanded_trade_outpost_events.EVTDESC4
	picture = BAD_WITH_MONARCH_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = subjects_expanded_trade_outpost_events4.EVTOPT1
		
		ai_chance = { factor = 100 }
		
		tooltip = {
			FROM = { grant_independence = yes }
		}
	}
}

country_event = {
	id = subjects_expanded_trade_outpost_events.5
	title = subjects_expanded_trade_outpost_events.EVTNAME5
	desc = subjects_expanded_trade_outpost_events.EVTDESC5
	picture = BAD_WITH_MONARCH_eventPicture
	
	hidden = yes
	
	trigger = {
		OR = {
			any_subject_country = {
				is_subject_of_type = trade_outpost
				capital_scope = {
					NOT = {
						has_trade_modifier = {
							who = ROOT
							key = trade_outpost_overlord_trade_modifier
						}
					}
				}
			}
			any_trade_node = {
				has_trade_modifier = {
					who = ROOT
					key = trade_outpost_overlord_trade_modifier
				}
				NOT = {
					any_trade_node_member_country = {
						is_subject_of = ROOT
						is_subject_of_type = trade_outpost
					}
				}
			}
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					any_subject_country = {
						is_subject_of_type = trade_outpost
						capital_scope = {
							NOT = {
								has_trade_modifier = {
									who = ROOT
									key = trade_outpost_overlord_trade_modifier
								}
							}
						}
					}
				}
				every_subject_country = {
					limit = {
						is_subject_of_type = trade_outpost
						capital_scope = {
							NOT = {
								has_trade_modifier = {
									who = ROOT
									key = trade_outpost_overlord_trade_modifier
								}
							}
						}
					}
					capital_scope = {
						add_trade_modifier = {
							who = ROOT
							power = 35
							key = trade_outpost_overlord_trade_modifier
							duration = -1
						}
					}
				}
			}
			else = {
				every_province = {
					limit = {
						has_trade_modifier = {
							who = ROOT
							key = trade_outpost_overlord_trade_modifier
						}
						NOT = {
							any_trade_node_member_country = {
								is_subject_of = ROOT
								is_subject_of_type = trade_outpost
							}
						}
					}
					remove_trade_modifier = {
						who = ROOT
						key = trade_outpost_overlord_trade_modifier
					}
				}
			}
		}
	}
	
	option = {
		name = subjects_expanded_trade_outpost_events5.EVTOPT1
		
		ai_chance = { factor = 100 }
	}
}
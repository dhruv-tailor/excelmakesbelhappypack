namespace = besseres_hrr_events

# King becomes Emperor (HRE) (triggered by event or peace treaty)
country_event = {
	id = besseres_hrr_events.1
	title = "besseres_hrr_events.EVTNAME1"
	desc = "besseres_hrr_events.EVTDESC1"
	picture = HRE_eventPicture

	major = yes
	major_trigger = {
		OR = {
			is_part_of_hre = yes
			any_owned_province = {
				is_part_of_hre = yes
			}
			any_neighbor_country = {
				is_part_of_hre = yes
			}
			any_subject_country = {
				is_part_of_hre = yes
			}
			has_country_flag = debug_gets_major_hre_events
		}
	}

	is_triggered_only = yes

	trigger = {
		is_emperor = yes
		has_regency = no
		religion = catholic
		NOT = { is_religion_enabled = protestant }
		NOT = { has_ruler_flag = zum_kaiser_gekroent }
	}

	immediate = {
		hidden_effect = {
			clr_ruler_flag = sent_ruler_to_rome_to_become_emperor
			set_ruler_flag = zum_kaiser_gekroent
			export_to_variable = {
				which = years_since_election_of_holy_roman_king
				value = trigger_value:is_year
			}
			change_variable = { which = years_since_election_of_holy_roman_king value = -1 }
			subtract_variable = { which = years_since_election_of_holy_roman_king which = year_of_holy_roman_king_election }
		}
	}

	option = {
		name = "besseres_hrr_events1.EVTOPT1"

		if = {
			limit = { exists = PAP }
			custom_tooltip = CROWNED_EMPEROR_BY_POPE
		}
		else = {
			custom_tooltip = CROWNED_EMPEROR
		}

		add_imperial_influence = 5
		add_ruler_modifier = {
			name = besseres_hrr_crowned_emperor
			duration = -1
		}
	}
}

# HRE Emperor replaced Pope
country_event = {
	id = besseres_hrr_events.2
	title = "besseres_hrr_events.EVTNAME2"
	desc = "besseres_hrr_events.EVTDESC2"
	picture = RELIGIOUS_WARS_eventPicture

	major = yes
	major_trigger = {
		OR = {
			is_part_of_hre = yes
			any_owned_province = {
				is_part_of_hre = yes
			}
			any_neighbor_country = {
				is_part_of_hre = yes
			}
			any_subject_country = {
				is_part_of_hre = yes
			}
			tag = PAP
			capital_scope = {
				region = italy_region
			}
			has_country_flag = debug_gets_major_hre_events
		}
	}

	is_triggered_only = yes

	trigger = {
		is_emperor = yes
		NOT = { has_country_flag = besseres_hrr_events_2_fired }
	}

	immediate = {
		hidden_effect = {
			set_country_flag = besseres_hrr_events_2_fired
			if = {
				limit = {
					PAP = {
						NOT = { religion = catholic }
						OR = {
							is_subject = no
							AND = {
								is_subject = yes
								overlord = { religion = catholic }
							}
						}
					}
				}
				PAP = { change_religion = catholic }
				if = {
					limit = {
						PAP = { owns_core_province = 118 }
						118 = { NOT = { religion = catholic } }
					}
					118 = { change_religion = catholic }
				}
			}
		}
	}

	option = {
		name = "besseres_hrr_events2.EVTOPT1"

		PAP = {
			exile_ruler_as = exiled_pope
			set_ruler_flag = replaced_pope_by_emperor
		}
		custom_tooltip = " "
		custom_tooltip = THERE_MAY_BE_REVOLTS_IN_PAP
		custom_tooltip = " "
		if = {
			limit = { NOT = { has_ruler_flag = zum_kaiser_gekroent } }
			country_event = { id = besseres_hrr_events.1 days = 21 }
		}
		custom_tooltip = " "
		reverse_add_opinion = {
			who = PAP
			modifier = enforced_new_pope_PAP
		}
		custom_tooltip = " "
		every_known_country = {
			limit = {
				religion = catholic
				NOT = { tag = ROOT }
				NOT = { tag = PAP }
				NOT = { alliance_with = ROOT }
				is_subject = no
			}
			add_opinion = {
				who = ROOT
				modifier = enforced_new_pope
			}
		}

		hidden_effect = {
			add_ruler_modifier = {
				name = "enforced_new_pope_modifier"
				duration = -1
			}
			clr_country_flag = besseres_hrr_events_2_fired
		}
	}
}

# Forcefully revoked Electorate
country_event = {
	id = besseres_hrr_events.3
	title = "besseres_hrr_events.EVTNAME3"
	desc = "besseres_hrr_events.EVTDESC3"
	picture = RELIGIOUS_WARS_eventPicture

	hidden = yes
	is_triggered_only = yes

	trigger = {
		NOT = { has_country_flag = besseres_hrr_events_3_fired }
	}

	immediate = {
		hidden_effect = {
			set_country_flag = besseres_hrr_events_3_fired
			if = {
				limit = {
					is_elector = yes
				}
				elector = no
				add_opinion = {
					who = FROM
					modifier = revoke_elector_opinion
				}
			}
		}
	}

	option = {
		name = "besseres_hrr_events2.EVTOPT1"

		clr_country_flag = besseres_hrr_events_3_fired
	}
}

# Revolt in the Papal State after Emperor replaced Pope
country_event = {
	id = besseres_hrr_events.4
	title = "besseres_hrr_events.EVTNAME4"
	desc = "besseres_hrr_events.EVTDESC4"
	picture = ANGRY_MOB_eventPicture

	trigger = {
		is_emperor = yes
		exists = PAP
		PAP = {
			has_ruler_flag = replaced_pope_by_emperor
			unrest = -2
			capital_scope = {
				controlled_by = PREV
				has_siege = no
			}
			NOT = { has_spawned_rebels = pretender_rebels }
		}
	}

	mean_time_to_happen = {
		months = 60

		modifier = {
			factor = 1.25
			PAP = {
				unrest = -2
				NOT = { unrest = -1.5 }
			}
		}

		modifier = {
			factor = 0.75
			PAP = {
				unrest = -1
				NOT = { unrest = 0 }
			}
		}

		modifier = {
			factor = 0.5
			PAP = {
				unrest = 0
				NOT = { unrest = 2 }
			}
		}

		modifier = {
			factor = 0.25
			PAP = { unrest = 2 }
		}

		modifier = {
			factor = 1.25
			PAP = { devotion = 90 }
		}

		modifier = {
			factor = 0.75
			PAP = {
				devotion = 50
				NOT = { devotion = 90 }
			}
		}

		modifier = {
			factor = 0.5
			PAP = {
				devotion = 30
				NOT = { devotion = 50 }
			}
		}

		modifier = {
			factor = 0.25
			PAP = { NOT = { devotion = 30 } }
		}
	}

	option = {
		name = "besseres_hrr_events4.EVTOPT1"

		tooltip = {
			PAP = {
				capital_scope = {
					spawn_rebels = {
						type = pretender_rebels
						size = 2
					}
				}
			}
		}

		hidden_effect = { PAP = { country_event = { id = besseres_hrr_events.5 } } }
	}
}

# Revolts spawned in capital of the Papal State after Emperor replaced Pope
country_event = {
	id = besseres_hrr_events.5
	title = "besseres_hrr_events.EVTNAME5"
	desc = "besseres_hrr_events.EVTDESC5"
	picture = ANGRY_MOB_eventPicture

	is_triggered_only = yes

	option = {
		name = "besseres_hrr_events5.EVTOPT1"

		capital_scope = {
			spawn_rebels = {
				type = pretender_rebels
				size = 2
			}
		}
	}
}

# Pope that the emperor set is killed after rebels win
country_event = {
	id = besseres_hrr_events.6
	title = "besseres_hrr_events.EVTNAME6"
	desc = "besseres_hrr_events.EVTDESC6"
	picture = BAD_WITH_MONARCH_eventPicture

	major = yes
	major_trigger = {
		OR = {
			is_emperor = yes
			is_neighbor_of = PAP
			is_part_of_hre = yes
			has_country_flag = debug_gets_major_hre_events
		}
		religion = catholic
	}

	trigger = {
		tag = PAP
		has_ruler_flag = replaced_pope_by_emperor
		has_spawned_rebels = pretender_rebels
		capital_scope = {
			OR = {
				has_siege = no
				AND = {
					has_siege = yes
					garrison = 1000
					NOT = { garrison = 2000 }
					NOT = { units_in_province = 6 }
				}
				AND = {
					has_siege = yes
					garrison = 2000
					NOT = { garrison = 3000 }
					NOT = { units_in_province = 9 }
				}
				AND = {
					has_siege = yes
					garrison = 3000
					NOT = { garrison = 4000 }
					NOT = { units_in_province = 12 }
				}
				AND = {
					has_siege = yes
					garrison = 4000
					NOT = { garrison = 5000 }
					NOT = { units_in_province = 15 }
				}
				AND = {
					has_siege = yes
					garrison = 5000
					NOT = { garrison = 6000 }
					NOT = { units_in_province = 18 }
				}
				AND = {
					has_siege = yes
					garrison = 6000
					NOT = { garrison = 7000 }
					NOT = { units_in_province = 21 }
				}
				AND = {
					has_siege = yes
					garrison = 7000
					NOT = { garrison = 8000 }
					NOT = { units_in_province = 24 }
				}
				AND = {
					has_siege = yes
					garrison = 8000
					NOT = { garrison = 9000 }
					NOT = { units_in_province = 27 }
				}
				AND = {
					has_siege = yes
					garrison = 9000
					NOT = { units_in_province = 30 }
				}
			}
			controlled_by = pretender_rebels
		}
	}

	mean_time_to_happen = {
		months = 12

		modifier = {
			factor = 0.25
			unrest = 5
		}

		modifier = {
			factor = 0.5
			NOT = { unrest = 5 }
			all_owned_province = {
				NOT = {
					num_of_units_in_province = {
						who = emperor
						amount = 10
					}
				}
			}
		}

		modifier = {
			factor = 1.25
			any_owned_province = {
				num_of_units_in_province = {
					who = emperor
					amount = 10
				}
			}
			NOT = {
				capital_scope = {
					any_neighbor_province = {
						owned_by = ROOT
						num_of_units_in_province = {
							who = emperor
							amount = 10
						}
					}
				}
			}
		}

		modifier = {
			factor = 2
			capital_scope = {
				any_neighbor_province = {
					owned_by = ROOT
					num_of_units_in_province = {
						who = emperor
						amount = 10
					}
				}
			}
		}

		modifier = {
			factor = 2
			capital_scope = { has_siege = yes }
		}
	}

	immediate = {
		hidden_effect = {
			disband_rebels = pretender_rebels
		}
	}

	option = {
		name = "besseres_hrr_events6.EVTOPT1"

		tooltip = { kill_ruler = yes }
		set_ruler = exiled_pope

		emperor = {
			add_prestige = -10
			add_papal_influence = -10
		}
	}
}

# Can gain electorship from junior partner in personal union
country_event = {
	id = besseres_hrr_events.7
	title = "besseres_hrr_events.EVTNAME7"
	desc = "besseres_hrr_events.EVTDESC7"
	picture = HRE_eventPicture

	trigger = {
		is_part_of_hre = yes
		is_elector = no
		any_elector = {
			junior_union_with = ROOT
			NOT = { liberty_desire = 50 }
			NOT = { has_country_flag = overlord_rejected_elector_change_@ROOT }
		}
	}

	mean_time_to_happen = { months = 1 }

	immediate = {
		hidden_effect = {
			random_elector = {
				limit = {
					junior_union_with = ROOT
					NOT = { liberty_desire = 50 }
					NOT = { has_country_flag = overlord_rejected_elector_change_@ROOT }
				}
				save_event_target_as = grands_elector_to_ROOT
			}
		}
	}

	option = {
		name = "besseres_hrr_events7.EVTOPT1"

		event_target:grands_elector_to_ROOT = {
			elector = no
		}

		elector = yes

		if = {
			limit = { is_emperor = yes }
			add_imperial_influence = -5
		}
	}

	option = {
		name = "besseres_hrr_events7.EVTOPT2"

		event_target:grands_elector_to_ROOT = {
			set_country_flag = overlord_rejected_elector_change_@ROOT
		}
	}
}

# Subject of HRE nation is added to HRE
country_event = {
	id = besseres_hrr_events.8
	title = "besseres_hrr_events.EVTNAME8"
	desc = "besseres_hrr_events.EVTDESC8"
	picture = HRE_eventPicture

	major = yes
	major_trigger = {
		OR = {
			is_part_of_hre = yes
			is_emperor = yes
			has_country_flag = debug_gets_major_hre_events
		}
	}

	trigger = {
		is_subject = yes
		OR = {
			is_subject_of_type = vassal
			is_subject_of_type = march
			is_subject_of_type = personal_union
			is_lesser_in_union = yes
			is_vassal = yes
			is_march = yes
		}
		OR = {
			NOT = { has_dlc = "Emperor" }
			is_lesser_in_union = no
			overlord = {
				is_emperor = yes
			}
		}
		is_part_of_hre = no
		overlord = { is_part_of_hre = yes }
		capital_scope = {
			continent = europe
		}
		OR = {
			religion = catholic
			religion = protestant
			religion = reformed
			religion = hussite
		}
		any_owned_province = {
			OR = {
				any_neighbor_province = {
					is_part_of_hre = yes
				}
				sea_zone = {
					any_neighbor_province = {
						is_part_of_hre = yes
					}
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 60

		modifier = {
			factor = 0.5
			is_lesser_in_union = yes
		}

		modifier = {
			factor = 2
			is_march = yes
		}

		modifier = {
			factor = 3
			liberty_desire = 50
		}

		modifier = {
			factor = 100
			liberty_desire = 100
		}
	}

	option = {
		name = "besseres_hrr_events8.EVTOPT1"

		tooltip = {
			set_in_empire = yes
		}
		hidden_effect = {
			every_owned_province = {
				limit = {
					continent = europe
					is_part_of_hre = no
				}
				set_in_empire = yes
			}
		}
	}
}

# Imperial Authority is reduced after country was forced to leave the HRE
country_event = {
	id = besseres_hrr_events.9
	title = "besseres_hrr_events.EVTNAME9"
	desc = "besseres_hrr_events.EVTDESC9"
	picture = HRE_eventPicture

	hidden = yes
	is_triggered_only = yes

	trigger = {
		NOT = { has_country_flag = besseres_hrr_events_9_fired }
	}

	immediate = {
		hidden_effect = {
			set_country_flag = besseres_hrr_events_9_fired
			add_imperial_influence = -10
		}
	}

	option = {
		name = "besseres_hrr_events9.EVTOPT1"

		ai_chance = { factor = 100 }

		clr_country_flag = besseres_hrr_events_9_fired
	}
}

# Golden Bull enacted (emperor)
country_event = {
	id = besseres_hrr_events.10
	title = "besseres_hrr_events.EVTNAME10"
	desc = "besseres_hrr_events.EVTDESC10"
	picture = HRE_eventPicture

	is_triggered_only = yes

	option = {
		name = "besseres_hrr_events10.EVTOPT1"

		hidden_effect = {
			every_country = {
				limit = {
					NOT = { tag = ROOT }
					any_province = {
						is_capital_of = ROOT
						has_discovered = PREV
					}
				}
				country_event = { id = besseres_hrr_events.11 }
			}
		}
	}
}

# Golden Bull enacted (public)
country_event = {
	id = besseres_hrr_events.11
	title = "besseres_hrr_events.EVTNAME11"
	desc = "besseres_hrr_events.EVTDESC11"
	picture = HRE_eventPicture

	is_triggered_only = yes

	option = {
		name = "besseres_hrr_events11.EVTOPT1"

		custom_tooltip = GOLDEN_BULL_NO_ANTI_KING_CB
		custom_tooltip = EMPEROR_GAINS_THESE_BONUSES_BECAUSE_OF_THE_GOLDEN_BULL
		custom_tooltip = ELECTORS_GAIN_THESE_BONUSES_BECAUSE_OF_THE_GOLDEN_BULL
		custom_tooltip = MEMBERS_GAIN_THESE_BONUSES_BECAUSE_OF_THE_GOLDEN_BULL
	}
}

# Golden Bull removed
country_event = {
	id = besseres_hrr_events.12
	title = "besseres_hrr_events.EVTNAME12"
	desc = "besseres_hrr_events.EVTDESC12"
	picture = HRE_eventPicture

	is_triggered_only = yes

	major = yes
	major_trigger = {
		OR = {
			is_part_of_hre = yes
			has_country_flag = debug_gets_major_hre_events
		}
	}

	option = {
		name = "besseres_hrr_events12.EVTOPT1"

		custom_tooltip = NO_GOLDEN_BULL_ANTI_KING_CB
	}
}

# Give imperial arch-offices
country_event = {
	id = besseres_hrr_events.13
	title = "besseres_hrr_events.EVTNAME13"
	desc = "besseres_hrr_events.EVTDESC13"
	picture = HRE_eventPicture

	hidden = yes

	trigger = {
		NOT = { tag = JMN }
		is_emperor = yes
		has_global_flag = hre_golden_bull_enacted
		OR = {
			AND = {
				has_global_flag = hre_golden_bull_removed
				any_country = {
					OR = {
						has_country_modifier = german_erzkanzler
						has_country_modifier = italian_erzkanzler
						has_country_modifier = burgundian_erzkanzler
						has_country_modifier = erztruchsess
						has_country_modifier = erzmarschall
						has_country_modifier = erzkaemmerer
						has_country_modifier = erzmundschenk
					}
				}
			}
			AND = {
				NOT = { has_global_flag = hre_golden_bull_removed }
				OR = {
					AND = {
						NOT = {
							any_elector = {
								has_country_modifier = german_erzkanzler
							}
						}
						any_elector = {
							is_an_ecclesiastical_country = yes
							NOT = { has_country_modifier = german_erzkanzler }
							NOT = { has_country_modifier = italian_erzkanzler }
							NOT = { has_country_modifier = burgundian_erzkanzler }
							NOT = { has_country_modifier = erztruchsess }
							NOT = { has_country_modifier = erzmarschall }
							NOT = { has_country_modifier = erzkaemmerer }
							NOT = { has_country_modifier = erzmundschenk }
						}
					}
					AND = {
						NOT = {
							any_elector = {
								has_country_modifier = italian_erzkanzler
							}
						}
						any_elector = {
							is_an_ecclesiastical_country = yes
							NOT = { has_country_modifier = german_erzkanzler }
							NOT = { has_country_modifier = italian_erzkanzler }
							NOT = { has_country_modifier = burgundian_erzkanzler }
							NOT = { has_country_modifier = erztruchsess }
							NOT = { has_country_modifier = erzmarschall }
							NOT = { has_country_modifier = erzkaemmerer }
							NOT = { has_country_modifier = erzmundschenk }
						}
					}
					AND = {
						NOT = {
							any_elector = {
								has_country_modifier = burgundian_erzkanzler
							}
						}
						any_elector = {
							is_an_ecclesiastical_country = yes
							NOT = { has_country_modifier = german_erzkanzler }
							NOT = { has_country_modifier = italian_erzkanzler }
							NOT = { has_country_modifier = burgundian_erzkanzler }
							NOT = { has_country_modifier = erztruchsess }
							NOT = { has_country_modifier = erzmarschall }
							NOT = { has_country_modifier = erzkaemmerer }
							NOT = { has_country_modifier = erzmundschenk }
						}
					}
					AND = {
						NOT = { has_country_modifier = erztruchsess }
						NOT = {
							any_elector = {
								has_country_modifier = erztruchsess
							}
						}
						OR = {
							AND = {
								is_elector = yes
								NOT = { has_country_modifier = german_erzkanzler }
								NOT = { has_country_modifier = italian_erzkanzler }
								NOT = { has_country_modifier = burgundian_erzkanzler }
								NOT = { has_country_modifier = erztruchsess }
								NOT = { has_country_modifier = erzmarschall }
								NOT = { has_country_modifier = erzkaemmerer }
								NOT = { has_country_modifier = erzmundschenk }
							}
							any_elector = {
								is_a_secular_country = yes
								NOT = { has_country_modifier = german_erzkanzler }
								NOT = { has_country_modifier = italian_erzkanzler }
								NOT = { has_country_modifier = burgundian_erzkanzler }
								NOT = { has_country_modifier = erztruchsess }
								NOT = { has_country_modifier = erzmarschall }
								NOT = { has_country_modifier = erzkaemmerer }
								NOT = { has_country_modifier = erzmundschenk }
							}
						}
					}
					AND = {
						NOT = { has_country_modifier = erzmarschall }
						NOT = {
							any_elector = {
								has_country_modifier = erzmarschall
							}
						}
						OR = {
							AND = {
								is_elector = yes
								NOT = { has_country_modifier = german_erzkanzler }
								NOT = { has_country_modifier = italian_erzkanzler }
								NOT = { has_country_modifier = burgundian_erzkanzler }
								NOT = { has_country_modifier = erztruchsess }
								NOT = { has_country_modifier = erzmarschall }
								NOT = { has_country_modifier = erzkaemmerer }
								NOT = { has_country_modifier = erzmundschenk }
							}
							any_elector = {
								is_a_secular_country = yes
								NOT = { has_country_modifier = german_erzkanzler }
								NOT = { has_country_modifier = italian_erzkanzler }
								NOT = { has_country_modifier = burgundian_erzkanzler }
								NOT = { has_country_modifier = erztruchsess }
								NOT = { has_country_modifier = erzmarschall }
								NOT = { has_country_modifier = erzkaemmerer }
								NOT = { has_country_modifier = erzmundschenk }
							}
						}
					}
					AND = {
						NOT = { has_country_modifier = erzkaemmerer }
						NOT = {
							any_elector = {
								has_country_modifier = erzkaemmerer
							}
						}
						OR = {
							AND = {
								is_elector = yes
								NOT = { has_country_modifier = german_erzkanzler }
								NOT = { has_country_modifier = italian_erzkanzler }
								NOT = { has_country_modifier = burgundian_erzkanzler }
								NOT = { has_country_modifier = erztruchsess }
								NOT = { has_country_modifier = erzmarschall }
								NOT = { has_country_modifier = erzkaemmerer }
								NOT = { has_country_modifier = erzmundschenk }
							}
							any_elector = {
								is_a_secular_country = yes
								NOT = { has_country_modifier = german_erzkanzler }
								NOT = { has_country_modifier = italian_erzkanzler }
								NOT = { has_country_modifier = burgundian_erzkanzler }
								NOT = { has_country_modifier = erztruchsess }
								NOT = { has_country_modifier = erzmarschall }
								NOT = { has_country_modifier = erzkaemmerer }
								NOT = { has_country_modifier = erzmundschenk }
							}
						}
					}
					AND = {
						NOT = { has_country_modifier = erzmundschenk }
						NOT = {
							any_elector = {
								has_country_modifier = erzmundschenk
							}
						}
						OR = {
							AND = {
								is_elector = yes
								NOT = { has_country_modifier = german_erzkanzler }
								NOT = { has_country_modifier = italian_erzkanzler }
								NOT = { has_country_modifier = burgundian_erzkanzler }
								NOT = { has_country_modifier = erztruchsess }
								NOT = { has_country_modifier = erzmarschall }
								NOT = { has_country_modifier = erzkaemmerer }
								NOT = { has_country_modifier = erzmundschenk }
							}
							any_elector = {
								is_a_secular_country = yes
								NOT = { has_country_modifier = german_erzkanzler }
								NOT = { has_country_modifier = italian_erzkanzler }
								NOT = { has_country_modifier = burgundian_erzkanzler }
								NOT = { has_country_modifier = erztruchsess }
								NOT = { has_country_modifier = erzmarschall }
								NOT = { has_country_modifier = erzkaemmerer }
								NOT = { has_country_modifier = erzmundschenk }
							}
						}
					}
				}
			}
		}
	}

	immediate = {
		hidden_effect = {
			if = {
				limit = {
					NOT = { has_global_flag = hre_golden_bull_removed }
				}
				every_country = {
					limit = {
						is_elector = no
						OR = {
							has_country_modifier = german_erzkanzler
							has_country_modifier = italian_erzkanzler
							has_country_modifier = burgundian_erzkanzler
							has_country_modifier = erztruchsess
							has_country_modifier = erzmarschall
							has_country_modifier = erzkaemmerer
							has_country_modifier = erzmundschenk
						}
					}
					remove_country_modifier = german_erzkanzler
					remove_country_modifier = italian_erzkanzler
					remove_country_modifier = burgundian_erzkanzler
					remove_country_modifier = erztruchsess
					remove_country_modifier = erzmarschall
					remove_country_modifier = erzkaemmerer
					remove_country_modifier = erzmundschenk
				}

				if = {
					limit = {
						NOT = {
							any_elector = {
								has_country_modifier = german_erzkanzler
							}
						}
						any_elector = {
							is_an_ecclesiastical_country = yes
							NOT = { has_country_modifier = german_erzkanzler }
							NOT = { has_country_modifier = italian_erzkanzler }
							NOT = { has_country_modifier = burgundian_erzkanzler }
							NOT = { has_country_modifier = erztruchsess }
							NOT = { has_country_modifier = erzmarschall }
							NOT = { has_country_modifier = erzkaemmerer }
							NOT = { has_country_modifier = erzmundschenk }
						}
					}
					clear_global_event_target = hre_erzkanzler
					if = {
						limit = {
							MAI = {
								exists = yes
								is_elector = yes
								is_an_ecclesiastical_country = yes
								NOT = { has_country_modifier = german_erzkanzler }
								NOT = { has_country_modifier = italian_erzkanzler }
								NOT = { has_country_modifier = burgundian_erzkanzler }
								NOT = { has_country_modifier = erztruchsess }
								NOT = { has_country_modifier = erzmarschall }
								NOT = { has_country_modifier = erzkaemmerer }
								NOT = { has_country_modifier = erzmundschenk }
							}
						}
						MAI = {
							add_country_modifier = {
								name = german_erzkanzler
								duration = -1
							}
							save_global_event_target_as = hre_erzkanzler
						}
					}
					else = {
						random_elector = {
							limit = {
								is_an_ecclesiastical_country = yes
								NOT = { has_country_modifier = german_erzkanzler }
								NOT = { has_country_modifier = italian_erzkanzler }
								NOT = { has_country_modifier = burgundian_erzkanzler }
								NOT = { has_country_modifier = erztruchsess }
								NOT = { has_country_modifier = erzmarschall }
								NOT = { has_country_modifier = erzkaemmerer }
								NOT = { has_country_modifier = erzmundschenk }
							}
							add_country_modifier = {
								name = german_erzkanzler
								duration = -1
							}
							save_global_event_target_as = hre_erzkanzler
						}
					}
				}
				if = {
					limit = {
						NOT = {
							any_elector = {
								has_country_modifier = italian_erzkanzler
							}
						}
						any_elector = {
							is_an_ecclesiastical_country = yes
							NOT = { has_country_modifier = german_erzkanzler }
							NOT = { has_country_modifier = italian_erzkanzler }
							NOT = { has_country_modifier = burgundian_erzkanzler }
							NOT = { has_country_modifier = erztruchsess }
							NOT = { has_country_modifier = erzmarschall }
							NOT = { has_country_modifier = erzkaemmerer }
							NOT = { has_country_modifier = erzmundschenk }
						}
					}
					if = {
						limit = {
							KOL = {
								exists = yes
								is_elector = yes
								is_an_ecclesiastical_country = yes
								NOT = { has_country_modifier = german_erzkanzler }
								NOT = { has_country_modifier = italian_erzkanzler }
								NOT = { has_country_modifier = burgundian_erzkanzler }
								NOT = { has_country_modifier = erztruchsess }
								NOT = { has_country_modifier = erzmarschall }
								NOT = { has_country_modifier = erzkaemmerer }
								NOT = { has_country_modifier = erzmundschenk }
							}
						}
						KOL = {
							add_country_modifier = {
								name = italian_erzkanzler
								duration = -1
							}
						}
					}
					else = {
						random_elector = {
							limit = {
								is_an_ecclesiastical_country = yes
								NOT = { has_country_modifier = german_erzkanzler }
								NOT = { has_country_modifier = italian_erzkanzler }
								NOT = { has_country_modifier = burgundian_erzkanzler }
								NOT = { has_country_modifier = erztruchsess }
								NOT = { has_country_modifier = erzmarschall }
								NOT = { has_country_modifier = erzkaemmerer }
								NOT = { has_country_modifier = erzmundschenk }
							}
							add_country_modifier = {
								name = italian_erzkanzler
								duration = -1
							}
						}
					}
				}
				if = {
					limit = {
						NOT = {
							any_elector = {
								has_country_modifier = burgundian_erzkanzler
							}
						}
						any_elector = {
							is_an_ecclesiastical_country = yes
							NOT = { has_country_modifier = german_erzkanzler }
							NOT = { has_country_modifier = italian_erzkanzler }
							NOT = { has_country_modifier = burgundian_erzkanzler }
							NOT = { has_country_modifier = erztruchsess }
							NOT = { has_country_modifier = erzmarschall }
							NOT = { has_country_modifier = erzkaemmerer }
							NOT = { has_country_modifier = erzmundschenk }
						}
					}
					if = {
						limit = {
							TRI = {
								exists = yes
								is_elector = yes
								is_an_ecclesiastical_country = yes
								NOT = { has_country_modifier = german_erzkanzler }
								NOT = { has_country_modifier = italian_erzkanzler }
								NOT = { has_country_modifier = burgundian_erzkanzler }
								NOT = { has_country_modifier = erztruchsess }
								NOT = { has_country_modifier = erzmarschall }
								NOT = { has_country_modifier = erzkaemmerer }
								NOT = { has_country_modifier = erzmundschenk }
							}
						}
						TRI = {
							add_country_modifier = {
								name = burgundian_erzkanzler
								duration = -1
							}
						}
					}
					else = {
						random_elector = {
							limit = {
								is_an_ecclesiastical_country = yes
								NOT = { has_country_modifier = german_erzkanzler }
								NOT = { has_country_modifier = italian_erzkanzler }
								NOT = { has_country_modifier = burgundian_erzkanzler }
								NOT = { has_country_modifier = erztruchsess }
								NOT = { has_country_modifier = erzmarschall }
								NOT = { has_country_modifier = erzkaemmerer }
								NOT = { has_country_modifier = erzmundschenk }
							}
							add_country_modifier = {
								name = burgundian_erzkanzler
								duration = -1
							}
						}
					}
				}
				if = {
					limit = {
						NOT = { has_country_modifier = erztruchsess }
						NOT = {
							any_elector = {
								has_country_modifier = erztruchsess
							}
						}
						OR = {
							AND = {
								is_elector = yes
								NOT = { has_country_modifier = german_erzkanzler }
								NOT = { has_country_modifier = italian_erzkanzler }
								NOT = { has_country_modifier = burgundian_erzkanzler }
								NOT = { has_country_modifier = erztruchsess }
								NOT = { has_country_modifier = erzmarschall }
								NOT = { has_country_modifier = erzkaemmerer }
								NOT = { has_country_modifier = erzmundschenk }
							}
							any_elector = {
								is_a_secular_country = yes
								NOT = { has_country_modifier = german_erzkanzler }
								NOT = { has_country_modifier = italian_erzkanzler }
								NOT = { has_country_modifier = burgundian_erzkanzler }
								NOT = { has_country_modifier = erztruchsess }
								NOT = { has_country_modifier = erzmarschall }
								NOT = { has_country_modifier = erzkaemmerer }
								NOT = { has_country_modifier = erzmundschenk }
							}
						}
					}
					if = {
						limit = {
							PAL = {
								exists = yes
								is_elector = yes
								is_a_secular_country = yes
								NOT = { has_country_modifier = german_erzkanzler }
								NOT = { has_country_modifier = italian_erzkanzler }
								NOT = { has_country_modifier = burgundian_erzkanzler }
								NOT = { has_country_modifier = erztruchsess }
								NOT = { has_country_modifier = erzmarschall }
								NOT = { has_country_modifier = erzkaemmerer }
								NOT = { has_country_modifier = erzmundschenk }
							}
						}
						PAL = {
							add_country_modifier = {
								name = erztruchsess
								duration = -1
							}
						}
					}
					else_if = {
						limit = {
							is_elector = yes
							NOT = { has_country_modifier = german_erzkanzler }
							NOT = { has_country_modifier = italian_erzkanzler }
							NOT = { has_country_modifier = burgundian_erzkanzler }
							NOT = { has_country_modifier = erztruchsess }
							NOT = { has_country_modifier = erzmarschall }
							NOT = { has_country_modifier = erzkaemmerer }
							NOT = { has_country_modifier = erzmundschenk }
						}
						add_country_modifier = {
							name = erztruchsess
							duration = -1
						}
					}
					else = {
						random_elector = {
							limit = {
								is_a_secular_country = yes
								NOT = { has_country_modifier = german_erzkanzler }
								NOT = { has_country_modifier = italian_erzkanzler }
								NOT = { has_country_modifier = burgundian_erzkanzler }
								NOT = { has_country_modifier = erztruchsess }
								NOT = { has_country_modifier = erzmarschall }
								NOT = { has_country_modifier = erzkaemmerer }
								NOT = { has_country_modifier = erzmundschenk }
							}
							add_country_modifier = {
								name = erztruchsess
								duration = -1
							}
						}
					}
				}
				if = {
					limit = {
						NOT = { has_country_modifier = erzmarschall }
						NOT = {
							any_elector = {
								has_country_modifier = erzmarschall
							}
						}
						OR = {
							AND = {
								is_elector = yes
								NOT = { has_country_modifier = german_erzkanzler }
								NOT = { has_country_modifier = italian_erzkanzler }
								NOT = { has_country_modifier = burgundian_erzkanzler }
								NOT = { has_country_modifier = erztruchsess }
								NOT = { has_country_modifier = erzmarschall }
								NOT = { has_country_modifier = erzkaemmerer }
								NOT = { has_country_modifier = erzmundschenk }
							}
							any_elector = {
								is_a_secular_country = yes
								NOT = { has_country_modifier = german_erzkanzler }
								NOT = { has_country_modifier = italian_erzkanzler }
								NOT = { has_country_modifier = burgundian_erzkanzler }
								NOT = { has_country_modifier = erztruchsess }
								NOT = { has_country_modifier = erzmarschall }
								NOT = { has_country_modifier = erzkaemmerer }
								NOT = { has_country_modifier = erzmundschenk }
							}
						}
					}
					if = {
						limit = {
							SAX = {
								exists = yes
								is_elector = yes
								is_a_secular_country = yes
								NOT = { has_country_modifier = german_erzkanzler }
								NOT = { has_country_modifier = italian_erzkanzler }
								NOT = { has_country_modifier = burgundian_erzkanzler }
								NOT = { has_country_modifier = erztruchsess }
								NOT = { has_country_modifier = erzmarschall }
								NOT = { has_country_modifier = erzkaemmerer }
								NOT = { has_country_modifier = erzmundschenk }
							}
						}
						SAX = {
							add_country_modifier = {
								name = erzmarschall
								duration = -1
							}
						}
					}
					else_if = {
						limit = {
							is_elector = yes
							NOT = { has_country_modifier = german_erzkanzler }
							NOT = { has_country_modifier = italian_erzkanzler }
							NOT = { has_country_modifier = burgundian_erzkanzler }
							NOT = { has_country_modifier = erztruchsess }
							NOT = { has_country_modifier = erzmarschall }
							NOT = { has_country_modifier = erzkaemmerer }
							NOT = { has_country_modifier = erzmundschenk }
						}
						add_country_modifier = {
							name = erzmarschall
							duration = -1
						}
					}
					else = {
						random_elector = {
							limit = {
								is_a_secular_country = yes
								NOT = { has_country_modifier = german_erzkanzler }
								NOT = { has_country_modifier = italian_erzkanzler }
								NOT = { has_country_modifier = burgundian_erzkanzler }
								NOT = { has_country_modifier = erztruchsess }
								NOT = { has_country_modifier = erzmarschall }
								NOT = { has_country_modifier = erzkaemmerer }
								NOT = { has_country_modifier = erzmundschenk }
							}
							add_country_modifier = {
								name = erzmarschall
								duration = -1
							}
						}
					}
				}
				if = {
					limit = {
						NOT = { has_country_modifier = erzkaemmerer }
						NOT = {
							any_elector = {
								has_country_modifier = erzkaemmerer
							}
						}
						OR = {
							AND = {
								is_elector = yes
								NOT = { has_country_modifier = german_erzkanzler }
								NOT = { has_country_modifier = italian_erzkanzler }
								NOT = { has_country_modifier = burgundian_erzkanzler }
								NOT = { has_country_modifier = erztruchsess }
								NOT = { has_country_modifier = erzmarschall }
								NOT = { has_country_modifier = erzkaemmerer }
								NOT = { has_country_modifier = erzmundschenk }
							}
							any_elector = {
								is_a_secular_country = yes
								NOT = { has_country_modifier = german_erzkanzler }
								NOT = { has_country_modifier = italian_erzkanzler }
								NOT = { has_country_modifier = burgundian_erzkanzler }
								NOT = { has_country_modifier = erztruchsess }
								NOT = { has_country_modifier = erzmarschall }
								NOT = { has_country_modifier = erzkaemmerer }
								NOT = { has_country_modifier = erzmundschenk }
							}
						}
					}
					if = {
						limit = {
							BRA = {
								exists = yes
								is_elector = yes
								is_a_secular_country = yes
								NOT = { has_country_modifier = german_erzkanzler }
								NOT = { has_country_modifier = italian_erzkanzler }
								NOT = { has_country_modifier = burgundian_erzkanzler }
								NOT = { has_country_modifier = erztruchsess }
								NOT = { has_country_modifier = erzmarschall }
								NOT = { has_country_modifier = erzkaemmerer }
								NOT = { has_country_modifier = erzmundschenk }
							}
						}
						BRA = {
							add_country_modifier = {
								name = erzkaemmerer
								duration = -1
							}
						}
					}
					else_if = {
						limit = {
							is_elector = yes
							NOT = { has_country_modifier = german_erzkanzler }
							NOT = { has_country_modifier = italian_erzkanzler }
							NOT = { has_country_modifier = burgundian_erzkanzler }
							NOT = { has_country_modifier = erztruchsess }
							NOT = { has_country_modifier = erzmarschall }
							NOT = { has_country_modifier = erzkaemmerer }
							NOT = { has_country_modifier = erzmundschenk }
						}
						add_country_modifier = {
							name = erzkaemmerer
							duration = -1
						}
					}
					else = {
						random_elector = {
							limit = {
								is_a_secular_country = yes
								NOT = { has_country_modifier = german_erzkanzler }
								NOT = { has_country_modifier = italian_erzkanzler }
								NOT = { has_country_modifier = burgundian_erzkanzler }
								NOT = { has_country_modifier = erztruchsess }
								NOT = { has_country_modifier = erzmarschall }
								NOT = { has_country_modifier = erzkaemmerer }
								NOT = { has_country_modifier = erzmundschenk }
							}
							add_country_modifier = {
								name = erzkaemmerer
								duration = -1
							}
						}
					}
				}
				if = {
					limit = {
						NOT = { has_country_modifier = erzmundschenk }
						NOT = {
							any_elector = {
								has_country_modifier = erzmundschenk
							}
						}
						OR = {
							AND = {
								is_elector = yes
								NOT = { has_country_modifier = german_erzkanzler }
								NOT = { has_country_modifier = italian_erzkanzler }
								NOT = { has_country_modifier = burgundian_erzkanzler }
								NOT = { has_country_modifier = erztruchsess }
								NOT = { has_country_modifier = erzmarschall }
								NOT = { has_country_modifier = erzkaemmerer }
								NOT = { has_country_modifier = erzmundschenk }
							}
							any_elector = {
								is_a_secular_country = yes
								NOT = { has_country_modifier = german_erzkanzler }
								NOT = { has_country_modifier = italian_erzkanzler }
								NOT = { has_country_modifier = burgundian_erzkanzler }
								NOT = { has_country_modifier = erztruchsess }
								NOT = { has_country_modifier = erzmarschall }
								NOT = { has_country_modifier = erzkaemmerer }
								NOT = { has_country_modifier = erzmundschenk }
							}
						}
					}
					if = {
						limit = {
							BOH = {
								exists = yes
								is_elector = yes
								is_a_secular_country = yes
								NOT = { has_country_modifier = german_erzkanzler }
								NOT = { has_country_modifier = italian_erzkanzler }
								NOT = { has_country_modifier = burgundian_erzkanzler }
								NOT = { has_country_modifier = erztruchsess }
								NOT = { has_country_modifier = erzmarschall }
								NOT = { has_country_modifier = erzkaemmerer }
								NOT = { has_country_modifier = erzmundschenk }
							}
						}
						BOH = {
							add_country_modifier = {
								name = erzmundschenk
								duration = -1
							}
						}
					}
					else_if = {
						limit = {
							is_elector = yes
							NOT = { has_country_modifier = german_erzkanzler }
							NOT = { has_country_modifier = italian_erzkanzler }
							NOT = { has_country_modifier = burgundian_erzkanzler }
							NOT = { has_country_modifier = erztruchsess }
							NOT = { has_country_modifier = erzmarschall }
							NOT = { has_country_modifier = erzkaemmerer }
							NOT = { has_country_modifier = erzmundschenk }
						}
						add_country_modifier = {
							name = erzmundschenk
							duration = -1
						}
					}
					else = {
						random_elector = {
							limit = {
								is_a_secular_country = yes
								NOT = { has_country_modifier = german_erzkanzler }
								NOT = { has_country_modifier = italian_erzkanzler }
								NOT = { has_country_modifier = burgundian_erzkanzler }
								NOT = { has_country_modifier = erztruchsess }
								NOT = { has_country_modifier = erzmarschall }
								NOT = { has_country_modifier = erzkaemmerer }
								NOT = { has_country_modifier = erzmundschenk }
							}
							add_country_modifier = {
								name = erzmundschenk
								duration = -1
							}
						}
					}
				}
			}
			else = {
				clear_global_event_target = hre_erzkanzler
				every_country = {
					limit = {
						OR = {
							has_country_modifier = german_erzkanzler
							has_country_modifier = italian_erzkanzler
							has_country_modifier = burgundian_erzkanzler
							has_country_modifier = erztruchsess
							has_country_modifier = erzmarschall
							has_country_modifier = erzkaemmerer
							has_country_modifier = erzmundschenk
						}
					}
					remove_country_modifier = german_erzkanzler
					remove_country_modifier = italian_erzkanzler
					remove_country_modifier = burgundian_erzkanzler
					remove_country_modifier = erztruchsess
					remove_country_modifier = erzmarschall
					remove_country_modifier = erzkaemmerer
					remove_country_modifier = erzmundschenk
				}
			}
		}
	}

	option = {
		name = "besseres_hrr_events13.EVTOPT1"

		ai_chance = { factor = 100 }
	}
}

# Imperial Regency now lead by the Erzkanzler
country_event = {
	id = besseres_hrr_events.14
	title = "besseres_hrr_events.EVTNAME14"
	desc = "besseres_hrr_events.EVTDESC14"
	picture = HRE_eventPicture

	trigger = {
		NOT = { tag = JMN }
		is_emperor = yes
		has_regency = yes
		has_consort_regency = no
		NOT = { has_ruler_flag = erzkanzler_rules_emperor }
		NOT = { has_country_modifier = german_erzkanzler }
		any_elector = {
			has_country_modifier = german_erzkanzler
		}
	}

	mean_time_to_happen = { days = 1 }

	immediate = {
		hidden_effect = {
			export_to_variable = {
				which = erzkanzler_adm_var
				value = ADM
				who = event_target:hre_erzkanzler
			}
			export_to_variable = {
				which = erzkanzler_dip_var
				value = DIP
				who = event_target:hre_erzkanzler
			}
			export_to_variable = {
				which = erzkanzler_mil_var
				value = MIL
				who = event_target:hre_erzkanzler
			}
		}
	}

	option = {
		name = "besseres_hrr_events14.EVTOPT1"

		custom_tooltip = ERZKANZLER_NOW_RULES_EMPEROR

		hidden_effect = {
			define_ruler = {
				name = "(Erzkanzler)"
				regency = yes
				ADM = 0
				DIP = 0
				MIL = 0
				fixed = yes
				male = yes
			}
			while = {
				limit = {
					check_variable = { which = erzkanzler_adm_var value = 1 }
				}
				change_variable = { which = erzkanzler_adm_var value = -1 }
				change_adm = 1
			}
			while = {
				limit = {
					check_variable = { which = erzkanzler_dip_var value = 1 }
				}
				change_variable = { which = erzkanzler_dip_var value = -1 }
				change_dip = 1
			}
			while = {
				limit = {
					check_variable = { which = erzkanzler_mil_var value = 1 }
				}
				change_variable = { which = erzkanzler_mil_var value = -1 }
				change_mil = 1
			}
			set_ruler_flag = erzkanzler_rules_emperor
		}
	}
}

# Emperor demands soldiers from members
country_event = {
	id = besseres_hrr_events.15
	title = "besseres_hrr_events.EVTNAME15"
	desc = "besseres_hrr_events.EVTDESC15"
	picture = HRE_eventPicture

	trigger = {
		NOT = { tag = JMN }
		is_emperor = yes
		is_at_war = yes
		NOT = { manpower = 1 }
		any_country = {
			is_at_war = no
			is_part_of_hre = yes
			OR = {
				NOT = { has_country_flag = emperor_requested_hre_soldiers }
				had_country_flag = { flag = emperor_requested_hre_soldiers days = 1825 }
			}
		}
		any_country = {
			is_part_of_hre = no
			war_with = ROOT
		}
	}

	mean_time_to_happen = { months = 60 }

	immediate = {
		hidden_effect = {
			random_country = {
				limit = {
					is_at_war = no
					is_part_of_hre = yes
					OR = {
						NOT = { has_country_flag = emperor_requested_hre_soldiers }
						had_country_flag = { flag = emperor_requested_hre_soldiers days = 1825 }
					}
				}
				save_event_target_as = hre_member_gives_manpower
			}
		}
	}

	option = {	# Manpower
		name = "besseres_hrr_events15.EVTOPT1"

		ai_chance = {
			factor = 0.6
		}

		custom_tooltip = ASK_HRE_MEMBER_TO_SUPPORT_EMPEROR_WITH_MANPOWER

		event_target:hre_member_gives_manpower = {
			clr_country_flag = emperor_requested_hre_soldiers
			set_country_flag = emperor_requested_hre_soldiers
			country_event = { id = besseres_hrr_events.16 days = 14 }
		}
	}

	option = {	# General
		name = "besseres_hrr_events15.EVTOPT2"

		trigger = {
			event_target:hre_member_gives_manpower = {
				has_country_modifier = erzmarschall
			}
		}

		ai_chance = {
			factor = 0.3
		}

		custom_tooltip = ASK_ERZMARSCHALL_TO_SUPPORT_EMPEROR_WITH_GENERAL

		set_country_flag = emperor_asks_for_general
		event_target:hre_member_gives_manpower = {
			clr_country_flag = emperor_requested_hre_soldiers
			set_country_flag = emperor_requested_hre_soldiers
			country_event = { id = besseres_hrr_events.16 days = 14 }
		}
	}

	option = { # No
		name = "besseres_hrr_events15.EVTOPT3"

		ai_chance = {
			factor = 0.1
		}

		add_imperial_influence = 1

		event_target:hre_member_gives_manpower = {
			clr_country_flag = emperor_requested_hre_soldiers
			set_country_flag = emperor_requested_hre_soldiers
		}
	}
}

# Emperor demanded soldiers from ROOT, ROOT may accept or deny
country_event = {
	id = besseres_hrr_events.16
	title = "besseres_hrr_events.EVTNAME16"
	desc = {
		trigger = {
			FROM = {
				NOT = { has_country_flag = emperor_asks_for_general }
			}
		}
		desc = "besseres_hrr_events.EVTDESC16.1"
	}
	desc = {
		trigger = {
			FROM = {
				has_country_flag = emperor_asks_for_general
			}
		}
		desc = "besseres_hrr_events.EVTDESC16.2"
	}
	picture = HRE_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			if = {
				limit = {
					FROM = {
						NOT = { has_country_flag = emperor_asks_for_general }
					}
				}
				export_to_variable = {
					which = manpower_to_send
					value = manpower
				}
				divide_variable = { which = manpower_to_send value = 2 }
				divide_variable = { which = manpower_to_send value = 1000 }
				multiply_variable = { which = manpower_to_send value = 1000 }
			}
			if = {
				limit = {
					check_variable = { which = manpower_to_send value = 20 }
				}
				set_variable = { which = manpower_to_send value = 20 }
			}
		}
	}

	option = {
		name = "besseres_hrr_events16.EVTOPT1"

		trigger = {
			FROM = {
				NOT = { has_country_flag = emperor_asks_for_general }
			}
		}

		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.25
				has_opinion = { who = FROM value = 100 }
			}
			modifier = {
				factor = 0.5
				NOT = { has_opinion = { who = FROM value = 50 } }
			}
			modifier = {
				factor = 0
				NOT = { has_opinion = { who = FROM value = 10 } }
			}
			modifier = {
				factor = 0
				NOT = { manpower = 2 }
			}
		}

		custom_tooltip = GIVES_EMPEROR_THIS_AMOUNT_OF_MANPOWER
		hidden_effect = {
			FROM = {
				set_variable = { which = manpower_to_send which = ROOT }
			}
			while = {
				limit = {
					check_variable = { which = manpower_to_send value = 1 }
				}
				change_variable = { which = manpower_to_send value = -1 }
				add_manpower = -1
				FROM = { add_manpower = 1 }
			}
		}

		FROM = { country_event = { id = besseres_hrr_events.17 days = 5 } }

		reverse_add_opinion = {
			who = FROM
			modifier = grateful_for_aid
		}
	}

	option = {
		name = "besseres_hrr_events16.EVTOPT2"

		trigger = {
			FROM = {
				has_country_flag = emperor_asks_for_general
			}
		}

		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.25
				has_opinion = { who = FROM value = 100 }
			}
			modifier = {
				factor = 0.5
				NOT = { has_opinion = { who = FROM value = 50 } }
			}
			modifier = {
				factor = 0
				NOT = { has_opinion = { who = FROM value = 10 } }
			}
			modifier = {
				factor = 0
				OR = {
					AND = {
						NOT = { num_of_generals = 1 }
						NOT = { mil_power = 50 }
					}
					has_commanding_three_star = yes
				}
			}
		}

		custom_tooltip = GIVES_EMPEROR_ONE_GENERAL

		if = {
			limit = {
				num_of_generals = 1
			}
			kill_leader = {
				type = general
			}
		}
		else = {
			add_mil_power = -50
		}

		FROM = { country_event = { id = besseres_hrr_events.17 days = 5 } }

		reverse_add_opinion = {
			who = FROM
			modifier = grateful_for_aid
		}
	}

	option = {
		name = "besseres_hrr_events16.EVTOPT3"

		ai_chance = {
			factor = 50
			modifier = {
				factor = 10.0
				NOT = { has_opinion = { who = FROM value = -50 } }
			}
			modifier = {
				factor = 0.5
				NOT = { has_opinion = { who = FROM value = 100 } }
			}
			modifier = {
				factor = 0
				has_opinion = { who = FROM value = 150 }
				OR = {
					AND = {
						manpower = 2
						FROM = { NOT = { has_country_flag = emperor_asks_for_general } }
					}
					AND = {
						has_commanding_three_star = no
						OR = {
							num_of_generals = 1
							mil_power = 50
						}
						FROM = { has_country_flag = emperor_asks_for_general }
					}
				}
			}
		}
		reverse_add_opinion = {
			who = FROM
			modifier = denied_aid
		}
		add_opinion = {
			who = FROM
			modifier = outrageous_demands
		}

		FROM = { country_event = { id = besseres_hrr_events.18 days = 5 } }
	}
}

# Emperor receives demanded soldiers/general from FROM
country_event = {
	id = besseres_hrr_events.17
	title = "besseres_hrr_events.EVTNAME17"
	desc = "besseres_hrr_events.EVTDESC17"
	picture = HRE_eventPicture

	is_triggered_only = yes

	option = {
		name = besseres_hrr_events17.EVTOPT1

		if = {
			limit = {
				has_country_flag = emperor_asks_for_general
			}
			clr_country_flag = emperor_asks_for_general
			create_general = { tradition = 70 }
		}
		else = {
			custom_tooltip = EMPEROR_RECEIVES_THIS_AMOUNT_OF_MANPOWER
		}

		tooltip = {
			add_opinion = {
				who = FROM
				modifier = grateful_for_aid
			}
		}
	}
}

# Emperor receives nothing from FROM
country_event = {
	id = besseres_hrr_events.18
	title = "besseres_hrr_events.EVTNAME18"
	desc = "besseres_hrr_events.EVTDESC18"
	picture = HRE_eventPicture

	is_triggered_only = yes

	option = {
		name = besseres_hrr_events18.EVTOPT1

		if = {
			limit = {
				has_country_flag = emperor_asks_for_general
			}
			clr_country_flag = emperor_asks_for_general
		}

		tooltip = {
			add_opinion = {
				who = FROM
				modifier = denied_aid
			}
			reverse_add_opinion = {
				who = FROM
				modifier = outrageous_demands
			}
		}
	}
}

# Emperor can give electorate to loyal elector
country_event = {
	id = besseres_hrr_events.19
	title = "besseres_hrr_events.EVTNAME19"
	desc = "besseres_hrr_events.EVTDESC19"
	picture = HRE_eventPicture

	major = yes
	major_trigger = {
		OR = {
			is_part_of_hre = yes
			is_in_league_war = yes
			any_subject_country = {
				is_elector = yes
			}
			has_country_flag = debug_gets_major_hre_events
		}
	}

	trigger = {
		has_dlc = "Art of War"
		NOT = { tag = JMN }
		is_emperor = yes
		hre_leagues_enabled = yes
		is_in_league_war = yes
		any_elector = {
			is_league_leader = no
			is_league_enemy = ROOT
			is_in_league_war = yes
			NOT = { has_country_flag = could_revoke_this_elector_@ROOT }
			OR = {
				capital_scope = {
					controller = {
						OR = {
							tag = ROOT
							is_subject_of = ROOT
							alliance_with = ROOT
							is_league_friend = ROOT
						}
					}
				}
				AND = {
					is_in_war = {
						attackers = THIS
						casus_belli = cb_religious_league
					}
					NOT = {
						is_in_war = {
							attackers = THIS
							casus_belli = cb_religious_league
							war_score = -25
						}
					}
					any_owned_province = {
						controller = {
							OR = {
								tag = ROOT
								is_subject_of = ROOT
								alliance_with = ROOT
								is_league_friend = ROOT
							}
						}
					}
				}
			}
		}
		any_country = {
			is_subject = no
			is_elector = no
			is_part_of_hre = yes
			NOT = { tag = ROOT }
			is_league_friend = ROOT
		}
	}

	mean_time_to_happen = { months = 12 }

	immediate = {
		hidden_effect = {
			if = {
				limit = {
					NOT = { has_global_flag = emperor_while_league_war_saved }
				}
				set_global_flag = emperor_while_league_war_saved
				save_global_event_target_as = emperor_while_league_war
			}
			if = {
				limit = {
					PAL = {
						is_league_leader = no
						is_league_enemy = ROOT
						is_in_league_war = yes
						NOT = { has_country_flag = could_revoke_this_elector_@ROOT }
						OR = {
							capital_scope = {
								controller = {
									OR = {
										tag = ROOT
										is_subject_of = ROOT
										alliance_with = ROOT
										is_league_friend = ROOT
									}
								}
							}
							AND = {
								is_in_war = {
									casus_belli = cb_religious_league
								}
								NOT = {
									is_in_war = {
										casus_belli = cb_religious_league
										war_score = -25
									}
								}
								any_owned_province = {
									controller = {
										OR = {
											tag = ROOT
											is_subject_of = ROOT
											alliance_with = ROOT
											is_league_friend = ROOT
										}
									}
								}
							}
						}
					}
				}
				PAL = {
					save_event_target_as = could_revoke_elector
					set_country_flag = could_revoke_this_elector_@ROOT
				}
			}
			else = {
				random_elector = {
					limit = {
						is_league_leader = no
						is_league_enemy = ROOT
						is_in_league_war = yes
						NOT = { has_country_flag = could_revoke_this_elector_@ROOT }
						OR = {
							capital_scope = {
								controller = {
									OR = {
										tag = ROOT
										is_subject_of = ROOT
										alliance_with = ROOT
										is_league_friend = ROOT
									}
								}
							}
							AND = {
								is_in_war = {
									casus_belli = cb_religious_league
								}
								NOT = {
									is_in_war = {
										casus_belli = cb_religious_league
										war_score = -25
									}
								}
								any_owned_province = {
									controller = {
										OR = {
											tag = ROOT
											is_subject_of = ROOT
											alliance_with = ROOT
											is_league_friend = ROOT
										}
									}
								}
							}
						}
					}
					save_event_target_as = could_revoke_elector
					set_country_flag = could_revoke_this_elector_@ROOT
				}
			}
			if = {
				limit = {
					event_target:could_revoke_elector = {
						tag = PAL
					}
					BAV = {
						is_subject = no
						is_elector = no
						is_part_of_hre = yes
						NOT = { tag = ROOT }
						is_league_friend = ROOT
					}
				}
				BAV = {
					save_event_target_as = could_grant_elector
				}
			}
			else = {
				random_country = {
					limit = {
						is_subject = no
						is_elector = no
						is_part_of_hre = yes
						NOT = { tag = ROOT }
						is_league_friend = ROOT
					}
					save_event_target_as = could_grant_elector
				}
			}
		}
	}

	option = { # Grant their elector state to our friends
		name = besseres_hrr_events19.EVTOPT1

		ai_chance = {
			factor = 1

			modifier = {
				factor = 0
				OR = {
					event_target:could_revoke_elector = {
						NOT = { tag = PAL }
					}
					event_target:could_grant_elector = {
						NOT = { tag = BAV }
					}
				}
			}
		}

		event_target:could_revoke_elector = {
			elector = no
			set_country_flag = revoked_elector_while_in_league_war
		}

		event_target:could_grant_elector = {
			elector = yes
		}

		custom_tooltip = IF_LEAGUE_WAR_IS_NOT_WON_WILL_BECOME_ELECTOR_AGAIN

		if = {
			limit = {
				has_global_flag = hre_golden_bull_enacted
				NOT = { has_global_flag = hre_golden_bull_removed }
				OR = {
					AND = {
						calc_true_if = {
							all_elector = {
								is_a_secular_country = yes
							}
							amount = 4
						}
						event_target:could_grant_elector = {
							is_a_secular_country = yes
						}
						event_target:could_revoke_elector = {
							is_an_ecclesiastical_country = yes
						}
					}
					AND = {
						OR = {
							AND = {
								num_of_max_electors = { value = 8 }
								calc_true_if = {
									all_elector = {
										is_an_ecclesiastical_country = yes
									}
									amount = 4
								}
							}
							AND = {
								NOT = { num_of_max_electors = { value = 8 } }
								calc_true_if = {
									all_elector = {
										is_an_ecclesiastical_country = yes
									}
									amount = 3
								}
							}
						}
						event_target:could_revoke_elector = {
							is_a_secular_country = yes
						}
						event_target:could_grant_elector = {
							is_an_ecclesiastical_country = yes
						}
					}
				}
			}
			custom_tooltip = SWAPPING_ELECTOR_STATUSES_BETWEEN_THESE_COUNTRIES_WILL_WORSEN_IMPERIAL_AUTHORITY_GAIN_BECAUSE_OF_GOLDEN_BULL
		}
	}

	option = { # Don't revoke their elector status
		name = besseres_hrr_events19.EVTOPT2

		ai_chance = {
			factor = 1

			modifier = {
				factor = 0
				event_target:could_revoke_elector = {
					tag = PAL
				}
				event_target:could_grant_elector = {
					tag = BAV
				}
			}
		}

		custom_tooltip = LEAGUE_WAR_ELECTOR_STATUS_NOT_REVOKED
	}
}

# Emperor gives elector status back after losing the league war
country_event = {
	id = besseres_hrr_events.20
	title = "besseres_hrr_events.EVTNAME20"
	desc = "besseres_hrr_events.EVTDESC20"
	picture = HRE_eventPicture

	fire_only_once = yes

	major = yes
	major_trigger = {
		OR = {
			is_part_of_hre = yes
			any_owned_province = {
				is_part_of_hre = yes
			}
			any_neighbor_country = {
				is_part_of_hre = yes
			}
			any_subject_country = {
				is_part_of_hre = yes
			}
			has_country_flag = debug_gets_major_hre_events
		}
	}

	trigger = {
		has_dlc = "Art of War"
		NOT = { tag = JMN }
		is_emperor = yes
		is_in_league_war = no
		has_global_flag = evangelical_union_happened
		OR = {
			AND = {
				hre_religion_locked = yes
				NOT = { hre_religion = catholic }
			}
			hre_religion_treaty = yes
		}
		any_country = {
			is_elector = no
			has_country_flag = revoked_elector_while_in_league_war
		}
	}

	mean_time_to_happen = { days = 1 }

	option = {
		name = "besseres_hrr_events20.EVTOPT1"

		every_country = {
			limit = {
				is_elector = no
				has_country_flag = revoked_elector_while_in_league_war
			}
			clr_country_flag = revoked_elector_while_in_league_war
			elector = yes
		}

		hidden_effect = {
			clear_global_event_target = emperor_while_league_war
		}
	}
}

# Save year of election (HRE)
country_event = {
	id = besseres_hrr_events.21
	title = "besseres_hrr_events.EVTNAME21"
	desc = "besseres_hrr_events.EVTDESC21"
	picture = HRE_eventPicture

	hidden = yes

	trigger = {
		NOT = { tag = JMN }
		is_emperor = yes
		OR = {
			AND = {
				has_regency = no
				NOT = { has_ruler_flag = holy_roman_king_election_year_saved }
			}
			AND = {
				has_regency = yes
				NOT = { has_heir_flag = holy_roman_king_election_year_saved }
			}
		}
		religion = catholic
		NOT = { is_religion_enabled = protestant }
		NOT = { has_ruler_flag = zum_kaiser_gekroent }
	}

	mean_time_to_happen = { days = 1 }

	immediate = {
		hidden_effect = {
			export_to_variable = {
				which = year_of_holy_roman_king_election
				value = trigger_value:is_year
			}
			change_variable = { which = year_of_holy_roman_king_election value = -1 }
			if = {
				limit = {
					has_regency = no
				}
				set_ruler_flag = holy_roman_king_election_year_saved
			}
			else = {
				set_heir_flag = holy_roman_king_election_year_saved
			}
		}
	}

	option = {
		name = "besseres_hrr_events21.EVTOPT1"

		ai_chance = { factor = 100 }
	}
}

# King becomes Emperor (HRE) (triggers first event)
country_event = {
	id = besseres_hrr_events.22
	title = "besseres_hrr_events.EVTNAME22"
	desc = "besseres_hrr_events.EVTDESC22"
	picture = HRE_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			FROM = {
				remove_province_triggered_modifier = preparations_for_travel_to_rome
			}
		}
	}

	option = {
		name = "besseres_hrr_events22.EVTOPT1"

		if = {
			limit = { is_emperor = yes }
			custom_tooltip = HOLY_ROMAN_KING_TRAVELS_TO_ROME_TO_BE_CROWNED_EMPEROR

			if = {
				limit = {
					is_at_war = no
				}
				if = {
					limit = {
						NOT = { is_year = 1300 }
					}
					if = {
						limit = {
							has_global_flag = hre_incident_investiture_controversy_emperor
						}
						random_list = {
							1 = {
								country_event = { id = besseres_hrr_events.1 days = 14 tooltip = HOLY_ROMAN_KING_IS_CROWNED_IN_14_DAYS }
							}
							2 = {
								country_event = { id = besseres_hrr_events.1 days = 21 tooltip = HOLY_ROMAN_KING_IS_CROWNED_IN_21_DAYS }
							}
							3 = {
								country_event = { id = besseres_hrr_events.1 days = 31 tooltip = HOLY_ROMAN_KING_IS_CROWNED_IN_31_DAYS }
							}
							10 = {
								country_event = { id = besseres_hrr_events.23 days = 7 tooltip = HOLY_ROMAN_KING_DIES_ON_HIS_WAY_TO_CORONATION }
							}
							75 = {
								country_event = { id = besseres_hrr_events.26 days = 7 tooltip = POPE_REFUSES_TO_CROWN_HOLY_ROMAN_KING }
							}
						}
					}
					else_if = {
						limit = {
							NOT = {
								OR = {
									AND = {
										exists = PAP
										PAP = {
											has_ruler_flag = replaced_pope_by_emperor
										}
									}
									AND = {
										exists = PAP
										PAP = {
											has_opinion = {
												who = ROOT
												value = 75
											}
										}
									}
									AND = {
										NOT = { exists = PAP }
										is_papal_controller = yes
										OR = {
											papal_influence = 25
											invested_papal_influence = 25
										}
									}
									AND = {
										NOT = { exists = PAP }
										is_papal_controller = no
										any_country = {
											is_papal_controller = yes
											has_opinion = {
												who = ROOT
												value = 50
											}
										}
									}
								}
							}
						}
						random_list = {
							45 = {
								country_event = { id = besseres_hrr_events.1 days = 14 tooltip = HOLY_ROMAN_KING_IS_CROWNED_IN_14_DAYS }
							}
							10 = {
								country_event = { id = besseres_hrr_events.1 days = 21 tooltip = HOLY_ROMAN_KING_IS_CROWNED_IN_21_DAYS }
							}
							5 = {
								country_event = { id = besseres_hrr_events.1 days = 31 tooltip = HOLY_ROMAN_KING_IS_CROWNED_IN_31_DAYS }
							}
							10 = {
								country_event = { id = besseres_hrr_events.23 days = 7 tooltip = HOLY_ROMAN_KING_DIES_ON_HIS_WAY_TO_CORONATION }
							}
							30 = {
								country_event = { id = besseres_hrr_events.26 days = 7 tooltip = POPE_REFUSES_TO_CROWN_HOLY_ROMAN_KING }
							}
						}
					}
					else = {
						random_list = {
							65 = {
								country_event = { id = besseres_hrr_events.1 days = 14 tooltip = HOLY_ROMAN_KING_IS_CROWNED_IN_14_DAYS }
							}
							15 = {
								country_event = { id = besseres_hrr_events.1 days = 21 tooltip = HOLY_ROMAN_KING_IS_CROWNED_IN_21_DAYS }
							}
							10 = {
								country_event = { id = besseres_hrr_events.1 days = 31 tooltip = HOLY_ROMAN_KING_IS_CROWNED_IN_31_DAYS }
							}
							10 = {
								country_event = { id = besseres_hrr_events.23 days = 7 tooltip = HOLY_ROMAN_KING_DIES_ON_HIS_WAY_TO_CORONATION }
							}
						}
					}
				}
				else = {
					if = {
						limit = {
							NOT = {
								OR = {
									AND = {
										exists = PAP
										PAP = {
											has_ruler_flag = replaced_pope_by_emperor
										}
									}
									AND = {
										exists = PAP
										PAP = {
											has_opinion = {
												who = ROOT
												value = 75
											}
										}
									}
									AND = {
										NOT = { exists = PAP }
										is_papal_controller = yes
										OR = {
											papal_influence = 25
											invested_papal_influence = 25
										}
									}
									AND = {
										NOT = { exists = PAP }
										is_papal_controller = no
										any_country = {
											is_papal_controller = yes
											has_opinion = {
												who = ROOT
												value = 50
											}
										}
									}
								}
							}
						}
						random_list = {
							50 = {
								country_event = { id = besseres_hrr_events.1 days = 14 tooltip = HOLY_ROMAN_KING_IS_CROWNED_IN_14_DAYS }
							}
							10 = {
								country_event = { id = besseres_hrr_events.1 days = 21 tooltip = HOLY_ROMAN_KING_IS_CROWNED_IN_21_DAYS }
							}
							5 = {
								country_event = { id = besseres_hrr_events.1 days = 31 tooltip = HOLY_ROMAN_KING_IS_CROWNED_IN_31_DAYS }
							}
							5 = {
								country_event = { id = besseres_hrr_events.23 days = 7 tooltip = HOLY_ROMAN_KING_DIES_ON_HIS_WAY_TO_CORONATION }
							}
							30 = {
								country_event = { id = besseres_hrr_events.26 days = 7 tooltip = POPE_REFUSES_TO_CROWN_HOLY_ROMAN_KING }
							}
						}
					}
					else = {
						random_list = {
							70 = {
								country_event = { id = besseres_hrr_events.1 days = 14 tooltip = HOLY_ROMAN_KING_IS_CROWNED_IN_14_DAYS }
							}
							15 = {
								country_event = { id = besseres_hrr_events.1 days = 21 tooltip = HOLY_ROMAN_KING_IS_CROWNED_IN_21_DAYS }
							}
							10 = {
								country_event = { id = besseres_hrr_events.1 days = 31 tooltip = HOLY_ROMAN_KING_IS_CROWNED_IN_31_DAYS }
							}
							5 = {
								country_event = { id = besseres_hrr_events.23 days = 7 tooltip = HOLY_ROMAN_KING_DIES_ON_HIS_WAY_TO_CORONATION }
							}
						}
					}
				}
			}
			else_if = {
				limit = {
					is_at_war = yes
					OR = {
						war_with = PAP
						any_country = {
							is_neighbor_of = PAP
							war_with = ROOT
						}
					}
				}
				if = {
					limit = {
						NOT = {
							OR = {
								AND = {
									exists = PAP
									PAP = {
										has_ruler_flag = replaced_pope_by_emperor
									}
								}
								AND = {
									exists = PAP
									PAP = {
										has_opinion = {
											who = ROOT
											value = 75
										}
									}
								}
								AND = {
									NOT = { exists = PAP }
									is_papal_controller = yes
									OR = {
										papal_influence = 25
										invested_papal_influence = 25
									}
								}
								AND = {
									NOT = { exists = PAP }
									is_papal_controller = no
									any_country = {
										is_papal_controller = yes
										has_opinion = {
											who = ROOT
											value = 50
										}
									}
								}
							}
						}
					}
					random_list = {
						15 = {
							country_event = { id = besseres_hrr_events.1 days = 14 tooltip = HOLY_ROMAN_KING_IS_CROWNED_IN_14_DAYS }
						}
						10 = {
							country_event = { id = besseres_hrr_events.1 days = 21 tooltip = HOLY_ROMAN_KING_IS_CROWNED_IN_21_DAYS }
						}
						5 = {
							country_event = { id = besseres_hrr_events.1 days = 31 tooltip = HOLY_ROMAN_KING_IS_CROWNED_IN_31_DAYS }
						}
						30 = {
							country_event = { id = besseres_hrr_events.23 days = 7 tooltip = HOLY_ROMAN_KING_DIES_ON_HIS_WAY_TO_CORONATION }
						}
						40 = {
							country_event = { id = besseres_hrr_events.26 days = 7 tooltip = POPE_REFUSES_TO_CROWN_HOLY_ROMAN_KING }
						}
					}
				}
				else = {
					random_list = {
						40 = {
							country_event = { id = besseres_hrr_events.1 days = 14 tooltip = HOLY_ROMAN_KING_IS_CROWNED_IN_14_DAYS }
						}
						20 = {
							country_event = { id = besseres_hrr_events.1 days = 21 tooltip = HOLY_ROMAN_KING_IS_CROWNED_IN_21_DAYS }
						}
						10 = {
							country_event = { id = besseres_hrr_events.1 days = 31 tooltip = HOLY_ROMAN_KING_IS_CROWNED_IN_31_DAYS }
						}
						30 = {
							country_event = { id = besseres_hrr_events.23 days = 7 tooltip = HOLY_ROMAN_KING_DIES_ON_HIS_WAY_TO_CORONATION }
						}
					}
				}
			}
			else = {
				if = {
					limit = {
						NOT = { is_year = 1300 }
					}
					if = {
						limit = {
							NOT = {
								OR = {
									AND = {
										exists = PAP
										PAP = {
											has_ruler_flag = replaced_pope_by_emperor
										}
									}
									AND = {
										exists = PAP
										PAP = {
											has_opinion = {
												who = ROOT
												value = 75
											}
										}
									}
									AND = {
										NOT = { exists = PAP }
										is_papal_controller = yes
										OR = {
											papal_influence = 25
											invested_papal_influence = 25
										}
									}
									AND = {
										NOT = { exists = PAP }
										is_papal_controller = no
										any_country = {
											is_papal_controller = yes
											has_opinion = {
												who = ROOT
												value = 50
											}
										}
									}
								}
							}
						}
						random_list = {
							30 = {
								country_event = { id = besseres_hrr_events.1 days = 14 tooltip = HOLY_ROMAN_KING_IS_CROWNED_IN_14_DAYS }
							}
							15 = {
								country_event = { id = besseres_hrr_events.1 days = 21 tooltip = HOLY_ROMAN_KING_IS_CROWNED_IN_21_DAYS }
							}
							10 = {
								country_event = { id = besseres_hrr_events.1 days = 31 tooltip = HOLY_ROMAN_KING_IS_CROWNED_IN_31_DAYS }
							}
							15 = {
								country_event = { id = besseres_hrr_events.23 days = 7 tooltip = HOLY_ROMAN_KING_DIES_ON_HIS_WAY_TO_CORONATION }
							}
							30 = {
								country_event = { id = besseres_hrr_events.26 days = 7 tooltip = POPE_REFUSES_TO_CROWN_HOLY_ROMAN_KING }
							}
						}
					}
					else = {
						random_list = {
							40 = {
								country_event = { id = besseres_hrr_events.1 days = 14 tooltip = HOLY_ROMAN_KING_IS_CROWNED_IN_14_DAYS }
							}
							25 = {
								country_event = { id = besseres_hrr_events.1 days = 21 tooltip = HOLY_ROMAN_KING_IS_CROWNED_IN_21_DAYS }
							}
							20 = {
								country_event = { id = besseres_hrr_events.1 days = 31 tooltip = HOLY_ROMAN_KING_IS_CROWNED_IN_31_DAYS }
							}
							15 = {
								country_event = { id = besseres_hrr_events.23 days = 7 tooltip = HOLY_ROMAN_KING_DIES_ON_HIS_WAY_TO_CORONATION }
							}
						}
					}
				}
				if = {
					limit = {
						NOT = {
							OR = {
								AND = {
									exists = PAP
									PAP = {
										has_ruler_flag = replaced_pope_by_emperor
									}
								}
								AND = {
									exists = PAP
									PAP = {
										has_opinion = {
											who = ROOT
											value = 75
										}
									}
								}
								AND = {
									NOT = { exists = PAP }
									is_papal_controller = yes
									OR = {
										papal_influence = 25
										invested_papal_influence = 25
									}
								}
								AND = {
									NOT = { exists = PAP }
									is_papal_controller = no
									any_country = {
										is_papal_controller = yes
										has_opinion = {
											who = ROOT
											value = 50
										}
									}
								}
							}
						}
					}
					random_list = {
						30 = {
							country_event = { id = besseres_hrr_events.1 days = 14 tooltip = HOLY_ROMAN_KING_IS_CROWNED_IN_14_DAYS }
						}
						20 = {
							country_event = { id = besseres_hrr_events.1 days = 21 tooltip = HOLY_ROMAN_KING_IS_CROWNED_IN_21_DAYS }
						}
						10 = {
							country_event = { id = besseres_hrr_events.1 days = 31 tooltip = HOLY_ROMAN_KING_IS_CROWNED_IN_31_DAYS }
						}
						10 = {
							country_event = { id = besseres_hrr_events.23 days = 7 tooltip = HOLY_ROMAN_KING_DIES_ON_HIS_WAY_TO_CORONATION }
						}
						30 = {
							country_event = { id = besseres_hrr_events.26 days = 7 tooltip = POPE_REFUSES_TO_CROWN_HOLY_ROMAN_KING }
						}
					}
				}
				else = {
					random_list = {
						45 = {
							country_event = { id = besseres_hrr_events.1 days = 14 tooltip = HOLY_ROMAN_KING_IS_CROWNED_IN_14_DAYS }
						}
						25 = {
							country_event = { id = besseres_hrr_events.1 days = 21 tooltip = HOLY_ROMAN_KING_IS_CROWNED_IN_21_DAYS }
						}
						20 = {
							country_event = { id = besseres_hrr_events.1 days = 31 tooltip = HOLY_ROMAN_KING_IS_CROWNED_IN_31_DAYS }
						}
						10 = {
							country_event = { id = besseres_hrr_events.23 days = 7 tooltip = HOLY_ROMAN_KING_DIES_ON_HIS_WAY_TO_CORONATION }
						}
					}
				}
			}
		}
	}
}

# King of HRE dies on his journey to Rome
country_event = {
	id = besseres_hrr_events.23
	title = "besseres_hrr_events.EVTNAME23"
	desc = {
		trigger = {
			has_ruler_flag = hre_king_death_reason_battle
		}
		desc = "besseres_hrr_events.EVTDESC23.1"
	}
	desc = {
		trigger = {
			has_ruler_flag = hre_king_death_reason_assault
		}
		desc = "besseres_hrr_events.EVTDESC23.2"
	}
	desc = {
		trigger = {
			has_ruler_flag = hre_king_death_reason_disease
		}
		desc = "besseres_hrr_events.EVTDESC23.3"
	}
	desc = {
		trigger = {
			has_ruler_flag = hre_king_death_reason_natural_death
		}
		desc = "besseres_hrr_events.EVTDESC23.4"
	}
	desc = {
		trigger = {
			has_ruler_flag = hre_king_death_reason_unknown_suspicious
		}
		desc = "besseres_hrr_events.EVTDESC23.5"
	}
	picture = HRE_eventPicture

	major = yes
	is_triggered_only = yes

	major_trigger = {
		OR = {
			is_part_of_hre = yes
			any_owned_province = {
				is_part_of_hre = yes
			}
			any_neighbor_country = {
				is_part_of_hre = yes
			}
			any_subject_country = {
				is_part_of_hre = yes
			}
			tag = PAP
			capital_scope = {
				region = italy_region
			}
			has_country_flag = debug_gets_major_hre_events
		}
	}

	immediate = {
		hidden_effect = {
			if = {
				limit = {
					OR = {
						war_with = PAP
						any_country = {
							is_neighbor_of = PAP
							war_with = ROOT
						}
					}
				}
				if = {
					limit = {
						is_monarch_leader = yes
					}
					random_list = {
						40 = { set_ruler_flag = hre_king_death_reason_battle }
						30 = { set_ruler_flag = hre_king_death_reason_assault }
						10 = { set_ruler_flag = hre_king_death_reason_disease }
						20 = {
							if = {
								limit = {
									ruler_age = 50
								}
								random_list = {
									70 = { set_ruler_flag = hre_king_death_reason_natural_death }
									30 = { set_ruler_flag = hre_king_death_reason_unknown_suspicious }
								}
							}
							else = {
								random_list = {
									30 = { set_ruler_flag = hre_king_death_reason_natural_death }
									70 = { set_ruler_flag = hre_king_death_reason_unknown_suspicious }
								}
							}
						}
					}
				}
				else = {
					random_list = {
						20 = { set_ruler_flag = hre_king_death_reason_battle }
						40 = { set_ruler_flag = hre_king_death_reason_assault }
						10 = { set_ruler_flag = hre_king_death_reason_disease }
						30 = {
							if = {
								limit = {
									ruler_age = 50
								}
								random_list = {
									70 = { set_ruler_flag = hre_king_death_reason_natural_death }
									30 = { set_ruler_flag = hre_king_death_reason_unknown_suspicious }
								}
							}
							else = {
								random_list = {
									30 = { set_ruler_flag = hre_king_death_reason_natural_death }
									70 = { set_ruler_flag = hre_king_death_reason_unknown_suspicious }
								}
							}
						}
					}
				}
			}
			else = {
				random_list = {
					40 = { set_ruler_flag = hre_king_death_reason_disease }
					20 = { set_ruler_flag = hre_king_death_reason_assault }
					10 = { set_ruler_flag = hre_king_death_reason_unknown_suspicious }
					30 = {
						if = {
							limit = {
								ruler_age = 50
							}
							random_list = {
								70 = { set_ruler_flag = hre_king_death_reason_natural_death }
								30 = { set_ruler_flag = hre_king_death_reason_disease }
							}
						}
						else = {
							random_list = {
								30 = { set_ruler_flag = hre_king_death_reason_natural_death }
								70 = { set_ruler_flag = hre_king_death_reason_disease }
							}
						}
					}
				}
			}

			if = {
				limit = {
					has_ruler_flag = hre_king_death_reason_disease
				}
				random_list = {
					15 = { set_ruler_flag = hre_king_death_disease_ergotism }
					15 = { set_ruler_flag = hre_king_death_disease_typhoid_fever }
					15 = { set_ruler_flag = hre_king_death_disease_anthrax }
					20 = { set_ruler_flag = hre_king_death_disease_smallpox }
					20 = { set_ruler_flag = hre_king_death_disease_dysentery }
					15 = { set_ruler_flag = hre_king_death_disease_plague }
				}
			}
		}
	}

	option = {
		name = "besseres_hrr_events23.EVTOPT1"

		custom_tooltip = HRE_KING_DIES_ON_HIS_JOURNEY_TO_ROME
		hidden_effect = {
			clr_ruler_flag = sent_ruler_to_rome_to_become_emperor
			kill_ruler = yes
			if = {
				limit = {
					is_emperor = yes
				}
				add_imperial_influence = -8
			}
		}
	}
}

# Emperor can charge additional taxes
country_event = {
	id = besseres_hrr_events.24
	title = "besseres_hrr_events.EVTNAME24"
	desc = "besseres_hrr_events.EVTDESC24"
	picture = HRE_eventPicture

	major = yes
	major_trigger = {
		OR = {
			is_part_of_hre = yes
			any_owned_province = {
				is_part_of_hre = yes
			}
			any_neighbor_country = {
				is_part_of_hre = yes
			}
			any_subject_country = {
				is_part_of_hre = yes
			}
			has_country_flag = debug_gets_major_hre_events
		}
	}

	trigger = {
		NOT = { tag = JMN }
		is_emperor = yes
		OR = {
			AND = {
				NOT = { has_dlc = "Emperor" }
				hre_reform_passed = gemeinerpfennig
			}
			AND = {
				has_dlc = "Emperor"
				hre_reform_passed = emperor_gemeinerpfennig
			}
		}
		has_regency = no
		NOT = { has_ruler_flag = emperor_raised_addional_taxes }
	}

	mean_time_to_happen = {
		months = 120

		modifier = {
			factor = 0.5

			ruler_age = 50
		}
		modifier = {
			factor = 0.75

			any_country = {
				is_part_of_hre = no
				war_with = ROOT
			}
		}
		modifier = {
			factor = 1.5

			any_country = {
				is_part_of_hre = yes
				war_with = ROOT
			}
		}
	}

	immediate = {
		set_ruler_flag = emperor_raised_addional_taxes
	}

	option = {	# Raise high taxes
		name = "besseres_hrr_events24.EVTOPT1"

		trigger = {
			imperial_influence = 5
		}

		ai_chance = {
			factor = 0.3
		}

		add_imperial_influence = -5

		add_ruler_modifier = {
			name = hre_additional_taxes
			duration = 3650
		}

		every_country = {
			limit = {
				is_part_of_hre = yes
				NOT = { tag = ROOT }
			}
			add_opinion = {
				who = ROOT
				modifier = raised_additional_high_taxes
			}
		}
	}

	option = {	# Raise moderate taxes
		name = "besseres_hrr_events24.EVTOPT2"

		ai_chance = {
			factor = 0.5
		}

		add_ruler_modifier = {
			name = hre_additional_taxes
			duration = 1825
		}

		every_country = {
			limit = {
				is_part_of_hre = yes
				NOT = { tag = ROOT }
			}
			add_opinion = {
				who = ROOT
				modifier = raised_additional_moderate_taxes
			}
		}
	}

	option = {	# Raise no additional taxes
		name = "besseres_hrr_events24.EVTOPT3"

		ai_chance = {
			factor = 0.2
		}

		add_prestige = 5

		every_country = {
			limit = {
				is_part_of_hre = yes
				NOT = { tag = ROOT }
			}
			add_opinion = {
				who = ROOT
				modifier = raised_no_additional_taxes
			}
		}
	}
}

# besseres_hrr_events.25 deleted

# Pope refused to crown King of HRE Emperor
country_event = {
	id = besseres_hrr_events.26
	title = "besseres_hrr_events.EVTNAME26"
	desc = "besseres_hrr_events.EVTDESC26"
	picture = HRE_eventPicture

	major = yes
	major_trigger = {
		OR = {
			is_part_of_hre = yes
			any_owned_province = {
				is_part_of_hre = yes
			}
			any_neighbor_country = {
				is_part_of_hre = yes
			}
			any_subject_country = {
				is_part_of_hre = yes
			}
			tag = PAP
			capital_scope = {
				region = italy_region
			}
			has_country_flag = debug_gets_major_hre_events
		}
	}

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			clr_ruler_flag = sent_ruler_to_rome_to_become_emperor
			add_ruler_modifier = {
				name = pope_refused_crown_emperor_cooldown
				duration = 1825
				hidden = yes
			}
		}
	}

	option = {
		name = "besseres_hrr_events26.EVTOPT1"

		custom_tooltip = POPE_REFUSES_TO_CROWN_HOLY_ROMAN_KING
		add_prestige = -10
		if = {
			limit = {
				exists = PAP
			}
			add_opinion = {
				who = PAP
				modifier = pope_refused_to_crown_us_emperor
			}
		}
		else_if = {
			limit = {
				is_papal_controller = no
			}
			random_country = {
				limit = {
					is_papal_controller = yes
				}
				reverse_add_opinion = {
					who = ROOT
					modifier = pope_refused_to_crown_us_emperor
				}
			}
		}
		else = {
			add_papal_influence = -10
		}
	}
}

# Slavic Pagans raid the HRE borders
country_event = {
	id = besseres_hrr_events.27
	title = besseres_hrr_events.EVTNAME27
	desc = besseres_hrr_events.EVTDESC27
	picture = HRE_eventPicture

	trigger = {
		is_emperor = no
		is_part_of_hre = no
		religion_group = slavic_pagan
		emperor = {
			NOT = { tag = JMN }
			NOT = { war_with = ROOT }
			NOT = { truce_with = ROOT }
			OR = {
				has_dlc = "Common Sense"
				NOT = { overlord_of = ROOT }
			}
		}
		OR = {
			current_age = classical_age
			current_age = late_classical_age
			current_age = age_of_migrations
			current_age = dark_age
			current_age = feudal_age
			current_age = high_middle_ages
			# 1356
			current_age = age_of_feudalism
		}
		any_owned_province = {
			is_part_of_hre = no
			NOT = { religion = catholic }
			any_neighbor_province = {
				NOT = { owned_by = ROOT }
				owner = {
					is_part_of_hre = yes
					NOT = { alliance_with = ROOT }
					NOT = { is_subject_of = ROOT }
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 120

		modifier = {
			factor = 0.75
			emperor = {
				has_casus_belli = {
					type = cb_convert_slavic_pagans
					target = ROOT
				}
			}
		}
	}

	immediate = {
		hidden_effect = {
			if = {
				limit = {
					any_owned_province = {
						is_part_of_hre = no
						NOT = { religion = catholic }
						any_neighbor_province = {
							NOT = { owned_by = ROOT }
							owner = {
								is_part_of_hre = yes
								NOT = { alliance_with = ROOT }
								NOT = { is_subject_of = ROOT }
							}
							is_part_of_hre = yes
							religion = catholic
						}
					}
				}
				random_owned_province = {
					limit = {
						is_part_of_hre = no
						NOT = { religion = catholic }
						any_neighbor_province = {
							NOT = { owned_by = ROOT }
							owner = {
								is_part_of_hre = yes
								NOT = { alliance_with = ROOT }
								NOT = { is_subject_of = ROOT }
							}
							is_part_of_hre = yes
							religion = catholic
						}
					}
					random_neighbor_province = {
						limit = {
							NOT = { owned_by = ROOT }
							owner = {
								is_part_of_hre = yes
								NOT = { alliance_with = ROOT }
								NOT = { is_subject_of = ROOT }
							}
							is_part_of_hre = yes
							religion = catholic
						}
						save_event_target_as = raided_hre_province
					}
				}
			}
			else_if = {
				limit = {
					any_owned_province = {
						is_part_of_hre = no
						NOT = { religion = catholic }
						any_neighbor_province = {
							NOT = { owned_by = ROOT }
							owner = {
								is_part_of_hre = yes
								NOT = { alliance_with = ROOT }
								NOT = { is_subject_of = ROOT }
							}
							is_part_of_hre = yes
							religion = catholic
						}
					}
				}
				random_owned_province = {
					limit = {
						is_part_of_hre = no
						NOT = { religion = catholic }
						any_neighbor_province = {
							NOT = { owned_by = ROOT }
							owner = {
								is_part_of_hre = yes
								NOT = { alliance_with = ROOT }
								NOT = { is_subject_of = ROOT }
							}
							is_part_of_hre = yes
						}
					}
					random_neighbor_province = {
						limit = {
							NOT = { owned_by = ROOT }
							owner = {
								is_part_of_hre = yes
								NOT = { alliance_with = ROOT }
								NOT = { is_subject_of = ROOT }
							}
							is_part_of_hre = yes
						}
						save_event_target_as = raided_hre_province
					}
				}
			}
			else = {
				random_owned_province = {
					limit = {
						is_part_of_hre = no
						NOT = { religion = catholic }
						any_neighbor_province = {
							NOT = { owned_by = ROOT }
							owner = {
								is_part_of_hre = yes
								NOT = { alliance_with = ROOT }
								NOT = { is_subject_of = ROOT }
							}
						}
					}
					random_neighbor_province = {
						limit = {
							NOT = { owned_by = ROOT }
							owner = {
								is_part_of_hre = yes
								NOT = { alliance_with = ROOT }
								NOT = { is_subject_of = ROOT }
							}
						}
						save_event_target_as = raided_hre_province
					}
				}
			}
		}
	}

	option = {
		name = besseres_hrr_events27.EVTOPT1

		ai_chance = { factor = 100 }

		add_adm_power = 25
		add_dip_power = 25
		add_mil_power = 25
		add_treasury = 200
		event_target:raided_hre_province = {
			if = {
				limit = {
					NOT = { has_province_modifier = raided_hre_province_modifier }
				}
				add_province_modifier = {
					name = raided_hre_province_modifier
					duration = 1825
				}
			}
			else = {
				extend_province_modifier = {
					name = raided_hre_province_modifier
					duration = 1825
				}
			}
			owner = {
				add_opinion = {
					who = ROOT
					modifier = raided_hre_province_opinion
				}
			}
		}
		emperor = {
			tooltip = {
				add_imperial_influence = -10
				add_casus_belli = {
					target = ROOT
					type = cb_insult
				}
			}
			hidden_effect = {
				country_event = { id = besseres_hrr_events.28 }
			}
		}
	}

	option = {
		name = besseres_hrr_events27.EVTOPT2

		ai_chance = { factor = 0 }

		add_prestige = -5
		if = {
			limit = {
				has_estate = estate_nobles
			}
			add_estate_loyalty = {
				estate = estate_nobles
				loyalty = -5
			}
		}
	}
}

# Slavic Pagans raid the HRE borders (Emperor gets notified)
country_event = {
	id = besseres_hrr_events.28
	title = besseres_hrr_events.EVTNAME28
	desc = besseres_hrr_events.EVTDESC28
	picture = HRE_eventPicture

	is_triggered_only = yes

	option = {
		name = besseres_hrr_events28.EVTOPT1

		ai_chance = { factor = 100 }

		add_imperial_influence = -10
		add_casus_belli = {
			target = FROM
			type = cb_insult
		}

		tooltip = {
			FROM = {
				add_adm_power = 25
				add_dip_power = 25
				add_mil_power = 25
				add_treasury = 200
				event_target:raided_hre_province = {
					extend_province_modifier = {
						name = raided_hre_province_modifier
						duration = 1825
					}
					owner = {
						add_opinion = {
							who = FROM
							modifier = raided_hre_province_opinion
						}
					}
				}
			}
		}
	}
}

# Notification that Pope won't crown Emperors anymore
country_event = {
	id = besseres_hrr_events.29
	title = besseres_hrr_events.EVTNAME29
	desc = besseres_hrr_events.EVTDESC29
	picture = HRE_eventPicture

	fire_only_once = yes

	major = yes
	major_trigger = {
		OR = {
			is_part_of_hre = yes
			is_elector = yes
			tag = PAP
			has_country_flag = debug_gets_major_hre_events
		}
	}

	trigger = {
		NOT = { tag = JMN }
		is_emperor = yes
		is_religion_enabled = protestant
		NOT = { has_ruler_flag = zum_kaiser_gekroent }
	}

	mean_time_to_happen = {
		months = 1
	}

	option = {
		name = besseres_hrr_events29.EVTOPT1

		ai_chance = { factor = 100 }

		custom_tooltip = PROTESTANTISM_ENABLED_EMPEROR_WILL_NOT_BE_CROWNED_ANYMORE
	}
}

# Notification that country is too large to add to HRE
country_event = {
	id = besseres_hrr_events.30
	title = besseres_hrr_events.EVTNAME30
	desc = besseres_hrr_events.EVTDESC30
	picture = HRE_eventPicture

	is_triggered_only = yes

	option = {
		name = besseres_hrr_events30.EVTOPT1

		ai_chance = { factor = 100 }

		custom_tooltip = ADD_COUNTRY_TO_HRE_TOO_LARGE_TT
		hidden_effect = {
			set_variable = { which = add_country_to_hre_ws_cost value = 0 }
		}
	}
}

# Make country kingdom rank again if they lose it
country_event = {
	id = besseres_hrr_events.31
	title = besseres_hrr_events.EVTNAME31
	desc = besseres_hrr_events.EVTDESC31
	picture = HRE_eventPicture

	hidden = yes

	trigger = {
		has_country_flag = was_granted_kingdom_rank_in_hre
		NOT = { government_rank = 2 }
		is_part_of_hre = yes
		is_emperor = no
		is_subject = no
		is_elector = no
		total_development = 300
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		hidden_effect = {
			set_government_rank_force = 2
		}
	}

	option = {
		name = besseres_hrr_events31.EVTOPT1

		ai_chance = { factor = 100 }
	}
}